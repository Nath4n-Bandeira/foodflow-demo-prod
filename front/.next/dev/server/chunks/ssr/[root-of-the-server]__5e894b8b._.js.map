{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///E:/bugtest/iot-test/front/app/context/ClienteContext.ts"],"sourcesContent":["import type { ClienteItf } from \"../utils/types/ClienteItf\"\r\nimport { create } from \"zustand\"\r\nimport { persist } from \"zustand/middleware\"\r\n\r\ntype ClienteStore = {\r\n  cliente: ClienteItf\r\n  logaCliente: (clienteLogado: ClienteItf) => void\r\n  deslogaCliente: () => void\r\n  isHydrated: boolean\r\n  setIsHydrated: (hydrated: boolean) => void\r\n}\r\n\r\nexport const useClienteStore = create<ClienteStore>()(\r\n  persist(\r\n    (set) => ({\r\n      cliente: {} as ClienteItf,\r\n      isHydrated: false,\r\n      logaCliente: (clienteLogado) => set({ cliente: clienteLogado }),\r\n      deslogaCliente: () => set({ cliente: {} as ClienteItf }),\r\n      setIsHydrated: (hydrated) => set({ isHydrated: hydrated }),\r\n    }),\r\n    {\r\n      name: \"cliente-storage\",\r\n      onRehydrateStorage: () => (state) => {\r\n        if (state) {\r\n          state.setIsHydrated(true)\r\n        }\r\n      },\r\n    },\r\n  ),\r\n)\r\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAUO,MAAM,kBAAkB,IAAA,kJAAM,IACnC,IAAA,wJAAO,EACL,CAAC,MAAQ,CAAC;QACR,SAAS,CAAC;QACV,YAAY;QACZ,aAAa,CAAC,gBAAkB,IAAI;gBAAE,SAAS;YAAc;QAC7D,gBAAgB,IAAM,IAAI;gBAAE,SAAS,CAAC;YAAgB;QACtD,eAAe,CAAC,WAAa,IAAI;gBAAE,YAAY;YAAS;IAC1D,CAAC,GACD;IACE,MAAM;IACN,oBAAoB,IAAM,CAAC;YACzB,IAAI,OAAO;gBACT,MAAM,aAAa,CAAC;YACtB;QACF;AACF","debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///E:/bugtest/iot-test/front/app/context/FriendsContext.ts"],"sourcesContent":["// context/FriendsContext.ts\r\nimport { create } from \"zustand\"\r\nimport { persist } from \"zustand/middleware\"\r\nimport Cookies from \"js-cookie\"\r\n\r\nexport interface Friend {\r\n  id: string\r\n  nome: string\r\n  email: string\r\n  avatar?: string\r\n}\r\n\r\nexport interface FriendRequest {\r\n  id: string\r\n  senderId: string\r\n  senderName: string\r\n  senderEmail: string\r\n  receiverId: string\r\n  status: \"pending\" | \"accepted\" | \"rejected\"\r\n  createdAt: Date\r\n}\r\n\r\nexport interface Message {\r\n  id: string\r\n  senderId: string\r\n  receiverId: string\r\n  content: string\r\n  timestamp: Date\r\n  read: boolean\r\n}\r\n\r\ntype FriendsStore = {\r\n  friends: Friend[]\r\n  messages: Message[]\r\n  activeChat: Friend | null\r\n  friendRequests: FriendRequest[] // Added friend requests to store\r\n  sendFriendRequest: (targetUserId: string, targetUserName: string, targetUserEmail: string) => Promise<void> // New function\r\n  acceptFriendRequest: (requestId: string, friend: Friend) => Promise<void> // New function\r\n  rejectFriendRequest: (requestId: string) => Promise<void> // New function\r\n  addFriend: (friend: Friend) => void\r\n  removeFriend: (friendId: string) => void\r\n  sendMessage: (message: Omit<Message, \"id\" | \"timestamp\" | \"read\">) => Promise<void>\r\n  markAsRead: (messageId: string) => void\r\n  getConversation: (userId: string, friendId: string) => Message[]\r\n  loadConversation: (userId: string, friendId: string) => Promise<void>\r\n  setMessages: (messages: Message[]) => void\r\n  openChat: (friend: Friend) => void\r\n  closeChat: () => void\r\n  reset: () => void\r\n}\r\n\r\nconst getAuthHeaders = () => {\r\n  const token = Cookies.get(\"token\")\r\n  return {\r\n    \"Content-Type\": \"application/json\",\r\n    ...(token && { Authorization: `Bearer ${token}` }),\r\n  }\r\n}\r\n\r\nexport const useFriendsStore = create<FriendsStore>()(\r\n  persist(\r\n    (set, get) => ({\r\n      friends: [],\r\n      messages: [],\r\n      activeChat: null,\r\n      friendRequests: [], // Initialize friend requests\r\n\r\n      sendFriendRequest: async (targetUserId: string, targetUserName: string, targetUserEmail: string) => {\r\n        try {\r\n          console.log(\"[v0] Sending friend request to:\", targetUserId)\r\n          const response = await fetch(`${process.env.NEXT_PUBLIC_URL_API}/friendRequests`, {\r\n            method: \"POST\",\r\n            headers: getAuthHeaders(),\r\n            body: JSON.stringify({\r\n              receiverId: targetUserId,\r\n            }),\r\n          })\r\n\r\n          if (!response.ok) {\r\n            const errorText = await response.text()\r\n            console.error(\"[v0] Failed to send friend request:\", errorText)\r\n            throw new Error(\"Failed to send friend request\")\r\n          }\r\n\r\n          const savedRequest = await response.json()\r\n          console.log(\"[v0] Friend request sent:\", savedRequest)\r\n\r\n          set((state) => ({\r\n            friendRequests: [\r\n              ...state.friendRequests,\r\n              {\r\n                id: savedRequest.id,\r\n                senderId: savedRequest.senderId,\r\n                senderName: savedRequest.senderName || \"Usuário\",\r\n                senderEmail: savedRequest.senderEmail || \"\",\r\n                receiverId: savedRequest.receiverId,\r\n                status: \"pending\",\r\n                createdAt: new Date(savedRequest.createdAt),\r\n              },\r\n            ],\r\n          }))\r\n        } catch (error) {\r\n          console.error(\"[v0] Error sending friend request:\", error)\r\n          throw error\r\n        }\r\n      },\r\n\r\n      acceptFriendRequest: async (requestId: string, friend: Friend) => {\r\n        try {\r\n          console.log(\"[v0] Accepting friend request:\", requestId)\r\n          const response = await fetch(`${process.env.NEXT_PUBLIC_URL_API}/friendRequests/${requestId}/accept`, {\r\n            method: \"POST\",\r\n            headers: getAuthHeaders(),\r\n          })\r\n\r\n          if (!response.ok) {\r\n            throw new Error(\"Failed to accept friend request\")\r\n          }\r\n\r\n          set((state) => ({\r\n            friendRequests: state.friendRequests.filter((r) => r.id !== requestId),\r\n            friends: [...state.friends, friend],\r\n          }))\r\n        } catch (error) {\r\n          console.error(\"[v0] Error accepting friend request:\", error)\r\n          throw error\r\n        }\r\n      },\r\n\r\n      rejectFriendRequest: async (requestId: string) => {\r\n        try {\r\n          console.log(\"[v0] Rejecting friend request:\", requestId)\r\n          const response = await fetch(`${process.env.NEXT_PUBLIC_URL_API}/friendRequests/${requestId}/reject`, {\r\n            method: \"POST\",\r\n            headers: getAuthHeaders(),\r\n          })\r\n\r\n          if (!response.ok) {\r\n            throw new Error(\"Failed to reject friend request\")\r\n          }\r\n\r\n          set((state) => ({\r\n            friendRequests: state.friendRequests.filter((r) => r.id !== requestId),\r\n          }))\r\n        } catch (error) {\r\n          console.error(\"[v0] Error rejecting friend request:\", error)\r\n          throw error\r\n        }\r\n      },\r\n\r\n      addFriend: (friend) =>\r\n        set((state) => ({\r\n          friends: [...state.friends, friend],\r\n        })),\r\n      removeFriend: (friendId) =>\r\n        set((state) => ({\r\n          friends: state.friends.filter((f) => f.id !== friendId),\r\n        })),\r\n      sendMessage: async (message) => {\r\n        try {\r\n          console.log(\"[v0] Sending message to backend:\", message)\r\n          const response = await fetch(`${process.env.NEXT_PUBLIC_URL_API}/mensagens`, {\r\n            method: \"POST\",\r\n            headers: getAuthHeaders(),\r\n            body: JSON.stringify({\r\n              destinatarioId: message.receiverId,\r\n              conteudo: message.content,\r\n            }),\r\n          })\r\n\r\n          if (!response.ok) {\r\n            const errorText = await response.text()\r\n            console.error(\"[v0] Failed to send message:\", errorText)\r\n            throw new Error(\"Failed to send message\")\r\n          }\r\n\r\n          const savedMessage = await response.json()\r\n          console.log(\"[v0] Message saved:\", savedMessage)\r\n\r\n          set((state) => ({\r\n            messages: [\r\n              ...state.messages,\r\n              {\r\n                id: savedMessage.id,\r\n                senderId: savedMessage.remetenteId,\r\n                receiverId: savedMessage.destinatarioId,\r\n                content: savedMessage.conteudo,\r\n                timestamp: new Date(savedMessage.createdAt),\r\n                read: savedMessage.lida,\r\n              },\r\n            ],\r\n          }))\r\n        } catch (error) {\r\n          console.error(\"[v0] Error sending message:\", error)\r\n          // Fallback to local storage if API fails\r\n          set((state) => ({\r\n            messages: [\r\n              ...state.messages,\r\n              {\r\n                ...message,\r\n                id: Date.now().toString(),\r\n                timestamp: new Date(),\r\n                read: false,\r\n              },\r\n            ],\r\n          }))\r\n        }\r\n      },\r\n      markAsRead: (messageId) =>\r\n        set((state) => ({\r\n          messages: state.messages.map((msg) => (msg.id === messageId ? { ...msg, read: true } : msg)),\r\n        })),\r\n      getConversation: (userId, friendId) => {\r\n        const { messages } = get()\r\n        return messages\r\n          .filter(\r\n            (msg) =>\r\n              (msg.senderId === userId && msg.receiverId === friendId) ||\r\n              (msg.senderId === friendId && msg.receiverId === userId),\r\n          )\r\n          .sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime())\r\n      },\r\n      loadConversation: async (userId, friendId) => {\r\n        try {\r\n          console.log(\"[v0] Loading conversation between:\", userId, \"and\", friendId)\r\n          console.log(\"[v0] API URL:\", `${process.env.NEXT_PUBLIC_URL_API}/mensagens/conversa/${friendId}`)\r\n          console.log(\"[v0] Token:\", Cookies.get(\"token\") ? \"Present\" : \"Missing\")\r\n\r\n          const response = await fetch(`${process.env.NEXT_PUBLIC_URL_API}/mensagens/conversa/${friendId}`, {\r\n            headers: getAuthHeaders(),\r\n          })\r\n\r\n          console.log(\"[v0] Response status:\", response.status, response.statusText)\r\n\r\n          if (!response.ok) {\r\n            const errorText = await response.text()\r\n            console.error(\"[v0] Failed to load messages. Status:\", response.status)\r\n            console.error(\"[v0] Error response:\", errorText)\r\n            throw new Error(`Failed to load messages: ${response.status} ${response.statusText}`)\r\n          }\r\n\r\n          const data = await response.json()\r\n          console.log(\"[v0] Loaded messages from API:\", data)\r\n\r\n          const messages: Message[] = Array.isArray(data)\r\n            ? data.map((msg: any) => ({\r\n                id: msg.id,\r\n                senderId: msg.remetenteId,\r\n                receiverId: msg.destinatarioId,\r\n                content: msg.conteudo,\r\n                timestamp: new Date(msg.createdAt),\r\n                read: msg.lida,\r\n              }))\r\n            : []\r\n\r\n          set((state) => {\r\n            const otherMessages = state.messages.filter(\r\n              (m) =>\r\n                !(\r\n                  (m.senderId === userId && m.receiverId === friendId) ||\r\n                  (m.senderId === friendId && m.receiverId === userId)\r\n                ),\r\n            )\r\n            return {\r\n              messages: [...otherMessages, ...messages],\r\n            }\r\n          })\r\n        } catch (error) {\r\n          console.error(\"[v0] Error loading conversation:\", error)\r\n        }\r\n      },\r\n      setMessages: (messages) => set({ messages }),\r\n      openChat: (friend) => set({ activeChat: friend }),\r\n      closeChat: () => set({ activeChat: null }),\r\n      reset: () => set({ friends: [], messages: [], activeChat: null, friendRequests: [] }),\r\n    }),\r\n    {\r\n      name: \"friends-storage\",\r\n      partialize: (state) => ({\r\n        friends: state.friends,\r\n        messages: state.messages,\r\n        friendRequests: state.friendRequests, // Persist friend requests\r\n      }),\r\n    },\r\n  ),\r\n)\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///E:/bugtest/iot-test/front/app/components/modals/FriendsModal.tsx"],"sourcesContent":["\"use client\"\r\nimport { useState } from \"react\"\r\nimport { X, Users, MessageCircle, User } from \"lucide-react\"\r\nimport { useFriendsStore, type Friend } from \"@/app/context/FriendsContext\"\r\n\r\nexport default function FriendsModal() {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const { friends, openChat } = useFriendsStore()\r\n\r\n  const handleOpenChat = (friend: Friend) => {\r\n    openChat(friend)\r\n    setIsOpen(false)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Button to open modal */}\r\n      <button\r\n        onClick={() => setIsOpen(true)}\r\n        className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium relative\"\r\n      >\r\n        <Users className=\"w-5 h-5\" />\r\n        <span className=\"hidden sm:inline\">Amigos</span>\r\n        {friends.length > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 bg-green-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center\">\r\n            {friends.length}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {/* Modal */}\r\n      {isOpen && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 max-h-[80vh] flex flex-col\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center\">\r\n                  <Users className=\"w-5 h-5 text-green-600\" />\r\n                </div>\r\n                <div>\r\n                  <h2 className=\"text-xl font-bold text-gray-900\">Seus Amigos</h2>\r\n                  <p className=\"text-sm text-gray-500\">{friends.length} amigo(s)</p>\r\n                </div>\r\n              </div>\r\n              <button onClick={() => setIsOpen(false)} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\">\r\n                <X className=\"w-5 h-5 text-gray-500\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Friends List */}\r\n            <div className=\"flex-1 overflow-y-auto p-6\">\r\n              {friends.length > 0 ? (\r\n                <div className=\"space-y-3\">\r\n                  {friends.map((friend) => (\r\n                    <div\r\n                      key={friend.id}\r\n                      className=\"bg-gray-50 p-4 rounded-xl border border-gray-200 hover:border-green-300 hover:shadow-md transition-all duration-200\"\r\n                    >\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-12 h-12 bg-green-600 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                          <span className=\"text-lg font-bold text-white select-none\">\r\n                            {friend.nome?.charAt(0).toUpperCase() || \"?\"}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"flex-grow min-w-0\">\r\n                          <h3 className=\"text-base font-bold text-gray-900 truncate\">{friend.nome || \"Usuário\"}</h3>\r\n                          <p className=\"text-sm text-gray-500 truncate\">{friend.email}</p>\r\n                        </div>\r\n                        <button\r\n                          onClick={() => handleOpenChat(friend)}\r\n                          className=\"p-2 bg-green-600 hover:bg-green-700 rounded-full transition-colors flex-shrink-0\"\r\n                          title=\"Enviar mensagem\"\r\n                        >\r\n                          <MessageCircle className=\"w-5 h-5 text-white\" />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-12\">\r\n                  <div className=\"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                    <User className=\"w-10 h-10 text-gray-400\" />\r\n                  </div>\r\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Nenhum amigo ainda</h3>\r\n                  <p className=\"text-sm text-gray-500 mb-4\">Adicione amigos para começar a conversar!</p>\r\n                  <a\r\n                    href=\"/amigos\"\r\n                    onClick={() => setIsOpen(false)}\r\n                    className=\"inline-block px-6 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors\"\r\n                  >\r\n                    Adicionar Amigos\r\n                  </a>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            {friends.length > 0 && (\r\n              <div className=\"p-6 border-t border-gray-200\">\r\n                <a\r\n                  href=\"/amigos\"\r\n                  onClick={() => setIsOpen(false)}\r\n                  className=\"block w-full text-center px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors\"\r\n                >\r\n                  Ver Todos os Amigos\r\n                </a>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,IAAA,mJAAe;IAE7C,MAAM,iBAAiB,CAAC;QACtB,SAAS;QACT,UAAU;IACZ;IAEA,qBACE;;0BAEE,8OAAC;gBACC,SAAS,IAAM,UAAU;gBACzB,WAAU;;kCAEV,8OAAC,6MAAK;wBAAC,WAAU;;;;;;kCACjB,8OAAC;wBAAK,WAAU;kCAAmB;;;;;;oBAClC,QAAQ,MAAM,GAAG,mBAChB,8OAAC;wBAAK,WAAU;kCACb,QAAQ,MAAM;;;;;;;;;;;;YAMpB,wBACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,6MAAK;gDAAC,WAAU;;;;;;;;;;;sDAEnB,8OAAC;;8DACC,8OAAC;oDAAG,WAAU;8DAAkC;;;;;;8DAChD,8OAAC;oDAAE,WAAU;;wDAAyB,QAAQ,MAAM;wDAAC;;;;;;;;;;;;;;;;;;;8CAGzD,8OAAC;oCAAO,SAAS,IAAM,UAAU;oCAAQ,WAAU;8CACjD,cAAA,8OAAC,iMAAC;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAKjB,8OAAC;4BAAI,WAAU;sCACZ,QAAQ,MAAM,GAAG,kBAChB,8OAAC;gCAAI,WAAU;0CACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;wCAEC,WAAU;kDAEV,cAAA,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;8DACb,cAAA,8OAAC;wDAAK,WAAU;kEACb,OAAO,IAAI,EAAE,OAAO,GAAG,iBAAiB;;;;;;;;;;;8DAG7C,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAG,WAAU;sEAA8C,OAAO,IAAI,IAAI;;;;;;sEAC3E,8OAAC;4DAAE,WAAU;sEAAkC,OAAO,KAAK;;;;;;;;;;;;8DAE7D,8OAAC;oDACC,SAAS,IAAM,eAAe;oDAC9B,WAAU;oDACV,OAAM;8DAEN,cAAA,8OAAC,yOAAa;wDAAC,WAAU;;;;;;;;;;;;;;;;;uCAlBxB,OAAO,EAAE;;;;;;;;;qDAyBpB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,0MAAI;4CAAC,WAAU;;;;;;;;;;;kDAElB,8OAAC;wCAAG,WAAU;kDAA2C;;;;;;kDACzD,8OAAC;wCAAE,WAAU;kDAA6B;;;;;;kDAC1C,8OAAC;wCACC,MAAK;wCACL,SAAS,IAAM,UAAU;wCACzB,WAAU;kDACX;;;;;;;;;;;;;;;;;wBAQN,QAAQ,MAAM,GAAG,mBAChB,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCACC,MAAK;gCACL,SAAS,IAAM,UAAU;gCACzB,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;AAUjB","debugId":null}},
    {"offset": {"line": 598, "column": 0}, "map": {"version":3,"sources":["file:///E:/bugtest/iot-test/front/app/components/header.tsx"],"sourcesContent":["\"use client\"\r\nimport Link from \"next/link\"\r\nimport Image from \"next/image\"\r\nimport { useClienteStore } from \"../context/ClienteContext\" // Usando sua lógica original\r\nimport { useFriendsStore } from \"../context/FriendsContext\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { useState } from \"react\"\r\nimport { ChevronDown, LogOut, Settings, User } from \"lucide-react\"\r\nimport Cookie from \"js-cookie\"\r\nimport FriendsModal from \"./modals/FriendsModal\"\r\n\r\nexport function Header() {\r\n  const { cliente, deslogaCliente } = useClienteStore()\r\n  const { reset: resetFriends } = useFriendsStore()\r\n  const router = useRouter()\r\n  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false)\r\n\r\n  function clienteSair() {\r\n    if (confirm(\"Confirma saída da conta ?\")) {\r\n      deslogaCliente()\r\n      resetFriends()\r\n      if (localStorage.getItem(\"clienteKey\")) {\r\n        localStorage.removeItem(\"clienteKey\")\r\n      }\r\n      router.push(\"/login\")\r\n      Cookie.remove(\"token\")\r\n    }\r\n  }\r\n\r\n  const isLoggedIn = cliente && cliente.id\r\n\r\n  return (\r\n    <header className=\"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm\">\r\n      <nav className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex items-center justify-between h-16\">\r\n          <div className=\"flex-shrink-0\">\r\n            <Link href={isLoggedIn ? \"/\" : \"/\"} className=\"flex items-center gap-3\">\r\n              <Image src=\"/horde.png\" alt=\"FoodFlow Logo\" width={48} height={48} className=\"h-12 w-auto\" priority />\r\n              <span className=\"self-center text-2xl font-semibold whitespace-nowrap text-black\">foodflow</span>\r\n            </Link>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-4\">\r\n            {isLoggedIn ? (\r\n              // --- logaduuuuu ---\r\n              <>\r\n                <FriendsModal />\r\n\r\n                <div className=\"relative\">\r\n                  <button\r\n                    onClick={() => setIsUserMenuOpen(!isUserMenuOpen)}\r\n                    className=\"flex items-center gap-2 p-1.5 rounded-full hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\"\r\n                  >\r\n                    <div className=\"w-9 h-9 rounded-full bg-green-100 flex items-center justify-center text-green-600\">\r\n                      <User className=\"w-5 h-5\" />\r\n                    </div>\r\n                    <span className=\"hidden sm:inline font-semibold text-gray-700\">{cliente.nome}</span>\r\n                    <ChevronDown className=\"w-5 h-5 text-gray-400\" />\r\n                  </button>\r\n\r\n                  {isUserMenuOpen && (\r\n                    <div\r\n                      className=\"absolute right-0 mt-2 w-56 origin-top-right bg-white rounded-xl shadow-lg ring-1 ring-black ring-opacity-5\"\r\n                      onMouseLeave={() => setIsUserMenuOpen(false)}\r\n                    >\r\n                      <div className=\"p-2\">\r\n                        <div className=\"px-3 py-2\">\r\n                          <p className=\"text-sm font-medium text-gray-900 truncate\">{cliente.nome}</p>\r\n                        </div>\r\n                        <div className=\"h-px bg-gray-200 my-1\"></div>\r\n                        <Link\r\n                          href=\"/perfil\"\r\n                          className=\"flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-md hover:bg-gray-100\"\r\n                        >\r\n                          <Settings className=\"w-4 h-4 text-gray-500\" /> Meu Perfil\r\n                        </Link>\r\n                        <Link\r\n                          href=\"/\"\r\n                          className=\"flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-md hover:bg-gray-100\"\r\n                        >\r\n                          Minhas Dispensas\r\n                        </Link>\r\n                        <button\r\n                          onClick={clienteSair}\r\n                          className=\"w-full text-left flex items-center gap-3 px-3 py-2 text-sm text-red-600 rounded-md hover:bg-red-50 hover:text-red-700\"\r\n                        >\r\n                          <LogOut className=\"w-4 h-4\" /> Sair\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </>\r\n            ) : (\r\n              // --- não ta logaduuuu ---\r\n              <div className=\"flex items-center gap-2\">\r\n                <Link\r\n                  href=\"/login\"\r\n                  className=\"px-4 py-2 rounded-lg text-sm font-semibold text-gray-600 hover:bg-gray-100 transition-colors\"\r\n                >\r\n                  Entrar\r\n                </Link>\r\n                <Link\r\n                  href=\"/register\"\r\n                  className=\"px-4 py-2 rounded-lg bg-green-600 text-white text-sm font-semibold hover:bg-green-700 transition-colors shadow-sm hover:shadow-md\"\r\n                >\r\n                  Criar Conta\r\n                </Link>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA,kOAA4D,6BAA6B;AACzF;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AATA;;;;;;;;;;;AAWO,SAAS;IACd,MAAM,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,IAAA,mJAAe;IACnD,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,IAAA,mJAAe;IAC/C,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,SAAS;QACP,IAAI,QAAQ,8BAA8B;YACxC;YACA;YACA,IAAI,aAAa,OAAO,CAAC,eAAe;gBACtC,aAAa,UAAU,CAAC;YAC1B;YACA,OAAO,IAAI,CAAC;YACZ,gKAAM,CAAC,MAAM,CAAC;QAChB;IACF;IAEA,MAAM,aAAa,WAAW,QAAQ,EAAE;IAExC,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,uKAAI;4BAAC,MAAM,aAAa,MAAM;4BAAK,WAAU;;8CAC5C,8OAAC,wIAAK;oCAAC,KAAI;oCAAa,KAAI;oCAAgB,OAAO;oCAAI,QAAQ;oCAAI,WAAU;oCAAc,QAAQ;;;;;;8CACnG,8OAAC;oCAAK,WAAU;8CAAkE;;;;;;;;;;;;;;;;;kCAItF,8OAAC;wBAAI,WAAU;kCACZ,aACC,qBAAqB;sCACrB;;8CACE,8OAAC,uJAAY;;;;;8CAEb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,SAAS,IAAM,kBAAkB,CAAC;4CAClC,WAAU;;8DAEV,8OAAC;oDAAI,WAAU;8DACb,cAAA,8OAAC,0MAAI;wDAAC,WAAU;;;;;;;;;;;8DAElB,8OAAC;oDAAK,WAAU;8DAAgD,QAAQ,IAAI;;;;;;8DAC5E,8OAAC,mOAAW;oDAAC,WAAU;;;;;;;;;;;;wCAGxB,gCACC,8OAAC;4CACC,WAAU;4CACV,cAAc,IAAM,kBAAkB;sDAEtC,cAAA,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;kEACb,cAAA,8OAAC;4DAAE,WAAU;sEAA8C,QAAQ,IAAI;;;;;;;;;;;kEAEzE,8OAAC;wDAAI,WAAU;;;;;;kEACf,8OAAC,uKAAI;wDACH,MAAK;wDACL,WAAU;;0EAEV,8OAAC,sNAAQ;gEAAC,WAAU;;;;;;4DAA0B;;;;;;;kEAEhD,8OAAC,uKAAI;wDACH,MAAK;wDACL,WAAU;kEACX;;;;;;kEAGD,8OAAC;wDACC,SAAS;wDACT,WAAU;;0EAEV,8OAAC,oNAAM;gEAAC,WAAU;;;;;;4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;2CAQ1C,2BAA2B;sCAC3B,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,uKAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;8CAGD,8OAAC,uKAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUjB","debugId":null}},
    {"offset": {"line": 884, "column": 0}, "map": {"version":3,"sources":["file:///E:/bugtest/iot-test/front/app/components/ChatBox.tsx"],"sourcesContent":["\"use client\"\r\nimport { useState, useEffect, useRef } from \"react\"\r\nimport type React from \"react\"\r\nimport { Send, X } from \"lucide-react\"\r\nimport { useFriendsStore, type Friend } from \"../context/FriendsContext\"\r\nimport { useClienteStore } from \"../context/ClienteContext\"\r\n\r\ninterface ChatBoxProps {\r\n  friend: Friend\r\n  onClose: () => void\r\n}\r\n\r\nexport function ChatBox({ friend, onClose }: ChatBoxProps) {\r\n  const [message, setMessage] = useState(\"\")\r\n  const [isLoading, setIsLoading] = useState(false) // Added loading state\r\n  const { cliente } = useClienteStore()\r\n  const { sendMessage, getConversation, loadConversation } = useFriendsStore()\r\n  const messagesEndRef = useRef<HTMLDivElement>(null)\r\n\r\n  const conversation = getConversation(cliente.id, friend.id)\r\n\r\n  useEffect(() => {\r\n    const fetchMessages = async () => {\r\n      setIsLoading(true)\r\n      await loadConversation(cliente.id, friend.id)\r\n      setIsLoading(false)\r\n    }\r\n    fetchMessages()\r\n  }, [cliente.id, friend.id, loadConversation])\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n  }\r\n\r\n  useEffect(() => {\r\n    scrollToBottom()\r\n  }, [conversation])\r\n\r\n  if (!friend || !friend.id) {\r\n    console.error(\"[v0] ChatBox received invalid friend object:\", friend)\r\n    return null\r\n  }\r\n\r\n  const handleSendMessage = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    if (message.trim()) {\r\n      await sendMessage({\r\n        senderId: cliente.id,\r\n        receiverId: friend.id,\r\n        content: message.trim(),\r\n      })\r\n      setMessage(\"\")\r\n    }\r\n  }\r\n\r\n  const friendName = friend.nome || friend.email || \"Usuário\"\r\n  const friendInitial = friendName.charAt(0).toUpperCase()\r\n\r\n  return (\r\n    <div className=\"fixed bottom-4 right-4 w-96 h-[500px] bg-white rounded-lg shadow-2xl border border-gray-200 flex flex-col z-50\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200 bg-green-600 text-white rounded-t-lg\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-10 h-10 rounded-full bg-white text-green-600 flex items-center justify-center font-semibold\">\r\n            {friendInitial}\r\n          </div>\r\n          <div>\r\n            <p className=\"font-semibold\">{friendName}</p>\r\n            <p className=\"text-xs text-green-100\">Online</p>\r\n          </div>\r\n        </div>\r\n        <button onClick={onClose} className=\"p-1 hover:bg-green-700 rounded-lg transition-colors\">\r\n          <X className=\"w-5 h-5\" />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Messages */}\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\r\n        {isLoading ? (\r\n          <div className=\"text-center text-gray-500 mt-8\">\r\n            <p>Carregando mensagens...</p>\r\n          </div>\r\n        ) : conversation.length === 0 ? (\r\n          <div className=\"text-center text-gray-500 mt-8\">\r\n            <p>Nenhuma mensagem ainda.</p>\r\n            <p className=\"text-sm\">Envie uma mensagem para começar!</p>\r\n          </div>\r\n        ) : (\r\n          conversation.map((msg) => {\r\n            const isOwn = msg.senderId === cliente.id\r\n            return (\r\n              <div key={msg.id} className={`flex ${isOwn ? \"justify-end\" : \"justify-start\"}`}>\r\n                <div\r\n                  className={`max-w-[70%] rounded-lg px-4 py-2 ${\r\n                    isOwn ? \"bg-green-600 text-white\" : \"bg-gray-100 text-gray-900\"\r\n                  }`}\r\n                >\r\n                  <p className=\"text-sm\">{msg.content}</p>\r\n                  <p className={`text-xs mt-1 ${isOwn ? \"text-green-100\" : \"text-gray-500\"}`}>\r\n                    {new Date(msg.timestamp).toLocaleTimeString(\"pt-BR\", {\r\n                      hour: \"2-digit\",\r\n                      minute: \"2-digit\",\r\n                    })}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )\r\n          })\r\n        )}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* Input */}\r\n      <form onSubmit={handleSendMessage} className=\"p-4 border-t border-gray-200\">\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            type=\"text\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            placeholder=\"Digite sua mensagem...\"\r\n            className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={!message.trim()}\r\n            className=\"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <Send className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1160, "column": 0}, "map": {"version":3,"sources":["file:///E:/bugtest/iot-test/front/app/components/GlobalChatManager.tsx"],"sourcesContent":["\"use client\"\r\nimport { ChatBox } from \"./ChatBox\"\r\nimport { useFriendsStore } from \"../context/FriendsContext\"\r\n\r\nexport function GlobalChatManager() {\r\n  const { activeChat, closeChat } = useFriendsStore()\r\n\r\n  if (!activeChat) return null\r\n\r\n  return <ChatBox friend={activeChat} onClose={closeChat} />\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIO,SAAS;IACd,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAA,mJAAe;IAEjD,IAAI,CAAC,YAAY,OAAO;IAExB,qBAAO,8OAAC,wIAAO;QAAC,QAAQ;QAAY,SAAS;;;;;;AAC/C","debugId":null}}]
}