(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73399,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(55436),r=e.i(39616),n=e.i(75254);let s=(0,n.default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var l=e.i(27516),i=e.i(73375),o=e.i(63059),c=e.i(71645),d=e.i(29517),u=e.i(53145),m=e.i(18566),p=e.i(46696),h=e.i(17595);function f({id:e,dispensaId:a}){let[r,n]=(0,c.useState)(!1),{register:s,handleSubmit:l}=(0,u.useForm)();async function i(t){console.log("Dados recebidos:",t);try{let r=await fetch(`http://localhost:3001/alimentos/dispensa/${a}/alimentos/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+h.default.get("token")},body:JSON.stringify({nome:t.nome,peso:Number(t.peso)})});if(r.ok)console.log("Item enviado com sucesso!"),n(!1),window.location.reload(),p.toast.success("Item enviado com sucesso!");else{let e=r.headers.get("content-type");if(e&&e.includes("application/json")){let e=await r.json();console.error("Erro ao enviar:",e)}else{let e=await r.text();console.error("Erro ao enviar (texto):",e)}}}catch(e){console.error("Erro de rede ou outra falha:",e)}}return(0,m.useRouter)(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"px-4 py-2 bg-[#2c2c2c] text-[#ffffff] rounded-md hover:bg-[#1e1e1e] font-medium",onClick:()=>n(!0),children:"Editar"}),(0,t.jsx)(d.default,{isOpen:r,onClose:()=>n(!1),children:(0,t.jsxs)("form",{onSubmit:l(i),children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground",children:"Nome do alimento"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded-md border border-input bg-background text-foreground shadow-sm",type:"text",required:!0,...s("nome")}),(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mt-4",children:"Qtd\\Kg"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded-md border border-input bg-background text-foreground shadow-sm",type:"number",required:!0,...s("peso",{valueAsNumber:!0})}),(0,t.jsx)("button",{type:"submit",className:"mt-4 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium",children:"Salvar"})]})})]})}var x=e.i(68834),g=e.i(79473);let b=(0,x.create)()((0,g.persist)(e=>({messages:[],isLoading:!1,isOpen:!1,dispensaId:null,addMessage:t=>e(e=>({messages:[...e.messages,t]})),clearMessages:()=>e({messages:[]}),setIsLoading:t=>e({isLoading:t}),setIsOpen:t=>e({isOpen:t}),setDispensaId:t=>e({dispensaId:t})}),{name:"pantry-assistant-store"}));var y=e.i(37727);let v=(0,n.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var j=e.i(27612);let N=(0,n.default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var w=e.i(67881),E=e.i(23750),A=e.i(70065);function O(){let{isOpen:e,setIsOpen:a,dispensaId:r}=b(),[n,s]=(0,c.useState)([{nome:"",peso:0,perecivel:"NÃO",unidadeTipo:"KG",validade:""}]),[l,i]=(0,c.useState)(!1),o=(0,m.useRouter)(),d=(e,t,a)=>{let r=[...n];r[e]={...r[e],[t]:a},s(r)},u=async e=>{if(e.preventDefault(),!r)return void p.toast.error("Selecione uma dispensa primeiro");if(n.filter(e=>!e.nome.trim()||e.peso<=0).length>0)return void p.toast.error("Preencha todos os campos obrigatórios");i(!0);try{for(let e of n){let t={nome:e.nome,peso:Number(e.peso),perecivel:e.perecivel,unidadeTipo:e.unidadeTipo,dispensaId:r,...e.validade&&{validade:new Date(e.validade).toISOString()}};if(!(await fetch(`http://localhost:3001/alimentos/dispensa/${r}/alimentos`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+h.default.get("token")},body:JSON.stringify(t)})).ok)throw Error(`Erro ao adicionar ${e.nome}`)}p.toast.success(`${n.length} ${1===n.length?"item adicionado":"itens adicionados"} com sucesso!`,{style:{background:"#00c950",color:"#ffffff"}}),s([{nome:"",peso:0,perecivel:"NÃO",unidadeTipo:"KG",validade:""}]),a(!1),setTimeout(()=>{o.refresh()},500)}catch(e){p.toast.error("Erro ao adicionar itens"),console.error(e)}finally{i(!1)}};return e?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(A.Card,{className:"w-full max-w-4xl max-h-[90vh] flex flex-col bg-white border border-slate-200 shadow-xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N,{className:"w-5 h-5 text-green-600"}),(0,t.jsx)("h3",{className:"font-semibold text-slate-900",children:"Adicionar Itens à Dispensa"})]}),(0,t.jsx)("button",{onClick:()=>a(!1),className:"text-slate-500 hover:text-slate-700",children:(0,t.jsx)(y.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("form",{onSubmit:u,className:"flex flex-col flex-1 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[n.map((e,a)=>(0,t.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50 relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h4",{className:"font-medium text-slate-900",children:["Produto ",a+1]}),n.length>1&&(0,t.jsx)("button",{type:"button",onClick:()=>{n.length>1&&s(n.filter((e,t)=>t!==a))},className:"text-red-500 hover:text-red-700 transition-colors",children:(0,t.jsx)(j.Trash2,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Nome do Item ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(E.Input,{value:e.nome,onChange:e=>d(a,"nome",e.target.value),placeholder:"Ex: Arroz, Feijão, Maçã",className:"bg-white border-slate-200",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Quantidade/Peso ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(E.Input,{type:"number",step:"0.01",min:"0.01",value:e.peso||"",onChange:e=>d(a,"peso",Number(e.target.value)),placeholder:"Ex: 2.5",className:"bg-white border-slate-200",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Unidade ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:e.unidadeTipo,onChange:e=>d(a,"unidadeTipo",e.target.value),className:"w-full rounded-md border border-slate-200 bg-white text-slate-900 shadow-sm px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,children:[(0,t.jsx)("option",{value:"KG",children:"Quilograma (KG)"}),(0,t.jsx)("option",{value:"PCT",children:"Pacote (PCT)"}),(0,t.jsx)("option",{value:"REDE",children:"Rede (REDE)"}),(0,t.jsx)("option",{value:"DUZIA",children:"Dúzia (DUZIA)"}),(0,t.jsx)("option",{value:"LT",children:"Litro (LT)"}),(0,t.jsx)("option",{value:"Unid",children:"Unidade (Unid)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Perecível ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:e.perecivel,onChange:e=>d(a,"perecivel",e.target.value),className:"w-full rounded-md border border-slate-200 bg-white text-slate-900 shadow-sm px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,children:[(0,t.jsx)("option",{value:"NÃO",children:"Não"}),(0,t.jsx)("option",{value:"SIM",children:"Sim"})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Data de Validade ",(0,t.jsx)("span",{className:"text-slate-500 text-xs",children:"(opcional)"})]}),(0,t.jsx)(E.Input,{type:"date",value:e.validade,onChange:e=>d(a,"validade",e.target.value),className:"bg-white border-slate-200"})]})]})]},a)),(0,t.jsxs)(w.Button,{type:"button",onClick:()=>{s([...n,{nome:"",peso:0,perecivel:"NÃO",unidadeTipo:"KG",validade:""}])},variant:"outline",className:"w-full border-dashed border-2 border-slate-300 hover:border-green-600 hover:bg-green-50 text-slate-700 hover:text-green-700 bg-transparent",children:[(0,t.jsx)(v,{className:"w-4 h-4 mr-2"}),"Adicionar outro produto"]})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-slate-200 bg-white flex justify-end gap-3",children:[(0,t.jsx)(w.Button,{type:"button",onClick:()=>a(!1),variant:"outline",className:"border-slate-200 text-slate-700",disabled:l,children:"Cancelar"}),(0,t.jsx)(w.Button,{type:"submit",disabled:l,className:"bg-green-600 hover:bg-green-700 text-white min-w-[120px]",children:l?"Adicionando...":`Adicionar ${n.length} ${1===n.length?"Item":"Itens"}`})]})]})]})}):null}let S=(0,n.default)("UserRoundPlus",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M22 19h-6",key:"vcuq98"}]]);function k({dispensaId:e,onUserAdded:r}){let[n,s]=(0,c.useState)(!1),[l,i]=(0,c.useState)([]),[o,u]=(0,c.useState)([]),[m,f]=(0,c.useState)([]),[x,g]=(0,c.useState)(null),[b,v]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{if(n)try{let t=await fetch("http://localhost:3001/clientes",{headers:{Authorization:"Bearer "+(h.default.get("token")||"")}});if(!t.ok)throw Error("Erro ao buscar usuário logado");let a=await t.json();g(a.id);let[r,n]=await Promise.all([fetch("http://localhost:3001/clientes"),fetch(`http://localhost:3001/dispensa/${e}`)]),s=await r.json(),l=await n.json(),o=l?.membros||[];i(s),u(o);let c=new Set([...o.map(e=>e.id),a.id]),d=s.filter(e=>!c.has(e.id));f(d)}catch(e){console.error("Erro ao buscar dados:",e),p.toast.error("Erro ao carregar usuários.")}})()},[n,e]);let j=async t=>{try{let a=await fetch("http://localhost:3001/dispensaInvites",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+(h.default.get("token")||"")},body:JSON.stringify({dispensaId:e,convidadoId:t.id})});if(!a.ok){let e=await a.json();p.toast.error(`Erro ao enviar convite: ${e?.erro||"Erro desconhecido"}`);return}p.toast.success(`Convite enviado para "${t.nome}"!`),s(!1)}catch(e){console.error("Erro na requisição de convite:",e),p.toast.error("Erro de rede ao enviar convite.")}},N=m.filter(e=>e.nome?.toLowerCase().includes(b.toLowerCase())||e.email?.toLowerCase().includes(b.toLowerCase()));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:"px-4 py-2 bg-[#2c2c2c] text-[#ffffff] rounded-md hover:bg-[#1e1e1e] font-medium flex items-center gap-2 transition-colors",onClick:()=>s(!0),children:[(0,t.jsx)("span",{children:"Convidar usuário"}),(0,t.jsx)(S,{size:16})]}),(0,t.jsx)(d.default,{isOpen:n,onClose:()=>s(!1),children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 py-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Convidar Usuário"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Envie um convite para participar da dispensa"})]}),(0,t.jsx)("button",{onClick:()=>s(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(y.X,{size:20,className:"text-gray-500"})})]}),(0,t.jsxs)("div",{className:"relative mb-6",children:[(0,t.jsx)(a.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar por nome ou email...",value:b,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-shadow"})]}),(0,t.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:0===N.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(S,{size:32,className:"text-gray-400"})}),(0,t.jsx)("p",{className:"text-gray-500 font-medium",children:"Nenhum usuário encontrado"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Tente buscar por outro nome ou email"})]}):N.map(e=>{let a;return(0,t.jsxs)("button",{onClick:()=>j(e),className:"w-full bg-white rounded-lg border border-gray-200 hover:border-green-500 hover:shadow-md transition-all duration-200 flex items-center p-4 gap-4 text-left group",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center shadow-sm group-hover:shadow-md group-hover:scale-105 transition-transform",children:(0,t.jsx)("span",{className:"text-xl font-bold text-white select-none",children:(a=e?.nome,a?.charAt(0).toUpperCase()||"U")})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900 truncate",children:e?.nome||"Nome do Usuário"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.email})]}),(0,t.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(S,{size:20,className:"text-green-600"})})]},e.id)})})]})})]})}var P=e.i(25949),C=e.i(70778),T=e.i(98596),D=e.i(22273),I=e.i(62327),R=e.i(27241),B=e.i(73310);function M(e){var t=(0,R.useAppDispatch)();return(0,c.useEffect)(()=>{t((0,B.updatePolarOptions)(e))},[t,e]),null}var L=e.i(48973),z=e.i(51883),K=["layout"];function V(){return(V=Object.assign.bind()).apply(null,arguments)}var U={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},$=(0,c.forwardRef)(function(e,t){var a,r=(0,z.resolveDefaultProps)(e.categoricalChartProps,U),{layout:n}=r,s=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(r,K),{chartName:l,defaultTooltipEventType:i,validateTooltipEventTypes:o,tooltipPayloadSearcher:d}=e;return c.createElement(C.RechartsStoreProvider,{preloadedState:{options:{chartName:l,defaultTooltipEventType:i,validateTooltipEventTypes:o,tooltipPayloadSearcher:d,eventEmitter:void 0}},reduxStoreName:null!=(a=r.id)?a:l},c.createElement(T.ChartDataContextProvider,{chartData:r.data}),c.createElement(D.ReportMainChartProps,{layout:n,margin:r.margin}),c.createElement(I.ReportChartProps,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),c.createElement(M,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),c.createElement(L.CategoricalChart,V({},s,{ref:t})))}),q=["item"],F={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},G=(0,c.forwardRef)((e,t)=>{var a=(0,z.resolveDefaultProps)(e,F);return c.createElement($,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:q,tooltipPayloadSearcher:P.arrayTooltipSearcher,categoricalChartProps:a,ref:t})}),H=e.i(92068),W=e.i(7670),_=e.i(61849),Z=e.i(92860),J=e.i(41088),Q=e.i(79812),X=e.i(61764),Y=e.i(46710),ee=e.i(73962),et=e.i(91561),ea=e.i(77320),er=e=>e.graphicalItems.polarItems,en=(0,_.createSelector)([ee.pickAxisType,et.pickAxisId],X.itemAxisPredicate),es=(0,_.createSelector)([er,X.selectBaseAxis,en],X.combineGraphicalItemsSettings),el=(0,_.createSelector)([es],X.combineGraphicalItemsData),ei=(0,_.createSelector)([el,Z.selectChartDataAndAlwaysIgnoreIndexes],X.combineDisplayedData),eo=(0,_.createSelector)([ei,X.selectBaseAxis,es],X.combineAppliedValues);(0,_.createSelector)([ei,X.selectBaseAxis,es],(e,t,a)=>a.length>0?e.flatMap(e=>a.flatMap(a=>{var r;return{value:(0,Q.getValueByDataKey)(e,null!=(r=t.dataKey)?r:a.dataKey),errorDomain:[]}})).filter(Boolean):(null==t?void 0:t.dataKey)!=null?e.map(e=>({value:(0,Q.getValueByDataKey)(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]})));var ec=()=>void 0,ed=(0,_.createSelector)([ei,X.selectBaseAxis,es,X.selectAllErrorBarSettings,ee.pickAxisType],X.combineDomainOfAllAppliedNumericalValuesIncludingErrorValues),eu=(0,_.createSelector)([X.selectBaseAxis,X.selectDomainDefinition,X.selectDomainFromUserPreference,ec,ed,ec,Y.selectChartLayout,ee.pickAxisType],X.combineNumericalDomain),em=(0,_.createSelector)([X.selectBaseAxis,Y.selectChartLayout,ei,eo,ea.selectStackOffsetType,ee.pickAxisType,eu],X.combineAxisDomain),ep=(0,_.createSelector)([em,X.selectBaseAxis,X.selectRealScaleType],X.combineNiceTicks);function eh(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function ef(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eh(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}(0,_.createSelector)([X.selectBaseAxis,em,ep,ee.pickAxisType],X.combineAxisDomainWithNiceTicks);var ex=(0,_.createSelector)([er,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),eg=[],eb=(e,t,a)=>(null==a?void 0:a.length)===0?eg:a,ey=(0,_.createSelector)([Z.selectChartDataAndAlwaysIgnoreIndexes,ex,eb],(e,t,a)=>{var r,{chartData:n}=e;if(null!=t&&((r=(null==t?void 0:t.data)!=null&&t.data.length>0?t.data:n)&&r.length||null==a||(r=a.map(e=>ef(ef({},t.presentationProps),e.props))),null!=r))return r}),ev=(0,_.createSelector)([ey,ex,eb],(e,t,a)=>{if(null!=e&&null!=t)return e.map((e,r)=>{var n,s,l=(0,Q.getValueByDataKey)(e,t.nameKey,t.name);return s=null!=a&&null!=(n=a[r])&&null!=(n=n.props)&&n.fill?a[r].props.fill:"object"==typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:(0,Q.getTooltipNameProp)(l,t.dataKey),color:s,payload:e,type:t.legendType}})}),ej=(0,_.createSelector)([ey,ex,eb,J.selectChartOffsetInternal],(e,t,a,r)=>{if(null!=t&&null!=e)return function(e){var t,a,r,{pieSettings:n,displayedData:s,cells:l,offset:i}=e,{cornerRadius:o,startAngle:c,endAngle:d,dataKey:u,nameKey:m,tooltipType:p}=n,h=Math.abs(n.minAngle),f=(0,eP.mathSign)(d-c)*Math.min(Math.abs(d-c),360),x=Math.abs(f),g=s.length<=1?0:null!=(t=n.paddingAngle)?t:0,b=s.filter(e=>0!==(0,Q.getValueByDataKey)(e,u,0)).length,y=x-b*h-(x>=360?b:b-1)*g,v=s.reduce((e,t)=>{var a=(0,Q.getValueByDataKey)(t,u,0);return e+((0,eP.isNumber)(a)?a:0)},0);return v>0&&(a=s.map((e,t)=>{var a,s=(0,Q.getValueByDataKey)(e,u,0),d=(0,Q.getValueByDataKey)(e,m,t),x=((e,t,a)=>{var r,{top:n,left:s,width:l,height:i}=t,o=(0,ek.getMaxRadius)(l,i),c=s+(0,eP.getPercentValue)(e.cx,l,l/2),d=n+(0,eP.getPercentValue)(e.cy,i,i/2),u=(0,eP.getPercentValue)(e.innerRadius,o,0);return{cx:c,cy:d,innerRadius:u,outerRadius:(r=e.outerRadius,"function"==typeof r?(0,eP.getPercentValue)(r(a),o,.8*o):(0,eP.getPercentValue)(r,o,.8*o)),maxRadius:e.maxRadius||Math.sqrt(l*l+i*i)/2}})(n,i,e),b=((0,eP.isNumber)(s)?s:0)/v,j=eJ(eJ({},e),l&&l[t]&&l[t].props),N=(a=t?r.endAngle+(0,eP.mathSign)(f)*g*(0!==s):c)+(0,eP.mathSign)(f)*((0!==s?h:0)+b*y),w=(a+N)/2,E=(x.innerRadius+x.outerRadius)/2,A=[{name:d,value:s,payload:j,dataKey:u,type:p}],O=(0,ek.polarToCartesian)(x.cx,x.cy,E,w);return r=eJ(eJ(eJ(eJ({},n.presentationProps),{},{percent:b,cornerRadius:"string"==typeof o?parseFloat(o):o,name:d,tooltipPayload:A,midAngle:w,middleRadius:E,tooltipPosition:O},j),x),{},{value:s,startAngle:a,endAngle:N,payload:j,paddingAngle:(0,eP.mathSign)(f)*g})})),a}({offset:r,pieSettings:t,displayedData:e,cells:a})}),eN=e.i(97865),ew=e.i(72733),eE=e.i(9516),eA=e.i(22787),eO=e.i(81977),eS=e.i(62728),ek=e.i(68970),eP=e.i(94395),eC=e.i(73393),eT=e.i(18519),eD=e.i(94585),eI=e.i(844),eR=e.i(76735),eB=e.i(95146),eM=e.i(94810),eL=e.i(40657),ez=e.i(15549),eK=e.i(91187),eV=e.i(57999),eU=e.i(66576),e$=e.i(69212),eq=e.i(29601),eF=e.i(18457),eG=["key"],eH=["onMouseEnter","onClick","onMouseLeave"],eW=["id"],e_=["id"];function eZ(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function eJ(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eZ(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eZ(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function eQ(){return(eQ=Object.assign.bind()).apply(null,arguments)}function eX(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function eY(e){var t=(0,c.useMemo)(()=>(0,eO.findAllByType)(e.children,eA.Cell),[e.children]),a=(0,R.useAppSelector)(a=>ev(a,e.id,t));return null==a?null:c.createElement(eB.SetPolarLegendPayload,{legendPayload:a})}var e0=c.memo(e=>{var{dataKey:t,nameKey:a,sectors:r,stroke:n,strokeWidth:s,fill:l,name:i,hide:o,tooltipType:d}=e,u={dataDefinedOnItem:r.map(e=>e.tooltipPayload),positions:r.map(e=>e.tooltipPosition),settings:{stroke:n,strokeWidth:s,fill:l,dataKey:t,nameKey:a,name:(0,Q.getTooltipNameProp)(i,t),hide:o,type:d,color:l,unit:""}};return c.createElement(eI.SetTooltipEntrySettings,{tooltipEntrySettings:u})});function e1(e){var{sectors:t,props:a,showLabels:r}=e,{label:n,labelLine:s,dataKey:l}=a;if(!r||!n||!t)return null;var i=(0,eV.svgPropertiesNoEvents)(a),o=(0,eV.svgPropertiesNoEventsFromUnknown)(n),d=(0,eV.svgPropertiesNoEventsFromUnknown)(s),u="object"==typeof n&&"offsetRadius"in n&&"number"==typeof n.offsetRadius&&n.offsetRadius||20,m=t.map((e,t)=>{var a,r,m=(e.startAngle+e.endAngle)/2,p=(0,ek.polarToCartesian)(e.cx,e.cy,e.outerRadius+u,m),h=eJ(eJ(eJ(eJ({},i),e),{},{stroke:"none"},o),{},{index:t,textAnchor:(a=p.x)>(r=e.cx)?"start":a<r?"end":"middle"},p),f=eJ(eJ(eJ(eJ({},i),e),{},{fill:"none",stroke:e.fill},d),{},{index:t,points:[(0,ek.polarToCartesian)(e.cx,e.cy,e.outerRadius,m),p],key:"line"});return c.createElement(eq.ZIndexLayer,{zIndex:eF.DefaultZIndexes.label,key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},c.createElement(eN.Layer,null,s&&((e,t)=>{if(c.isValidElement(e))return c.cloneElement(e,t);if("function"==typeof e)return e(t);var a=(0,W.clsx)("recharts-pie-label-line","boolean"!=typeof e?e.className:""),{key:r}=t,n=eX(t,eG);return c.createElement(ew.Curve,eQ({},n,{type:"linear",className:a}))})(s,f),((e,t,a)=>{if(c.isValidElement(e))return c.cloneElement(e,t);var r=a;if("function"==typeof e&&(r=e(t),c.isValidElement(r)))return r;var n=(0,W.clsx)("recharts-pie-label-text",e&&"object"==typeof e&&"className"in e&&"string"==typeof e.className?e.className:"");return c.createElement(eE.Text,eQ({},t,{alignmentBaseline:"middle",className:n}),r)})(n,h,(0,Q.getValueByDataKey)(e,l))))});return c.createElement(eN.Layer,{className:"recharts-pie-labels"},m)}function e2(e){var{sectors:t,props:a,showLabels:r}=e,{label:n}=a;return"object"==typeof n&&null!=n&&"position"in n?c.createElement(e$.LabelListFromLabelProp,{label:n}):c.createElement(e1,{sectors:t,props:a,showLabels:r})}function e4(e){var{sectors:t,activeShape:a,inactiveShape:r,allOtherPieProps:n,shape:s}=e,l=(0,R.useAppSelector)(eR.selectActiveTooltipIndex),{onMouseEnter:i,onClick:o,onMouseLeave:d}=n,u=eX(n,eH),m=(0,eD.useMouseEnterItemDispatch)(i,n.dataKey),p=(0,eD.useMouseLeaveItemDispatch)(d),h=(0,eD.useMouseClickItemDispatch)(o,n.dataKey);return null==t||0===t.length?null:c.createElement(c.Fragment,null,t.map((e,i)=>{if((null==e?void 0:e.startAngle)===0&&(null==e?void 0:e.endAngle)===0&&1!==t.length)return null;var o=String(i)===l,d=a&&o?a:l?r:null,f=eJ(eJ({},e),{},{stroke:e.stroke,tabIndex:-1,[eM.DATA_ITEM_INDEX_ATTRIBUTE_NAME]:i,[eM.DATA_ITEM_DATAKEY_ATTRIBUTE_NAME]:n.dataKey});return c.createElement(eN.Layer,eQ({key:"sector-".concat(null==e?void 0:e.startAngle,"-").concat(null==e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(i),tabIndex:-1,className:"recharts-pie-sector"},(0,eC.adaptEventsOfChild)(u,e,i),{onMouseEnter:m(e,i),onMouseLeave:p(e,i),onClick:h(e,i)}),c.createElement(eT.Shape,eQ({option:null!=s?s:d,shapeType:"sector",isActive:o},f)))}))}function e3(e){var{showLabels:t,sectors:a,children:r}=e,n=(0,c.useMemo)(()=>t&&a?a.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[a,t]);return c.createElement(e$.PolarLabelListContextProvider,{value:t?n:void 0},r)}function e9(e){var{props:t,previousSectorsRef:a}=e,{sectors:r,isAnimationActive:n,animationBegin:s,animationDuration:l,animationEasing:i,activeShape:o,inactiveShape:d,onAnimationStart:u,onAnimationEnd:m}=t,p=(0,eL.useAnimationId)(t,"recharts-pie-"),h=a.current,[f,x]=(0,c.useState)(!1),g=(0,c.useCallback)(()=>{"function"==typeof m&&m(),x(!1)},[m]),b=(0,c.useCallback)(()=>{"function"==typeof u&&u(),x(!0)},[u]);return c.createElement(e3,{showLabels:!f,sectors:r},c.createElement(eU.JavascriptAnimate,{animationId:p,begin:s,duration:l,isActive:n,easing:i,onAnimationStart:b,onAnimationEnd:g,key:p},e=>{var n=[],s=r&&r[0],l=null==s?void 0:s.startAngle;return null==r||r.forEach((t,a)=>{var r=h&&h[a],s=a>0?(0,H.default)(t,"paddingAngle",0):0;if(r){var i=(0,eP.interpolate)(r.endAngle-r.startAngle,t.endAngle-t.startAngle,e),o=eJ(eJ({},t),{},{startAngle:l+s,endAngle:l+i+s});n.push(o),l=o.endAngle}else{var{endAngle:c,startAngle:d}=t,u=(0,eP.interpolate)(0,c-d,e),m=eJ(eJ({},t),{},{startAngle:l+s,endAngle:l+u+s});n.push(m),l=m.endAngle}}),a.current=n,c.createElement(eN.Layer,null,c.createElement(e4,{sectors:n,activeShape:o,inactiveShape:d,allOtherPieProps:t,shape:t.shape}))}),c.createElement(e2,{showLabels:!f,sectors:r,props:t}),t.children)}var e5={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!eS.Global.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:eF.DefaultZIndexes.area};function e6(e){var{id:t}=e,a=eX(e,eW),{hide:r,className:n,rootTabIndex:s}=e,l=(0,c.useMemo)(()=>(0,eO.findAllByType)(e.children,eA.Cell),[e.children]),i=(0,R.useAppSelector)(e=>ej(e,t,l)),o=(0,c.useRef)(null),d=(0,W.clsx)("recharts-pie",n);return r||null==i?(o.current=null,c.createElement(eN.Layer,{tabIndex:s,className:d})):c.createElement(eq.ZIndexLayer,{zIndex:e.zIndex},c.createElement(e0,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:i,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),c.createElement(eN.Layer,{tabIndex:s,className:d},c.createElement(e9,{props:eJ(eJ({},a),{},{sectors:i}),previousSectorsRef:o})))}function e7(e){var t=(0,z.resolveDefaultProps)(e,e5),{id:a}=t,r=eX(t,e_),n=(0,eV.svgPropertiesNoEvents)(r);return c.createElement(ez.RegisterGraphicalItemId,{id:a,type:"pie"},e=>c.createElement(c.Fragment,null,c.createElement(eK.SetPolarGraphicalItem,{type:"pie",id:e,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:n,maxRadius:t.maxRadius}),c.createElement(eY,eQ({},r,{id:e})),c.createElement(e6,eQ({},r,{id:e}))))}e7.displayName="Pie";var e8=e.i(34239),te=e.i(74080),tt=e.i(88860),ta=e.i(48337),tr=e.i(13659);function tn(){return(tn=Object.assign.bind()).apply(null,arguments)}function ts(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var tl={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function ti(e){var t,{data:a,iconType:r,inactiveColor:n}=e,s=32/6,l=32/3,i=a.inactive?n:a.color,o=null!=r?r:a.type;if("none"===o)return null;if("plainline"===o)return c.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:null==(t=a.payload)?void 0:t.strokeDasharray,x1:0,y1:16,x2:32,y2:16,className:"recharts-legend-icon"});if("line"===o)return c.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,".concat(16,"h").concat(l,"\n            A").concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(16,"\n            H").concat(32,"M").concat(2*l,",").concat(16,"\n            A").concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(16),className:"recharts-legend-icon"});if("rect"===o)return c.createElement("path",{stroke:"none",fill:i,d:"M0,".concat(4,"h").concat(32,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(c.isValidElement(a.legendIcon)){var d=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ts(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a);return delete d.legendIcon,c.cloneElement(a.legendIcon,d)}return c.createElement(tr.Symbols,{fill:i,cx:16,cy:16,size:32,sizeType:"diameter",type:o})}function to(e){var{payload:t,iconSize:a,layout:r,formatter:n,inactiveColor:s,iconType:l}=e,i={x:0,y:0,width:32,height:32},o={display:"horizontal"===r?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((t,r)=>{var u=t.formatter||n,m=(0,W.clsx)({"recharts-legend-item":!0,["legend-item-".concat(r)]:!0,inactive:t.inactive});if("none"===t.type)return null;var p=t.inactive?s:t.color,h=u?u(t.value,t,r):t.value;return c.createElement("li",tn({className:m,style:o,key:"legend-item-".concat(r)},(0,eC.adaptEventsOfChild)(e,t,r)),c.createElement(ta.Surface,{width:a,height:a,viewBox:i,style:d,"aria-label":"".concat(h," legend icon")},c.createElement(ti,{data:t,iconType:l,inactiveColor:s})),c.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},h))})}var tc=e=>{var t=(0,z.resolveDefaultProps)(e,tl),{payload:a,layout:r,align:n}=t;return a&&a.length?c.createElement("ul",{className:"recharts-default-legend",style:{padding:0,margin:0,textAlign:"horizontal"===r?n:"left"}},c.createElement(to,tn({},t,{payload:a}))):null},td=e.i(51587),tu=e.i(21307),tm=e.i(35709),tp=e.i(93882),th=["contextPayload"];function tf(){return(tf=Object.assign.bind()).apply(null,arguments)}function tx(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function tg(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tx(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tx(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function tb(e){return e.value}function ty(e){var{contextPayload:t}=e,a=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,th),r=(0,td.getUniqPayload)(t,e.payloadUniqBy,tb),n=tg(tg({},a),{},{payload:r});return c.isValidElement(e.content)?c.cloneElement(e.content,n):"function"==typeof e.content?c.createElement(e.content,n):c.createElement(tc,n)}function tv(e){var t=(0,R.useAppDispatch)();return(0,c.useEffect)(()=>{t((0,tp.setLegendSettings)(e))},[t,e]),null}function tj(e){var t=(0,R.useAppDispatch)();return(0,c.useEffect)(()=>(t((0,tp.setLegendSize)(e)),()=>{t((0,tp.setLegendSize)({width:0,height:0}))}),[t,e]),null}var tN={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function tw(e){var t,a=(0,z.resolveDefaultProps)(e,tN),r=(0,R.useAppSelector)(tu.selectLegendPayload),n=(0,tt.useLegendPortal)(),s=(0,Y.useMargin)(),{width:l,height:i,wrapperStyle:o,portal:d}=a,[u,m]=(0,tm.useElementOffset)([r]),p=(0,Y.useChartWidth)(),h=(0,Y.useChartHeight)();if(null==p||null==h)return null;var f=p-((null==s?void 0:s.left)||0)-((null==s?void 0:s.right)||0),x=(t=a.layout,"vertical"===t&&(0,eP.isNumber)(i)?{height:i}:"horizontal"===t?{width:l||f}:null),g=d?o:tg(tg({position:"absolute",width:(null==x?void 0:x.width)||l||"auto",height:(null==x?void 0:x.height)||i||"auto"},function(e,t,a,r,n,s){var l,i,{layout:o,align:c,verticalAlign:d}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(l="center"===c&&"vertical"===o?{left:((r||0)-s.width)/2}:"right"===c?{right:a&&a.right||0}:{left:a&&a.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(i="middle"===d?{top:((n||0)-s.height)/2}:"bottom"===d?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),tg(tg({},l),i)}(o,a,s,p,h,u)),o),b=null!=d?d:n;if(null==b||null==r)return null;var y=c.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:m},c.createElement(tv,{layout:a.layout,align:a.align,verticalAlign:a.verticalAlign,itemSorter:a.itemSorter}),!d&&c.createElement(tj,{width:u.width,height:u.height}),c.createElement(ty,tf({},a,x,{margin:s,chartWidth:p,chartHeight:h,contextPayload:r})));return(0,te.createPortal)(y,b)}tw.displayName="Legend";var tE=e.i(31195),tA=e.i(63270),tO=e.i(22016),tS=e.i(40818);function tk(){let[e,n]=(0,c.useState)([]),[d,u]=(0,c.useState)(null),[x,g]=(0,c.useState)(null),[y,v]=(0,c.useState)(!1),[j,N]=(0,c.useState)(!1),[S,P]=(0,c.useState)([]),C=(0,m.useParams)(),T=C?.id,D=(0,m.useRouter)(),[I,R]=(0,c.useState)(!1),[B,M]=(0,c.useState)(!1),[L,z]=(0,c.useState)([]),[K,V]=(0,c.useState)(""),[U,$]=(0,c.useState)(!1),{addSelectedItem:q,removeSelectedItem:F,selectedItems:H}=(0,tS.useChatbotStore)(),{setIsOpen:W,setDispensaId:_}=b(),[Z,J]=(0,c.useState)(1),[Q,X]=(0,c.useState)(1),Y=(0,c.useCallback)(async()=>{if(T)try{let e=await fetch(`http://localhost:3001/alimentos/dispensa/${T}/alimentos`),t=await e.json();n(t)}catch(e){console.error("Falha ao buscar alimentos:",e)}},[T]);function ee(){u(null)}async function et(e){try{await fetch(`http://localhost:3001/alimentos/${e}`,{method:"DELETE"}),n(t=>t.filter(t=>t.id!==e)),ee(),p.toast.success("Item deletado com sucesso!",{style:{background:"#00c950",color:"#ffffff"}})}catch(e){console.error("Erro ao deletar alimento:",e),p.toast.error("Erro ao deletar item. Tente novamente.")}}async function ea(e){try{await fetch(`http://localhost:3001/dispensa/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+h.default.get("token")}}),g(null),v(!1),p.toast.success("Dispensa deletada com sucesso!",{style:{background:"#00c950",color:"#ffffff"}}),D.push("/perfil")}catch(e){console.error("Erro ao deletar dispensa:",e),p.toast.error("Erro ao deletar dispensa. Tente novamente.")}}(0,c.useEffect)(()=>{h.default.get("token")?R(!0):D.replace("/")},[]),(0,c.useEffect)(()=>{async function e(){try{let e=await fetch(`http://localhost:3001/dispensa/${T}`),t=await e.json();g(t),P(t.membros||[])}catch(e){console.error("Falha ao buscar dados da dispensa:",e)}}T&&(Y(),e(),_(Number(T)))},[T,Y,_]),(0,c.useEffect)(()=>{let e=()=>{Y()};return window.addEventListener("pantryUpdated",e),()=>window.removeEventListener("pantryUpdated",e)},[Y]);let er=["#8884d8","#82ca9d","#ffc658","#ff7f50","#a28fd0","#ffb6b9","#c6e2ff"],en=e.filter(e=>e.nome.toLowerCase().includes(K.toLowerCase())),es=Math.ceil(en.length/10),el=(Z-1)*10,ei=en.slice(el,el+10),eo=Math.ceil(e.length/10),ec=(Q-1)*10,ed=e.slice(ec,ec+10);return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#f8fafc] to-[#e2e8f0] py-4 sm:py-8 px-2 sm:px-4",children:[(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-2 sm:px-6 py-4 sm:py-8",children:[(0,t.jsxs)("div",{className:"mb-4 sm:mb-8",children:[(0,t.jsxs)("h1",{className:"text-[#1d293d] text-xl sm:text-2xl font-semibold mb-4 sm:mb-6",children:["Controle da dispensa ",x?.nome]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,t.jsx)(a.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#90a1b9] w-4 h-4"}),(0,t.jsx)(E.Input,{placeholder:"Buscar item...",className:"pl-10 bg-white border-[#e2e8f0] text-[#444444] h-11 sm:h-10 text-base",value:K,onChange:e=>V(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(w.Button,{onClick:()=>$(!0),className:"bg-[#2c2c2c] hover:bg-[#1e1e1e] text-white flex-1 sm:flex-none h-11 sm:h-10 text-sm sm:text-base",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Adicione um item"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Adicionar"})]}),(0,t.jsxs)(w.Button,{variant:"outline",className:"border-[#e2e8f0] text-[#444444] bg-transparent h-11 sm:h-10",onClick:()=>v(!0),children:[(0,t.jsx)(r.Settings,{className:"w-4 h-4 sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Config"})]}),(0,t.jsxs)(w.Button,{className:"bg-[#00c950] hover:bg-[#00a63e] text-white h-11 sm:h-10",onClick:()=>N(!0),children:[(0,t.jsx)(s,{className:"w-4 h-4 sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Gráfico"})]}),(0,t.jsx)(tO.default,{href:`/relatorios/${T}`,className:"flex-1 sm:flex-none",children:(0,t.jsxs)(w.Button,{className:"bg-[#00c950] hover:bg-[#00a63e] text-white w-full h-11 sm:h-10",children:[(0,t.jsx)(l.History,{className:"w-4 h-4 sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Histórico"})]})})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 mb-4 sm:mb-8",children:[(0,t.jsxs)(A.Card,{className:"bg-white border-[#e2e8f0]",children:[(0,t.jsx)(A.CardHeader,{className:"pb-3",children:(0,t.jsx)(A.CardTitle,{className:"text-[#1d293d] text-base sm:text-lg",children:"Funcionários"})}),(0,t.jsxs)(A.CardContent,{className:"space-y-3",children:[S.length>0?S.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(tA.Avatar,{className:"w-8 h-8",children:(0,t.jsx)(tA.AvatarFallback,{className:"bg-[#c6d2ff] text-[#432dd7] text-xs",children:e.nome.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase()})}),(0,t.jsx)("span",{className:"text-[#444444] text-sm",children:e.nome})]},a)):(0,t.jsx)("p",{className:"text-sm text-[#90a1b9] text-center py-4",children:"Nenhum funcionário cadastrado."}),(0,t.jsx)(k,{dispensaId:Number(T),onUserAdded:e=>{P(t=>t.some(t=>t.id===e.id)?t:[...t,e])}})]})]}),(0,t.jsxs)(A.Card,{className:"lg:col-span-2 bg-white border-[#e2e8f0]",children:[(0,t.jsxs)(A.CardHeader,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 pb-3",children:[(0,t.jsx)(A.CardTitle,{className:"text-[#1d293d] text-base sm:text-lg",children:"Seu estoque"}),(0,t.jsx)(w.Button,{className:"bg-[#00c950] hover:bg-[#00a63e] text-white w-full sm:w-auto text-sm h-10",onClick:()=>M(e=>!e),children:B?"Fechar":"Registrar uso"})]}),(0,t.jsxs)(A.CardContent,{children:[(0,t.jsx)("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:(0,t.jsx)("div",{className:"min-w-full inline-block align-middle",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-[#e2e8f0]",children:[(0,t.jsx)("th",{className:"text-left py-3 px-2 sm:px-0 text-[#62748e] text-xs sm:text-sm font-medium",children:"ID"}),(0,t.jsx)("th",{className:"text-left py-3 px-2 sm:px-0 text-[#62748e] text-xs sm:text-sm font-medium",children:"Nome"}),(0,t.jsx)("th",{className:"text-right py-3 px-2 sm:px-0 text-[#62748e] text-xs sm:text-sm font-medium",children:"Qtd"}),(0,t.jsx)("th",{className:"text-center py-3 px-2 sm:px-0 text-[#62748e] text-xs sm:text-sm font-medium",children:"Chat"})]})}),(0,t.jsx)("tbody",{children:ei.length>0?ei.map(e=>(0,t.jsxs)("tr",{className:"border-b border-[#f1f5f9] hover:bg-[#f8fafc] cursor-pointer",onClick:()=>u(e),children:[(0,t.jsx)("td",{className:"py-3 px-2 sm:px-0 text-[#444444] text-xs sm:text-sm",children:e.id}),(0,t.jsx)("td",{className:"py-3 px-2 sm:px-0 text-[#444444] text-xs sm:text-sm truncate max-w-[120px] sm:max-w-none",children:e.nome}),(0,t.jsxs)("td",{className:"py-3 px-2 sm:px-0 text-right text-[#444444] text-xs sm:text-sm font-medium whitespace-nowrap",children:[e.peso," ",e.unidadeTipo]}),(0,t.jsx)("td",{className:"py-3 px-2 sm:px-0 text-center",children:(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),H.some(t=>t.id===e.id)?(F(e.id),p.toast.success("Item removido do chat",{style:{background:"#00c950",color:"#ffffff"}})):(q({id:e.id,nome:e.nome,peso:e.peso,unidadeTipo:e.unidadeTipo}),p.toast.success("Item adicionado ao chat",{style:{background:"#00c950",color:"#ffffff"}}))},className:`px-2 sm:px-3 py-1 rounded text-xs font-semibold transition-colors ${H.some(t=>t.id===e.id)?"bg-green-600 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:H.some(t=>t.id===e.id)?"✓":"+"})})]},e.id)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"text-center py-8 text-[#90a1b9] text-sm",children:K?"Nenhum item encontrado.":"Nenhum item no estoque."})})})]})})}),es>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-[#e2e8f0]",children:[(0,t.jsx)(w.Button,{variant:"outline",size:"sm",onClick:()=>J(e=>Math.max(1,e-1)),disabled:1===Z,className:"h-9",children:(0,t.jsx)(i.ChevronLeft,{className:"w-4 h-4"})}),(0,t.jsxs)("span",{className:"text-sm text-[#444444]",children:["Página ",Z," de ",es]}),(0,t.jsx)(w.Button,{variant:"outline",size:"sm",onClick:()=>J(e=>Math.min(es,e+1)),disabled:Z===es,className:"h-9",children:(0,t.jsx)(o.ChevronRight,{className:"w-4 h-4"})})]})]})]})]}),B&&(0,t.jsxs)(A.Card,{className:"bg-white border-[#e2e8f0]",children:[(0,t.jsx)(A.CardHeader,{children:(0,t.jsx)(A.CardTitle,{className:"text-[#1d293d] text-base sm:text-lg",children:"Registrar uso de alimentos"})}),(0,t.jsx)(A.CardContent,{className:"space-y-4",children:(0,t.jsxs)("form",{onSubmit:async t=>{t.preventDefault();let a=new FormData(t.currentTarget),r=e.map(e=>{let t=a.get(`alimento-${e.id}`),r=Number(t);return t&&!isNaN(r)&&r>0?{id:e.id,quantidade:r}:null}).filter(Boolean);if(0===r.length)return alert("Nenhuma quantidade válida informada.");try{let e=await fetch("http://localhost:3001/alimentos/relatorio",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+h.default.get("token")},body:JSON.stringify({alimentos:r,dispensaId:Number(T)})});if(e.ok)p.toast.success("Uso registrado com sucesso!",{style:{background:"#00c950",color:"#ffffff"}}),location.reload();else{let t=await e.json();console.error(t),p.toast.error("Erro ao registrar uso: "+(t?.error||"Erro desconhecido"))}}catch(e){console.error(e),p.toast.error("Erro inesperado.")}},children:[ed.map((e,a)=>(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4 p-3 bg-[#f8fafc] rounded-lg",children:[(0,t.jsx)("div",{className:"w-full sm:w-32 text-[#444444] text-sm font-medium",children:e.nome}),(0,t.jsx)("div",{className:"flex-1 w-full",children:(0,t.jsx)(E.Input,{type:"number",step:"0.01",name:`alimento-${e.id}`,placeholder:`Qtd em ${e.unidadeTipo.toLowerCase()}`,className:"bg-white border-[#e2e8f0] text-[#444444] h-11 text-base",inputMode:"decimal"})}),(0,t.jsxs)("div",{className:"text-[#90a1b9] text-xs sm:text-sm w-full sm:w-32 text-left sm:text-right",children:["Disponível: ",e.peso]})]},a)),eo>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-[#e2e8f0]",children:[(0,t.jsx)(w.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>X(e=>Math.max(1,e-1)),disabled:1===Q,className:"h-9",children:(0,t.jsx)(i.ChevronLeft,{className:"w-4 h-4"})}),(0,t.jsxs)("span",{className:"text-sm text-[#444444]",children:["Página ",Q," de ",eo]}),(0,t.jsx)(w.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>X(e=>Math.min(eo,e+1)),disabled:Q===eo,className:"h-9",children:(0,t.jsx)(o.ChevronRight,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)(w.Button,{type:"submit",className:"bg-[#00c950] hover:bg-[#00a63e] text-white w-full sm:w-auto h-11",children:"Enviar Registro"})})]})})]}),d&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-xl border border-[#e2e8f0]",children:[(0,t.jsx)("button",{onClick:ee,className:"float-right font-bold text-[#90a1b9] hover:text-[#1d293d]",children:"✕"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-[#1d293d] mb-4",children:d.nome}),(0,t.jsxs)("p",{className:"mb-2 text-[#444444]",children:[(0,t.jsx)("strong",{children:"ID:"})," ",d.id]}),(0,t.jsxs)("p",{className:"mb-2 text-[#444444]",children:[(0,t.jsx)("strong",{children:"Peso:"})," ",d.peso," ",d.unidadeTipo]}),(0,t.jsxs)("p",{className:"mb-2 text-[#444444]",children:[(0,t.jsx)("strong",{children:"Tipo de Unidade:"})," ",d.unidadeTipo]}),d.perecivel&&(0,t.jsxs)("p",{className:"mb-4 text-[#444444]",children:[(0,t.jsx)("strong",{children:"Perecível:"})," ",d.perecivel]}),(0,t.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,t.jsx)(f,{id:Number(d?.id),dispensaId:Number(T)}),(0,t.jsx)("button",{onClick:()=>{d&&et(d.id)},className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors",children:"Deletar"})]})]})}),y&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl max-w-md w-full shadow-xl border border-[#e2e8f0]",children:[(0,t.jsx)("button",{onClick:()=>v(!1),className:"float-right font-bold text-[#90a1b9] hover:text-[#1d293d]",children:"✕"}),(0,t.jsx)("h2",{className:"text-xl font-bold text-[#1d293d] mb-4",children:"Configurações da Dispensa"}),x?(0,t.jsxs)("p",{className:"text-[#444444] mb-4",children:[(0,t.jsx)("strong",{children:"Nome:"})," ",x.nome]}):(0,t.jsx)("p",{className:"text-sm text-[#90a1b9] mb-4",children:"Carregando nome da dispensa..."}),(0,t.jsx)("button",{onClick:()=>{T&&ea(Number(T))},className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors",children:"Deletar Dispensa"})]})}),j&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl max-w-lg w-full shadow-xl border border-[#e2e8f0]",children:[(0,t.jsx)("button",{onClick:()=>N(!1),className:"float-right font-bold text-[#90a1b9] hover:text-[#1d293d]",children:"✕"}),(0,t.jsx)("h2",{className:"text-xl font-bold text-[#1d293d] mb-4",children:"Distribuição do Estoque"}),(0,t.jsx)(tE.ResponsiveContainer,{width:"100%",height:400,children:(0,t.jsxs)(G,{children:[(0,t.jsx)(e7,{data:e.map(e=>({name:e.nome,value:Number(e.peso)})),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",label:!0,children:e.map((e,a)=>(0,t.jsx)(eA.Cell,{fill:er[a%er.length]},`cell-${a}`))}),(0,t.jsx)(e8.Tooltip,{}),(0,t.jsx)(tw,{})]})})]})})]}),(0,t.jsx)(O,{})]})}e.s(["default",()=>tk],73399)}]);