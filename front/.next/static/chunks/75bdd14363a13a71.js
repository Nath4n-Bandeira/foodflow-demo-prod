(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88143,(e,t,s)=>{"use strict";function n({widthInt:e,heightInt:t,blurWidth:s,blurHeight:n,blurDataURL:a,objectFit:r}){let i=s?40*s:e,o=n?40*n:t,l=i&&o?`viewBox='0 0 ${i} ${o}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${l}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${l?"none":"contain"===r?"xMidYMid":"cover"===r?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${a}'/%3E%3C/svg%3E`}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getImageBlurSvg",{enumerable:!0,get:function(){return n}})},87690,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n={VALID_LOADERS:function(){return r},imageConfigDefault:function(){return i}};for(var a in n)Object.defineProperty(s,a,{enumerable:!0,get:n[a]});let r=["default","imgix","cloudinary","akamai","custom"],i={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},8927,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getImgProps",{enumerable:!0,get:function(){return l}}),e.r(33525);let n=e.r(88143),a=e.r(87690),r=["-moz-initial","fill","none","scale-down",void 0];function i(e){return void 0!==e.default}function o(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function l({src:e,sizes:t,unoptimized:s=!1,priority:l=!1,preload:d=!1,loading:c,className:u,quality:h,width:m,height:f,fill:g=!1,style:p,overrideSrc:x,onLoad:y,onLoadingComplete:b,placeholder:v="empty",blurDataURL:j,fetchPriority:w,decoding:N="async",layout:C,objectFit:E,objectPosition:O,lazyBoundary:_,lazyRoot:S,...I},T){var A;let R,k,M,{imgConf:P,showAltText:D,blurComplete:L,defaultLoader:$}=T,U=P||a.imageConfigDefault;if("allSizes"in U)R=U;else{let e=[...U.deviceSizes,...U.imageSizes].sort((e,t)=>e-t),t=U.deviceSizes.sort((e,t)=>e-t),s=U.qualities?.sort((e,t)=>e-t);R={...U,allSizes:e,deviceSizes:t,qualities:s}}if(void 0===$)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let F=I.loader||$;delete I.loader,delete I.srcSet;let H="__next_img_default"in F;if(H){if("custom"===R.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=F;F=t=>{let{config:s,...n}=t;return e(n)}}if(C){"fill"===C&&(g=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[C];e&&(p={...p,...e});let s={responsive:"100vw",fill:"100vw"}[C];s&&!t&&(t=s)}let B="",G=o(m),z=o(f);if((A=e)&&"object"==typeof A&&(i(A)||void 0!==A.src)){let t=i(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(k=t.blurWidth,M=t.blurHeight,j=j||t.blurDataURL,B=t.src,!g)if(G||z){if(G&&!z){let e=G/t.width;z=Math.round(t.height*e)}else if(!G&&z){let e=z/t.height;G=Math.round(t.width*e)}}else G=t.width,z=t.height}let q=!l&&!d&&("lazy"===c||void 0===c);(!(e="string"==typeof e?e:B)||e.startsWith("data:")||e.startsWith("blob:"))&&(s=!0,q=!1),R.unoptimized&&(s=!0),H&&!R.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(s=!0);let K=o(h),Y=Object.assign(g?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:E,objectPosition:O}:{},D?{}:{color:"transparent"},p),V=L||"empty"===v?null:"blur"===v?`url("data:image/svg+xml;charset=utf-8,${(0,n.getImageBlurSvg)({widthInt:G,heightInt:z,blurWidth:k,blurHeight:M,blurDataURL:j||"",objectFit:Y.objectFit})}")`:`url("${v}")`,J=r.includes(Y.objectFit)?"fill"===Y.objectFit?"100% 100%":"cover":Y.objectFit,X=V?{backgroundSize:J,backgroundPosition:Y.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:V}:{},W=function({config:e,src:t,unoptimized:s,width:n,quality:a,sizes:r,loader:i}){if(s)return{src:t,srcSet:void 0,sizes:void 0};let{widths:o,kind:l}=function({deviceSizes:e,allSizes:t},s,n){if(n){let s=/(^|\s)(1?\d?\d)vw/g,a=[];for(let e;e=s.exec(n);)a.push(parseInt(e[2]));if(a.length){let s=.01*Math.min(...a);return{widths:t.filter(t=>t>=e[0]*s),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof s?{widths:e,kind:"w"}:{widths:[...new Set([s,2*s].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,n,r),d=o.length-1;return{sizes:r||"w"!==l?r:"100vw",srcSet:o.map((s,n)=>`${i({config:e,src:t,quality:a,width:s})} ${"w"===l?s:n+1}${l}`).join(", "),src:i({config:e,src:t,quality:a,width:o[d]})}}({config:R,src:e,unoptimized:s,width:G,quality:K,sizes:t,loader:F}),Q=q?"lazy":c;return{props:{...I,loading:Q,fetchPriority:w,width:G,height:z,decoding:N,className:u,style:{...Y,...X},sizes:W.sizes,srcSet:W.srcSet,src:x||W.src},meta:{unoptimized:s,preload:d||l,placeholder:v,fill:g}}}},98879,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return o}});let n=e.r(71645),a="undefined"==typeof window,r=a?()=>{}:n.useLayoutEffect,i=a?()=>{}:n.useEffect;function o(e){let{headManager:t,reduceComponentsToState:s}=e;function o(){if(t&&t.mountedInstances){let e=n.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(s(e))}}return a&&(t?.mountedInstances?.add(e.children),o()),r(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),r(()=>(t&&(t._pendingUpdate=o),()=>{t&&(t._pendingUpdate=o)})),i(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},25633,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n={default:function(){return g},defaultHead:function(){return u}};for(var a in n)Object.defineProperty(s,a,{enumerable:!0,get:n[a]});let r=e.r(55682),i=e.r(90809),o=e.r(43476),l=i._(e.r(71645)),d=r._(e.r(98879)),c=e.r(42732);function u(){return[(0,o.jsx)("meta",{charSet:"utf-8"},"charset"),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function h(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===l.default.Fragment?e.concat(l.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(33525);let m=["name","httpEquiv","charSet","itemProp"];function f(e){let t,s,n,a;return e.reduce(h,[]).reverse().concat(u().reverse()).filter((t=new Set,s=new Set,n=new Set,a={},e=>{let r=!0,i=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){i=!0;let s=e.key.slice(e.key.indexOf("$")+1);t.has(s)?r=!1:t.add(s)}switch(e.type){case"title":case"base":s.has(e.type)?r=!1:s.add(e.type);break;case"meta":for(let t=0,s=m.length;t<s;t++){let s=m[t];if(e.props.hasOwnProperty(s))if("charSet"===s)n.has(s)?r=!1:n.add(s);else{let t=e.props[s],n=a[s]||new Set;("name"!==s||!i)&&n.has(t)?r=!1:(n.add(t),a[s]=n)}}}return r})).reverse().map((e,t)=>{let s=e.key||t;return l.default.cloneElement(e,{key:s})})}let g=function({children:e}){let t=(0,l.useContext)(c.HeadManagerContext);return(0,o.jsx)(d.default,{reduceComponentsToState:f,headManager:t,children:e})};("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},18556,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"ImageConfigContext",{enumerable:!0,get:function(){return r}});let n=e.r(55682)._(e.r(71645)),a=e.r(87690),r=n.default.createContext(a.imageConfigDefault)},65856,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"RouterContext",{enumerable:!0,get:function(){return n}});let n=e.r(55682)._(e.r(71645)).default.createContext(null)},70965,(e,t,s)=>{"use strict";function n(e,t){let s=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-s)<Math.abs(e-s)?t:e,0):s}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"findClosestQuality",{enumerable:!0,get:function(){return n}})},1948,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return r}});let n=e.r(70965);function a({config:e,src:t,width:s,quality:a}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let r=(0,n.findClosestQuality)(a,e);return`${e.path}?url=${encodeURIComponent(t)}&w=${s}&q=${r}${t.startsWith("/_next/static/media/"),""}`}a.__next_img_default=!0;let r=a},5500,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"Image",{enumerable:!0,get:function(){return v}});let n=e.r(55682),a=e.r(90809),r=e.r(43476),i=a._(e.r(71645)),o=n._(e.r(74080)),l=n._(e.r(25633)),d=e.r(8927),c=e.r(87690),u=e.r(18556);e.r(33525);let h=e.r(65856),m=n._(e.r(1948)),f=e.r(18581),g={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function p(e,t,s,n,a,r,i){let o=e?.src;e&&e["data-loaded-src"]!==o&&(e["data-loaded-src"]=o,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&a(!0),s?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,a=!1;s.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>a,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{a=!0,t.stopPropagation()}})}n?.current&&n.current(e)}}))}function x(e){return i.use?{fetchPriority:e}:{fetchpriority:e}}"undefined"==typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let y=(0,i.forwardRef)(({src:e,srcSet:t,sizes:s,height:n,width:a,decoding:o,className:l,style:d,fetchPriority:c,placeholder:u,loading:h,unoptimized:m,fill:g,onLoadRef:y,onLoadingCompleteRef:b,setBlurComplete:v,setShowAltText:j,sizesInput:w,onLoad:N,onError:C,...E},O)=>{let _=(0,i.useCallback)(e=>{e&&(C&&(e.src=e.src),e.complete&&p(e,u,y,b,v,m,w))},[e,u,y,b,v,C,m,w]),S=(0,f.useMergedRef)(O,_);return(0,r.jsx)("img",{...E,...x(c),loading:h,width:a,height:n,decoding:o,"data-nimg":g?"fill":"1",className:l,style:d,sizes:s,srcSet:t,src:e,ref:S,onLoad:e=>{p(e.currentTarget,u,y,b,v,m,w)},onError:e=>{j(!0),"empty"!==u&&v(!0),C&&C(e)}})});function b({isAppRouter:e,imgAttributes:t}){let s={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...x(t.fetchPriority)};return e&&o.default.preload?(o.default.preload(t.src,s),null):(0,r.jsx)(l.default,{children:(0,r.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...s},"__nimg-"+t.src+t.srcSet+t.sizes)})}let v=(0,i.forwardRef)((e,t)=>{let s=(0,i.useContext)(h.RouterContext),n=(0,i.useContext)(u.ImageConfigContext),a=(0,i.useMemo)(()=>{let e=g||n||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),s=e.deviceSizes.sort((e,t)=>e-t),a=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:s,qualities:a,localPatterns:"undefined"==typeof window?n?.localPatterns:e.localPatterns}},[n]),{onLoad:o,onLoadingComplete:l}=e,f=(0,i.useRef)(o);(0,i.useEffect)(()=>{f.current=o},[o]);let p=(0,i.useRef)(l);(0,i.useEffect)(()=>{p.current=l},[l]);let[x,v]=(0,i.useState)(!1),[j,w]=(0,i.useState)(!1),{props:N,meta:C}=(0,d.getImgProps)(e,{defaultLoader:m.default,imgConf:a,blurComplete:x,showAltText:j});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{...N,unoptimized:C.unoptimized,placeholder:C.placeholder,fill:C.fill,onLoadRef:f,onLoadingCompleteRef:p,setBlurComplete:v,setShowAltText:w,sizesInput:e.sizes,ref:t}),C.preload?(0,r.jsx)(b,{isAppRouter:!s,imgAttributes:N}):null]})});("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},94909,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n={default:function(){return c},getImageProps:function(){return d}};for(var a in n)Object.defineProperty(s,a,{enumerable:!0,get:n[a]});let r=e.r(55682),i=e.r(8927),o=e.r(5500),l=r._(e.r(1948));function d(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let c=o.Image},57688,(e,t,s)=>{t.exports=e.r(94909)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},36676,e=>{"use strict";var t=e.i(43476),s=e.i(22016),n=e.i(57688),a=e.i(21531),r=e.i(52900),i=e.i(18566),o=e.i(71645),l=e.i(75254);let d=(0,l.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),c=(0,l.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var u=e.i(39616),h=e.i(84614);let m=(0,l.default)("Sandwich",[["path",{d:"m2.37 11.223 8.372-6.777a2 2 0 0 1 2.516 0l8.371 6.777",key:"f1wd0e"}],["path",{d:"M21 15a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-5.25",key:"1pfu07"}],["path",{d:"M3 15a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h9",key:"1oq9qw"}],["path",{d:"m6.67 15 6.13 4.6a2 2 0 0 0 2.8-.4l3.15-4.2",key:"1fnwu5"}],["rect",{width:"20",height:"4",x:"2",y:"11",rx:"1",key:"itshg"}]]),f=(0,l.default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var g=e.i(37727),p=e.i(17595),x=e.i(61911),y=e.i(94983);function b(){let[e,s]=(0,o.useState)(!1),{friends:n,openChat:a}=(0,r.useFriendsStore)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium relative",children:[(0,t.jsx)(x.Users,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Amigos"}),n.length>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 bg-green-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:n.length})]}),e&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 max-h-[80vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(x.Users,{className:"w-5 h-5 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Seus Amigos"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[n.length," amigo(s)"]})]})]}),(0,t.jsx)("button",{onClick:()=>s(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,t.jsx)(g.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:n.length>0?(0,t.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 hover:border-green-300 hover:shadow-md transition-all duration-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-green-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{className:"text-lg font-bold text-white select-none",children:e.nome?.charAt(0).toUpperCase()||"?"})}),(0,t.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,t.jsx)("h3",{className:"text-base font-bold text-gray-900 truncate",children:e.nome||"Usuário"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.email})]}),(0,t.jsx)("button",{onClick:()=>{a(e),s(!1)},className:"p-2 bg-green-600 hover:bg-green-700 rounded-full transition-colors flex-shrink-0",title:"Enviar mensagem",children:(0,t.jsx)(y.MessageCircle,{className:"w-5 h-5 text-white"})})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(h.User,{className:"w-10 h-10 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum amigo ainda"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Adicione amigos para começar a conversar!"}),(0,t.jsx)("a",{href:"/amigos",onClick:()=>s(!1),className:"inline-block px-6 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors",children:"Adicionar Amigos"})]})}),n.length>0&&(0,t.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,t.jsx)("a",{href:"/amigos",onClick:()=>s(!1),className:"block w-full text-center px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors",children:"Ver Todos os Amigos"})})]})})]})}e.i(47167);let v=(0,l.default)("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),j=(0,l.default)("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);var w=e.i(46696);function N(){let[e,s]=(0,o.useState)(!1),{cliente:n}=(0,a.useClienteStore)(),[r,i]=(0,o.useState)([]),[l,d]=(0,o.useState)(!1);(0,o.useEffect)(()=>{e&&n?.id&&c()},[e,n?.id]);let c=async()=>{try{d(!0);let e=p.default.get("token"),t=await fetch(`http://localhost:3001/dispensaInvites/${n?.id}`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){let e=await t.json();i(e)}}catch(e){console.error("Erro ao carregar convites:",e)}finally{d(!1)}},u=async e=>{try{let t=p.default.get("token");(await fetch(`http://localhost:3001/dispensaInvites/${e.id}/accept`,{method:"POST",headers:{Authorization:`Bearer ${t}`}})).ok?(w.toast.success(`Voc\xea agora \xe9 membro da dispensa "${e.dispensa.nome}"!`),i(r.filter(t=>t.id!==e.id))):w.toast.error("Erro ao aceitar convite")}catch(e){console.error("Erro ao aceitar convite:",e),w.toast.error("Erro ao aceitar convite")}},h=async e=>{try{let t=p.default.get("token");(await fetch(`http://localhost:3001/dispensaInvites/${e.id}/reject`,{method:"POST",headers:{Authorization:`Bearer ${t}`}})).ok?(w.toast.success("Convite rejeitado"),i(r.filter(t=>t.id!==e.id))):w.toast.error("Erro ao rejeitar convite")}catch(e){console.error("Erro ao rejeitar convite:",e),w.toast.error("Erro ao rejeitar convite")}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium relative",children:[(0,t.jsx)(v,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Convites"}),r.length>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:r.length})]}),e&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 max-h-[80vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(v,{className:"w-5 h-5 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Convites de Dispensa"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[r.length," convite(s) pendente(s)"]})]})]}),(0,t.jsx)("button",{onClick:()=>s(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,t.jsx)(g.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:l?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Carregando convites..."})]}):r.length>0?(0,t.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-md transition-all duration-200",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{className:"text-lg font-bold text-white select-none",children:e.dispensa.nome.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,t.jsx)("h3",{className:"text-base font-bold text-gray-900 truncate",children:e.dispensa.nome}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 truncate",children:["Convidado por ",(0,t.jsx)("span",{className:"font-medium",children:e.convidadoPor.nome})]}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.createdAt).toLocaleDateString("pt-BR")})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>u(e),className:"flex-1 px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors font-medium text-sm flex items-center justify-center gap-2",children:[(0,t.jsx)(j,{className:"w-4 h-4"}),"Aceitar"]}),(0,t.jsx)("button",{onClick:()=>h(e),className:"flex-1 px-3 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors font-medium text-sm",children:"Rejeitar"})]})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(v,{className:"w-10 h-10 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum convite pendente"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Você não tem convites de dispensa no momento."})]})})]})})]})}var C=e.i(14764),E=e.i(31278),O=e.i(67881),_=e.i(23750),S=e.i(70065);function I({dispensaId:e,isOpen:s,onClose:n}){let[a,r]=(0,o.useState)([]),[l,d]=(0,o.useState)(""),[c,u]=(0,o.useState)(!1),h=(0,o.useRef)(null),f=(0,i.useRouter)();(0,o.useEffect)(()=>{h.current?.scrollIntoView({behavior:"smooth"})},[a]);let x=async t=>{if(t.preventDefault(),!l.trim()||!e)return;let s={id:Date.now().toString(),role:"user",content:l,timestamp:new Date};r(e=>[...e,s]),d(""),u(!0);try{let t,s=a.map(e=>({role:e.role,content:e.content})),n=await fetch("http://localhost:3001/geminiPantry",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+p.default.get("token")},body:JSON.stringify({userMessage:l,dispensaId:e,conversationHistory:s})});if(!n.ok)throw Error("Erro ao processar a solicitação");let i=await n.json();try{t=JSON.parse(i.response)}catch{throw Error("Resposta inválida do servidor")}if("add"===t.action){for(let s of t.items){let t={nome:s.nome,peso:Number(s.peso),perecivel:s.perecivel,unidadeTipo:s.unidadeTipo,dispensaId:e,...s.validade&&{validade:new Date(s.validade).toISOString()}};await fetch(`http://localhost:3001/alimentos/dispensa/${e}/alimentos`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+p.default.get("token")},body:JSON.stringify(t)})}w.toast.success(`${t.items.length} ${1===t.items.length?"item adicionado":"itens adicionados"}!`,{style:{background:"#00c950",color:"#ffffff"}})}else if("register_usage"===t.action){let s=await fetch(`http://localhost:3001/alimentos/dispensa/${e}/alimentos`,{headers:{Authorization:"Bearer "+p.default.get("token")}});if(!s.ok)throw Error("Erro ao buscar alimentos");let n=await s.json(),a=t.items.map(e=>{let t=n.find(t=>t.nome.toLowerCase()===e.nome.toLowerCase());return t?{id:t.id,quantidade:e.quantidade}:(console.warn(`Alimento "${e.nome}" n\xe3o encontrado na dispensa`),null)}).filter(e=>null!==e);if(0===a.length)throw Error("Nenhum alimento encontrado na dispensa");if(!(await fetch("http://localhost:3001/alimentos/relatorio",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+p.default.get("token")},body:JSON.stringify({alimentos:a,dispensaId:e})})).ok)throw Error("Erro ao registrar uso");w.toast.success(`Uso de ${t.items.length} ${1===t.items.length?"item registrado":"itens registrados"}!`,{style:{background:"#00c950",color:"#ffffff"}})}else t.action;let o={id:(Date.now()+1).toString(),role:"assistant",content:t.message,timestamp:new Date};r(e=>[...e,o]),("add"===t.action||"register_usage"===t.action)&&setTimeout(()=>{f.refresh()},1e3)}catch(t){w.toast.error("Erro ao processar sua solicitação"),console.error(t);let e={id:(Date.now()+1).toString(),role:"assistant",content:"Desculpe, ocorreu um erro ao processar sua solicitação. Tente novamente.",timestamp:new Date};r(t=>[...t,e])}finally{u(!1)}};return s?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-end z-50 p-4",children:(0,t.jsxs)(S.Card,{className:"w-full max-w-md h-[600px] flex flex-col bg-white border border-slate-200 shadow-xl rounded-2xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 bg-gradient-to-r from-green-50 to-emerald-50 rounded-t-2xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,t.jsx)(m,{className:"w-5 h-5 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-slate-900",children:"Assistente Inteligente"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"Adicione itens com IA"})]})]}),(0,t.jsx)("button",{onClick:n,className:"text-slate-500 hover:text-slate-700 transition-colors",children:(0,t.jsx)(g.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===a.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center px-4",children:[(0,t.jsx)("div",{className:"p-4 bg-green-50 rounded-full mb-4",children:(0,t.jsx)(m,{className:"w-12 h-12 text-green-600"})}),(0,t.jsx)("h4",{className:"font-semibold text-slate-900 mb-2",children:"Bem-vindo ao Assistente Inteligente!"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm mb-4",children:"Descreva os itens que deseja adicionar à sua dispensa e eu vou adicioná-los automaticamente usando inteligência artificial."}),(0,t.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200",children:[(0,t.jsx)("p",{className:"text-slate-600 text-xs font-medium mb-2",children:"Exemplo:"}),(0,t.jsx)("p",{className:"text-slate-500 text-xs italic",children:'"Adicione 2kg de arroz, 1 litro de leite e 5 maçãs"'})]})]}):a.map(e=>(0,t.jsx)("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-[75%] px-4 py-2 rounded-2xl ${"user"===e.role?"bg-green-600 text-white rounded-br-none shadow-md":"bg-slate-100 text-slate-900 rounded-bl-none border border-slate-200"}`,children:[(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),(0,t.jsx)("span",{className:"text-xs opacity-70 mt-1 block",children:new Date(e.timestamp).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},e.id)),c&&(0,t.jsx)("div",{className:"flex justify-start",children:(0,t.jsx)("div",{className:"bg-slate-100 text-slate-900 px-4 py-3 rounded-2xl rounded-bl-none border border-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(E.Loader2,{className:"w-4 h-4 animate-spin text-green-600"}),(0,t.jsx)("span",{className:"text-sm text-slate-600",children:"Processando sua solicitação..."})]})})}),(0,t.jsx)("div",{ref:h})]}),(0,t.jsxs)("form",{onSubmit:x,className:"p-4 border-t border-slate-200 bg-slate-50 rounded-b-2xl",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(_.Input,{value:l,onChange:e=>d(e.target.value),placeholder:"Ex: 2kg de arroz, 1 litro de leite...",className:"flex-1 bg-white border-slate-200 text-slate-900 focus:ring-2 focus:ring-green-500",disabled:c||!e}),(0,t.jsx)(O.Button,{type:"submit",disabled:c||!l.trim()||!e,className:"bg-green-600 hover:bg-green-700 text-white px-4 shadow-sm hover:shadow-md transition-all",children:(0,t.jsx)(C.Send,{className:"w-4 h-4"})})]}),!e&&(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Navegue até uma dispensa para usar o assistente"})]})]})}):null}let T=(0,e.i(68834).create)()(e=>({isOpen:!1,dispensaId:null,setIsOpen:t=>e({isOpen:t}),setDispensaId:t=>e({dispensaId:t})}));function A(){let{cliente:e,deslogaCliente:l}=(0,a.useClienteStore)(),{reset:x}=(0,r.useFriendsStore)(),{setIsOpen:y,setDispensaId:v}=T(),j=(0,i.useRouter)(),w=(0,i.usePathname)(),[C,E]=(0,o.useState)(!1),[O,_]=(0,o.useState)(!1),[S,A]=(0,o.useState)(null);function R(){confirm("Confirma saída da conta ?")&&(l(),x(),localStorage.getItem("clienteKey")&&localStorage.removeItem("clienteKey"),j.push("/login"),p.default.remove("token"))}(0,o.useEffect)(()=>{let e=w?.match(/\/dispensa\/(\d+)/);e?A(Number(e[1])):A(null)},[w]);let k=()=>{S?(v(S),y(!0),_(!1)):alert("Navegue até uma dispensa para usar o assistente inteligente")},M=e&&e.id;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:(0,t.jsxs)("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between h-14 sm:h-16",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsxs)(s.default,{href:"/",className:"flex items-center gap-2 sm:gap-3",children:[(0,t.jsx)(n.default,{src:"/horde.png",alt:"FoodFlow Logo",width:40,height:40,className:"h-8 w-8 sm:h-12 sm:w-12",priority:!0}),(0,t.jsx)("span",{className:"text-lg sm:text-2xl font-semibold whitespace-nowrap text-black",children:"foodflow"})]})}),(0,t.jsx)("div",{className:"hidden md:flex items-center gap-2 lg:gap-3",children:M?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b,{}),(0,t.jsx)(N,{}),(0,t.jsxs)("button",{onClick:k,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors shadow-sm hover:shadow-md text-sm",title:"Assistente Inteligente de Dispensa",children:[(0,t.jsx)(m,{className:"w-4 h-4 lg:w-5 lg:h-5"}),(0,t.jsx)("span",{className:"font-semibold hidden lg:inline",children:"Assistente IA"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>E(!C),className:"flex items-center gap-2 p-1.5 rounded-full hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,t.jsx)("div",{className:"w-8 h-8 lg:w-9 lg:h-9 rounded-full bg-green-100 flex items-center justify-center text-green-600",children:(0,t.jsx)(h.User,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),(0,t.jsx)("span",{className:"hidden lg:inline font-semibold text-gray-700 max-w-[120px] truncate",children:e.nome}),(0,t.jsx)(d,{className:"w-4 h-4 lg:w-5 lg:h-5 text-gray-400"})]}),C&&(0,t.jsx)("div",{className:"absolute right-0 mt-2 w-56 origin-top-right bg-white rounded-xl shadow-lg ring-1 ring-black ring-opacity-5",onMouseLeave:()=>E(!1),children:(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsx)("div",{className:"px-3 py-2",children:(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.nome})}),(0,t.jsx)("div",{className:"h-px bg-gray-200 my-1"}),(0,t.jsxs)(s.default,{href:"/perfil",className:"flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-md hover:bg-gray-100",children:[(0,t.jsx)(u.Settings,{className:"w-4 h-4 text-gray-500"})," Meu Perfil"]}),(0,t.jsx)(s.default,{href:"/",className:"flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-md hover:bg-gray-100",children:"Minhas Dispensas"}),(0,t.jsxs)("button",{onClick:R,className:"w-full text-left flex items-center gap-3 px-3 py-2 text-sm text-red-600 rounded-md hover:bg-red-50 hover:text-red-700",children:[(0,t.jsx)(c,{className:"w-4 h-4"})," Sair"]})]})})]})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.default,{href:"/login",className:"px-3 py-1.5 lg:px-4 lg:py-2 rounded-lg text-sm font-semibold text-gray-600 hover:bg-gray-100 transition-colors",children:"Entrar"}),(0,t.jsx)(s.default,{href:"/register",className:"px-3 py-1.5 lg:px-4 lg:py-2 rounded-lg bg-green-600 text-white text-sm font-semibold hover:bg-green-700 transition-colors shadow-sm hover:shadow-md",children:"Criar Conta"})]})}),(0,t.jsx)("div",{className:"md:hidden",children:(0,t.jsx)("button",{onClick:()=>_(!O),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors",children:O?(0,t.jsx)(g.X,{className:"w-6 h-6"}):(0,t.jsx)(f,{className:"w-6 h-6"})})})]}),O&&M&&(0,t.jsxs)("div",{className:"md:hidden border-t border-gray-200 py-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-2 py-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600",children:(0,t.jsx)(h.User,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:e.nome})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(b,{}),(0,t.jsx)(N,{}),(0,t.jsxs)("button",{onClick:k,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-100",children:[(0,t.jsx)(m,{className:"w-5 h-5 text-green-600"}),"Assistente IA"]}),(0,t.jsxs)(s.default,{href:"/perfil",className:"flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-100",onClick:()=>_(!1),children:[(0,t.jsx)(u.Settings,{className:"w-5 h-5 text-gray-500"}),"Meu Perfil"]}),(0,t.jsx)(s.default,{href:"/",className:"flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-100",onClick:()=>_(!1),children:"Minhas Dispensas"}),(0,t.jsxs)("button",{onClick:()=>{_(!1),R()},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-red-600 rounded-lg hover:bg-red-50",children:[(0,t.jsx)(c,{className:"w-5 h-5"}),"Sair"]})]})]}),O&&!M&&(0,t.jsxs)("div",{className:"md:hidden border-t border-gray-200 py-4 space-y-2",children:[(0,t.jsx)(s.default,{href:"/login",className:"block px-3 py-2 text-sm font-semibold text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>_(!1),children:"Entrar"}),(0,t.jsx)(s.default,{href:"/register",className:"block px-3 py-2 rounded-lg bg-green-600 text-white text-sm font-semibold hover:bg-green-700 transition-colors text-center",onClick:()=>_(!1),children:"Criar Conta"})]})]})}),(0,t.jsx)(I,{dispensaId:S,isOpen:T(e=>e.isOpen),onClose:()=>y(!1)})]})}e.s(["Header",()=>A],36676)},47614,e=>{"use strict";var t=e.i(43476),s=e.i(71645),n=e.i(14764),a=e.i(37727),r=e.i(52900),i=e.i(21531);function o({friend:e,onClose:o}){let[l,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),{cliente:h}=(0,i.useClienteStore)(),{sendMessage:m,getConversation:f,loadConversation:g}=(0,r.useFriendsStore)(),p=(0,s.useRef)(null),x=f(h.id,e.id);if((0,s.useEffect)(()=>{(async()=>{u(!0),await g(h.id,e.id),u(!1)})()},[h.id,e.id,g]),(0,s.useEffect)(()=>{p.current?.scrollIntoView({behavior:"smooth"})},[x]),!e||!e.id)return console.error("[v0] ChatBox received invalid friend object:",e),null;let y=async t=>{t.preventDefault(),l.trim()&&(await m({senderId:h.id,receiverId:e.id,content:l.trim()}),d(""))},b=e.nome||e.email||"Usuário",v=b.charAt(0).toUpperCase();return(0,t.jsxs)("div",{className:"fixed bottom-4 right-4 w-96 h-[500px] bg-white rounded-lg shadow-2xl border border-gray-200 flex flex-col z-50",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-green-600 text-white rounded-t-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-white text-green-600 flex items-center justify-center font-semibold",children:v}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:b}),(0,t.jsx)("p",{className:"text-xs text-green-100",children:"Online"})]})]}),(0,t.jsx)("button",{onClick:o,className:"p-1 hover:bg-green-700 rounded-lg transition-colors",children:(0,t.jsx)(a.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[c?(0,t.jsx)("div",{className:"text-center text-gray-500 mt-8",children:(0,t.jsx)("p",{children:"Carregando mensagens..."})}):0===x.length?(0,t.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[(0,t.jsx)("p",{children:"Nenhuma mensagem ainda."}),(0,t.jsx)("p",{className:"text-sm",children:"Envie uma mensagem para começar!"})]}):x.map(e=>{let s=e.senderId===h.id;return(0,t.jsx)("div",{className:`flex ${s?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-[70%] rounded-lg px-4 py-2 ${s?"bg-green-600 text-white":"bg-gray-100 text-gray-900"}`,children:[(0,t.jsx)("p",{className:"text-sm",children:e.content}),(0,t.jsx)("p",{className:`text-xs mt-1 ${s?"text-green-100":"text-gray-500"}`,children:new Date(e.timestamp).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},e.id)}),(0,t.jsx)("div",{ref:p})]}),(0,t.jsx)("form",{onSubmit:y,className:"p-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:l,onChange:e=>d(e.target.value),placeholder:"Digite sua mensagem...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,t.jsx)("button",{type:"submit",disabled:!l.trim(),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)(n.Send,{className:"w-5 h-5"})})]})})]})}function l(){let{activeChat:e,closeChat:s}=(0,r.useFriendsStore)();return e?(0,t.jsx)(o,{friend:e,onClose:s}):null}e.s(["GlobalChatManager",()=>l],47614)},47043,e=>{"use strict";var t=e.i(43476),s=e.i(71645),n=(e,t,s,n,a,r,i,o)=>{let l=document.documentElement,d=["light","dark"];function c(t){var s;(Array.isArray(e)?e:[e]).forEach(e=>{let s="class"===e,n=s&&r?a.map(e=>r[e]||e):a;s?(l.classList.remove(...n),l.classList.add(r&&r[t]?r[t]:t)):l.setAttribute(e,t)}),s=t,o&&d.includes(s)&&(l.style.colorScheme=s)}if(n)c(n);else try{let e=localStorage.getItem(t)||s,n=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}},a=s.createContext(void 0),r={setTheme:e=>{},themes:[]};s.memo(({forcedTheme:e,storageKey:t,attribute:a,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:l,themes:d,nonce:c,scriptProps:u})=>{let h=JSON.stringify([a,t,o,e,d,l,r,i]).slice(1,-1);return s.createElement("script",{...u,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?c:"",dangerouslySetInnerHTML:{__html:`(${n.toString()})(${h})`}})});var i=e.i(46696);let o=({...e})=>{var n;let{theme:o="system"}=null!=(n=s.useContext(a))?n:r;return(0,t.jsx)(i.Toaster,{theme:o,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};e.s(["Toaster",()=>o],47043)},77887,e=>{"use strict";var t=e.i(43476),s=e.i(94983),n=e.i(40818),a=e.i(71645);function r(){let{isOpen:e,setIsOpen:r,messages:i}=(0,n.useChatbotStore)(),[o,l]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{l(!!(localStorage.getItem("token")||sessionStorage.getItem("token")))},[]),!o)return null;let d=+(i.length>0);return(0,t.jsxs)("button",{onClick:()=>r(!e),className:"fixed left-6 bottom-6 bg-green-600 hover:bg-green-700 text-white rounded-full p-4 shadow-lg hover:shadow-xl transition-all z-40","aria-label":"Abrir chatbot",children:[(0,t.jsx)(s.MessageCircle,{className:"w-6 h-6"}),d>0&&(0,t.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:d})]})}e.s(["ChatbotIcon",()=>r])},79437,e=>{"use strict";var t,s,n,a,r,i,o,l,d,c,u,h,m,f,g,p,x,y,b,v,j,w,N,C,E=e.i(43476),O=e.i(71645),_=e.i(40818),S=e.i(37727),I=e.i(14764),T=e.i(27612),A=e.i(67881),R=e.i(23750),k=e.i(70065);e.i(47167),(t=m||(m={})).STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object",(s=f||(f={})).LANGUAGE_UNSPECIFIED="language_unspecified",s.PYTHON="python",(n=g||(g={})).OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";let M=["user","model","function","system"];(a=p||(p={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",a.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",a.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",a.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",a.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",(r=x||(x={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE",(i=y||(y={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",(o=b||(b={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER",(l=v||(v={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",l.STOP="STOP",l.MAX_TOKENS="MAX_TOKENS",l.SAFETY="SAFETY",l.RECITATION="RECITATION",l.LANGUAGE="LANGUAGE",l.BLOCKLIST="BLOCKLIST",l.PROHIBITED_CONTENT="PROHIBITED_CONTENT",l.SPII="SPII",l.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",l.OTHER="OTHER",(d=j||(j={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",d.RETRIEVAL_QUERY="RETRIEVAL_QUERY",d.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",d.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",d.CLASSIFICATION="CLASSIFICATION",d.CLUSTERING="CLUSTERING",(c=w||(w={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",c.AUTO="AUTO",c.ANY="ANY",c.NONE="NONE",(u=N||(N={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",u.MODE_DYNAMIC="MODE_DYNAMIC";class P extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class D extends P{constructor(e,t){super(e),this.response=t}}class L extends P{constructor(e,t,s,n){super(e),this.status=t,this.statusText=s,this.errorDetails=n}}class $ extends P{}class U extends P{}(h=C||(C={})).GENERATE_CONTENT="generateContent",h.STREAM_GENERATE_CONTENT="streamGenerateContent",h.COUNT_TOKENS="countTokens",h.EMBED_CONTENT="embedContent",h.BATCH_EMBED_CONTENTS="batchEmbedContents";class F{constructor(e,t,s,n,a){this.model=e,this.task=t,this.apiKey=s,this.stream=n,this.requestOptions=a}toString(){var e,t;let s=(null==(e=this.requestOptions)?void 0:e.apiVersion)||"v1beta",n=(null==(t=this.requestOptions)?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com",a=`${n}/${s}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}async function H(e){var t,s;let n,a=new Headers;a.append("Content-Type","application/json"),a.append("x-goog-api-client",(s=e.requestOptions,n=[],(null==s?void 0:s.apiClient)&&n.push(s.apiClient),n.push("genai-js/0.24.1"),n.join(" "))),a.append("x-goog-api-key",e.apiKey);let r=null==(t=e.requestOptions)?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(e){throw new $(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${e.message}`)}for(let[e,t]of r.entries()){if("x-goog-api-key"===e)throw new $(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new $(`Header name ${e} can only be set using the apiClient field`);a.append(e,t)}}return a}async function B(e,t,s,n,a,r){let i=new F(e,t,s,n,r);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},function(e){let t={};if((null==e?void 0:e.signal)!==void 0||(null==e?void 0:e.timeout)>=0){let s=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>s.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{s.abort()}),t.signal=s.signal}return t}(r)),{method:"POST",headers:await H(i),body:a})}}async function G(e,t,s,n,a,r={},i=fetch){let{url:o,fetchOptions:l}=await B(e,t,s,n,a,r);return z(o,l,i)}async function z(e,t,s=fetch){let n;try{n=await s(e,t)}catch(s){var a=s,r=e;let t=a;throw"AbortError"===t.name?(t=new U(`Request aborted when fetching ${r.toString()}: ${a.message}`)).stack=a.stack:a instanceof L||a instanceof $||((t=new P(`Error fetching from ${r.toString()}: ${a.message}`)).stack=a.stack),t}return n.ok||await q(n,e),n}async function q(e,t){let s,n="";try{let t=await e.json();n=t.error.message,t.error.details&&(n+=` ${JSON.stringify(t.error.details)}`,s=t.error.details)}catch(e){}throw new L(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,s)}function K(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),J(e.candidates[0]))throw new D(`${X(e)}`,e);return function(e){var t,s,n,a;let r=[];if(null==(s=null==(t=e.candidates)?void 0:t[0].content)?void 0:s.parts)for(let t of null==(a=null==(n=e.candidates)?void 0:n[0].content)?void 0:a.parts)t.text&&r.push(t.text),t.executableCode&&r.push("\n```"+t.executableCode.language+"\n"+t.executableCode.code+"\n```\n"),t.codeExecutionResult&&r.push("\n```\n"+t.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}(e)}if(e.promptFeedback)throw new D(`Text not available. ${X(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),J(e.candidates[0]))throw new D(`${X(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Y(e)[0]}if(e.promptFeedback)throw new D(`Function call not available. ${X(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),J(e.candidates[0]))throw new D(`${X(e)}`,e);return Y(e)}if(e.promptFeedback)throw new D(`Function call not available. ${X(e)}`,e)},e}function Y(e){var t,s,n,a;let r=[];if(null==(s=null==(t=e.candidates)?void 0:t[0].content)?void 0:s.parts)for(let t of null==(a=null==(n=e.candidates)?void 0:n[0].content)?void 0:a.parts)t.functionCall&&r.push(t.functionCall);return r.length>0?r:void 0}let V=[v.RECITATION,v.SAFETY,v.LANGUAGE];function J(e){return!!e.finishReason&&V.includes(e.finishReason)}function X(e){var t,s,n;let a="";if((!e.candidates||0===e.candidates.length)&&e.promptFeedback)a+="Response was blocked",(null==(t=e.promptFeedback)?void 0:t.blockReason)&&(a+=` due to ${e.promptFeedback.blockReason}`),(null==(s=e.promptFeedback)?void 0:s.blockReasonMessage)&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(null==(n=e.candidates)?void 0:n[0]){let t=e.candidates[0];J(t)&&(a+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(a+=`: ${t.finishMessage}`))}return a}function W(e){return this instanceof W?(this.v=e,this):new W(e)}"function"==typeof SuppressedError&&SuppressedError;let Q=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function Z(e){let t=[],s=e.getReader();for(;;){let{done:e,value:n}=await s.read();if(e)return K(function(e){let t=e[e.length-1],s={promptFeedback:null==t?void 0:t.promptFeedback};for(let t of e){if(t.candidates){let e=0;for(let n of t.candidates)if(s.candidates||(s.candidates=[]),s.candidates[e]||(s.candidates[e]={index:e}),s.candidates[e].citationMetadata=n.citationMetadata,s.candidates[e].groundingMetadata=n.groundingMetadata,s.candidates[e].finishReason=n.finishReason,s.candidates[e].finishMessage=n.finishMessage,s.candidates[e].safetyRatings=n.safetyRatings,n.content&&n.content.parts){s.candidates[e].content||(s.candidates[e].content={role:n.content.role||"user",parts:[]});let t={};for(let a of n.content.parts)a.text&&(t.text=a.text),a.functionCall&&(t.functionCall=a.functionCall),a.executableCode&&(t.executableCode=a.executableCode),a.codeExecutionResult&&(t.codeExecutionResult=a.codeExecutionResult),0===Object.keys(t).length&&(t.text=""),s.candidates[e].content.parts.push(t)}e++}t.usageMetadata&&(s.usageMetadata=t.usageMetadata)}return s}(t));t.push(n)}}async function ee(e,t,s,n){return function(e){let t,[s,n]=(t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})).getReader(),new ReadableStream({start(e){let s="";return function n(){return t.read().then(({value:t,done:a})=>{let r;if(a)return s.trim()?void e.error(new P("Failed to parse stream")):void e.close();let i=(s+=t).match(Q);for(;i;){try{r=JSON.parse(i[1])}catch(t){e.error(new P(`Error parsing JSON response: "${i[1]}"`));return}e.enqueue(r),i=(s=s.substring(i[0].length)).match(Q)}return n()}).catch(e=>{let t=e;throw t.stack=e.stack,t="AbortError"===t.name?new U("Request aborted when reading from the stream"):new P("Error reading from the stream")})}()}})).tee();return{stream:function(e){return function(e,t,s){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,a=s.apply(e,t||[]),r=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){a[e]&&(n[e]=function(t){return new Promise(function(s,n){r.push([e,t,s,n])>1||o(e,t)})})}function o(e,t){try{var s;(s=a[e](t)).value instanceof W?Promise.resolve(s.value.v).then(l,d):c(r[0][2],s)}catch(e){c(r[0][3],e)}}function l(e){o("next",e)}function d(e){o("throw",e)}function c(e,t){e(t),r.shift(),r.length&&o(r[0][0],r[0][1])}}(this,arguments,function*(){let t=e.getReader();for(;;){let{value:e,done:s}=yield W(t.read());if(s)break;yield yield W(K(e))}})}(s),response:Z(n)}}(await G(t,C.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(s),n))}async function et(e,t,s,n){let a=await G(t,C.GENERATE_CONTENT,e,!1,JSON.stringify(s),n);return{response:K(await a.json())}}function es(e){if(null!=e){if("string"==typeof e)return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)if(!e.role)return{role:"system",parts:e.parts};else return e}}function en(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(let s of e)"string"==typeof s?t.push({text:s}):t.push(s);var s=t;let n={role:"user",parts:[]},a={role:"function",parts:[]},r=!1,i=!1;for(let e of s)"functionResponse"in e?(a.parts.push(e),i=!0):(n.parts.push(e),r=!0);if(r&&i)throw new P("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new P("No content is provided for sending chat message.");return r?n:a}function ea(e){let t;return t=e.contents?e:{contents:[en(e)]},e.systemInstruction&&(t.systemInstruction=es(e.systemInstruction)),t}let er=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],ei={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function eo(e){var t;if(void 0===e.candidates||0===e.candidates.length)return!1;let s=null==(t=e.candidates[0])?void 0:t.content;if(void 0===s||void 0===s.parts||0===s.parts.length)return!1;for(let e of s.parts)if(void 0===e||0===Object.keys(e).length||void 0!==e.text&&""===e.text)return!1;return!0}let el="SILENT_ERROR";class ed{constructor(e,t,s,n={}){this.model=t,this.params=s,this._requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==s?void 0:s.history)&&(!function(e){let t=!1;for(let s of e){let{role:e,parts:n}=s;if(!t&&"user"!==e)throw new P(`First content should be with role 'user', got ${e}`);if(!M.includes(e))throw new P(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(M)}`);if(!Array.isArray(n))throw new P("Content should have 'parts' property with an array of Parts");if(0===n.length)throw new P("Each Content should have at least one part");let a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let e of n)for(let t of er)t in e&&(a[t]+=1);let r=ei[e];for(let t of er)if(!r.includes(t)&&a[t]>0)throw new P(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var s,n,a,r,i,o;let l;await this._sendPromise;let d=en(e),c={safetySettings:null==(s=this.params)?void 0:s.safetySettings,generationConfig:null==(n=this.params)?void 0:n.generationConfig,tools:null==(a=this.params)?void 0:a.tools,toolConfig:null==(r=this.params)?void 0:r.toolConfig,systemInstruction:null==(i=this.params)?void 0:i.systemInstruction,cachedContent:null==(o=this.params)?void 0:o.cachedContent,contents:[...this._history,d]},u=Object.assign(Object.assign({},this._requestOptions),t);return this._sendPromise=this._sendPromise.then(()=>et(this._apiKey,this.model,c,u)).then(e=>{var t;if(eo(e.response)){this._history.push(d);let s=Object.assign({parts:[],role:"model"},null==(t=e.response.candidates)?void 0:t[0].content);this._history.push(s)}else{let t=X(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}l=e}).catch(e=>{throw this._sendPromise=Promise.resolve(),e}),await this._sendPromise,l}async sendMessageStream(e,t={}){var s,n,a,r,i,o;await this._sendPromise;let l=en(e),d={safetySettings:null==(s=this.params)?void 0:s.safetySettings,generationConfig:null==(n=this.params)?void 0:n.generationConfig,tools:null==(a=this.params)?void 0:a.tools,toolConfig:null==(r=this.params)?void 0:r.toolConfig,systemInstruction:null==(i=this.params)?void 0:i.systemInstruction,cachedContent:null==(o=this.params)?void 0:o.cachedContent,contents:[...this._history,l]},c=Object.assign(Object.assign({},this._requestOptions),t),u=ee(this._apiKey,this.model,d,c);return this._sendPromise=this._sendPromise.then(()=>u).catch(e=>{throw Error(el)}).then(e=>e.response).then(e=>{if(eo(e)){this._history.push(l);let t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{let t=X(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==el&&console.error(e)}),u}}async function ec(e,t,s,n){return(await G(t,C.COUNT_TOKENS,e,!1,JSON.stringify(s),n)).json()}async function eu(e,t,s,n){return(await G(t,C.EMBED_CONTENT,e,!1,JSON.stringify(s),n)).json()}async function eh(e,t,s,n){let a=s.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await G(t,C.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}class em{constructor(e,t,s={}){this.apiKey=e,this._requestOptions=s,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=es(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var s;let n=ea(e),a=Object.assign(Object.assign({},this._requestOptions),t);return et(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(s=this.cachedContent)?void 0:s.name},n),a)}async generateContentStream(e,t={}){var s;let n=ea(e),a=Object.assign(Object.assign({},this._requestOptions),t);return ee(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(s=this.cachedContent)?void 0:s.name},n),a)}startChat(e){var t;return new ed(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(t=this.cachedContent)?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){let s=function(e,t){var s;let n={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null==(s=null==t?void 0:t.cachedContent)?void 0:s.name,contents:[]},a=null!=e.generateContentRequest;if(e.contents){if(a)throw new $("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{let t=en(e);n.contents=[t]}return{generateContentRequest:n}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),n=Object.assign(Object.assign({},this._requestOptions),t);return ec(this.apiKey,this.model,s,n)}async embedContent(e,t={}){let s="string"==typeof e||Array.isArray(e)?{content:en(e)}:e,n=Object.assign(Object.assign({},this._requestOptions),t);return eu(this.apiKey,this.model,s,n)}async batchEmbedContents(e,t={}){let s=Object.assign(Object.assign({},this._requestOptions),t);return eh(this.apiKey,this.model,e,s)}}async function ef(e,t){try{let t=await fetch("http://localhost:3001/gemini",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userMessage:e})});if(!t.ok){if(400===t.status){let e=await t.json();console.error("Erro 400 no backend:",e.erro)}throw Error("Erro ao chamar backend Gemini")}return(await t.json()).resposta}catch(e){throw console.error("Erro no chatWithGemini:",e),Error("Erro ao gerar resposta do chatbot")}}new class{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new P("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new em(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,s){if(!e.name)throw new $("Cached content must contain a `name` field.");if(!e.model)throw new $("Cached content must contain a `model` field.");for(let s of["model","systemInstruction"])if((null==t?void 0:t[s])&&e[s]&&(null==t?void 0:t[s])!==e[s]){if("model"===s&&(t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue;throw new $(`Different value for "${s}" specified in modelParams (${t[s]}) and cachedContent (${e[s]})`)}let n=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new em(this.apiKey,n,s)}}("AIzaSyBu7xIKEVTpAOIctC0HlZYPp6ZMJw2LQLc");var eg=e.i(46696);function ep(){let{isOpen:e,setIsOpen:t,messages:s,addMessage:n,selectedItems:a,removeSelectedItem:r,clearSelectedItems:i,clearMessages:o,isLoading:l,setIsLoading:d}=(0,_.useChatbotStore)(),[c,u]=(0,O.useState)(""),[h,m]=(0,O.useState)([]),f=(0,O.useRef)(null);(0,O.useEffect)(()=>{f.current?.scrollIntoView({behavior:"smooth"})},[s]);let g=async e=>{if(e.preventDefault(),c.trim()){n({id:Date.now().toString(),role:"user",content:c,timestamp:new Date}),u(""),d(!0);try{let e=await ef(c,a),t={id:(Date.now()+1).toString(),role:"assistant",content:e,timestamp:new Date};n(t)}catch(e){eg.toast.error("Erro ao gerar resposta do chatbot"),console.error(e)}finally{d(!1)}}};return e?(0,E.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-end z-50 p-4",children:(0,E.jsxs)(k.Card,{className:"w-full max-w-md h-[600px] flex flex-col bg-white border border-slate-200 shadow-xl",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[(0,E.jsx)("h3",{className:"font-semibold text-slate-900",children:"Assistente Culinário"}),(0,E.jsx)("button",{onClick:()=>t(!1),className:"text-slate-500 hover:text-slate-700",children:(0,E.jsx)(S.X,{className:"w-5 h-5"})})]}),(0,E.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===s.length?(0,E.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:(0,E.jsx)("p",{className:"text-slate-500 text-sm",children:"Selecione itens de sua dispensa e faça perguntas sobre receitas, preparo ou combinações de alimentos."})}):s.map(e=>(0,E.jsx)("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"}`,children:(0,E.jsxs)("div",{className:`max-w-xs px-4 py-2 rounded-lg ${"user"===e.role?"bg-green-600 text-white rounded-br-none":"bg-slate-100 text-slate-900 rounded-bl-none"}`,children:[(0,E.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),(0,E.jsx)("span",{className:"text-xs opacity-70 mt-1 block",children:new Date(e.timestamp).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},e.id)),l&&(0,E.jsx)("div",{className:"flex justify-start",children:(0,E.jsx)("div",{className:"bg-slate-100 text-slate-900 px-4 py-2 rounded-lg rounded-bl-none",children:(0,E.jsxs)("div",{className:"flex gap-2",children:[(0,E.jsx)("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),(0,E.jsx)("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,E.jsx)("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,E.jsx)("div",{ref:f})]}),a.length>0&&(0,E.jsxs)("div",{className:"px-4 py-3 border-t border-slate-200",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,E.jsxs)("p",{className:"text-xs font-semibold text-slate-600",children:["ITENS SELECIONADOS (",a.length,")"]}),(0,E.jsx)("button",{onClick:i,className:"text-xs text-slate-500 hover:text-slate-700",children:"Limpar"})]}),(0,E.jsx)("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:a.map(e=>(0,E.jsxs)("div",{className:"flex items-center justify-between bg-slate-50 p-2 rounded text-xs",children:[(0,E.jsxs)("span",{className:"text-slate-700",children:[e.nome," (",e.peso," ",e.unidadeTipo,")"]}),(0,E.jsx)("button",{onClick:()=>r(e.id),className:"text-slate-400 hover:text-red-600",children:(0,E.jsx)(T.Trash2,{className:"w-3 h-3"})})]},e.id))})]}),(0,E.jsxs)("form",{onSubmit:g,className:"p-4 border-t border-slate-200 flex gap-2",children:[(0,E.jsx)(R.Input,{value:c,onChange:e=>u(e.target.value),placeholder:"Faça uma pergunta...",className:"flex-1 bg-slate-50 border-slate-200 text-slate-900",disabled:l}),(0,E.jsx)(A.Button,{type:"submit",disabled:l||!c.trim(),className:"bg-green-600 hover:bg-green-700 text-white",children:(0,E.jsx)(I.Send,{className:"w-4 h-4"})})]})]})}):null}e.s(["ChatbotModal",()=>ep],79437)}]);