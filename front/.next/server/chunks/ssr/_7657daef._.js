module.exports=[33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},4987,(a,b,c)=>{"use strict";function d({widthInt:a,heightInt:b,blurWidth:c,blurHeight:d,blurDataURL:e,objectFit:f}){let g=c?40*c:a,h=d?40*d:b,i=g&&h?`viewBox='0 0 ${g} ${h}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${i}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${i?"none":"contain"===f?"xMidYMid":"cover"===f?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${e}'/%3E%3C/svg%3E`}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getImageBlurSvg",{enumerable:!0,get:function(){return d}})},345,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={VALID_LOADERS:function(){return f},imageConfigDefault:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=["default","imgix","cloudinary","akamai","custom"],g={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},94915,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getImgProps",{enumerable:!0,get:function(){return i}}),a.r(92434);let d=a.r(4987),e=a.r(345),f=["-moz-initial","fill","none","scale-down",void 0];function g(a){return void 0!==a.default}function h(a){return void 0===a?a:"number"==typeof a?Number.isFinite(a)?a:NaN:"string"==typeof a&&/^[0-9]+$/.test(a)?parseInt(a,10):NaN}function i({src:a,sizes:b,unoptimized:c=!1,priority:i=!1,preload:j=!1,loading:k,className:l,quality:m,width:n,height:o,fill:p=!1,style:q,overrideSrc:r,onLoad:s,onLoadingComplete:t,placeholder:u="empty",blurDataURL:v,fetchPriority:w,decoding:x="async",layout:y,objectFit:z,objectPosition:A,lazyBoundary:B,lazyRoot:C,...D},E){var F;let G,H,I,{imgConf:J,showAltText:K,blurComplete:L,defaultLoader:M}=E,N=J||e.imageConfigDefault;if("allSizes"in N)G=N;else{let a=[...N.deviceSizes,...N.imageSizes].sort((a,b)=>a-b),b=N.deviceSizes.sort((a,b)=>a-b),c=N.qualities?.sort((a,b)=>a-b);G={...N,allSizes:a,deviceSizes:b,qualities:c}}if(void 0===M)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let O=D.loader||M;delete D.loader,delete D.srcSet;let P="__next_img_default"in O;if(P){if("custom"===G.loader)throw Object.defineProperty(Error(`Image with src "${a}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let a=O;O=b=>{let{config:c,...d}=b;return a(d)}}if(y){"fill"===y&&(p=!0);let a={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[y];a&&(q={...q,...a});let c={responsive:"100vw",fill:"100vw"}[y];c&&!b&&(b=c)}let Q="",R=h(n),S=h(o);if((F=a)&&"object"==typeof F&&(g(F)||void 0!==F.src)){let b=g(a)?a.default:a;if(!b.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(b)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!b.height||!b.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(b)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(H=b.blurWidth,I=b.blurHeight,v=v||b.blurDataURL,Q=b.src,!p)if(R||S){if(R&&!S){let a=R/b.width;S=Math.round(b.height*a)}else if(!R&&S){let a=S/b.height;R=Math.round(b.width*a)}}else R=b.width,S=b.height}let T=!i&&!j&&("lazy"===k||void 0===k);(!(a="string"==typeof a?a:Q)||a.startsWith("data:")||a.startsWith("blob:"))&&(c=!0,T=!1),G.unoptimized&&(c=!0),P&&!G.dangerouslyAllowSVG&&a.split("?",1)[0].endsWith(".svg")&&(c=!0);let U=h(m),V=Object.assign(p?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:z,objectPosition:A}:{},K?{}:{color:"transparent"},q),W=L||"empty"===u?null:"blur"===u?`url("data:image/svg+xml;charset=utf-8,${(0,d.getImageBlurSvg)({widthInt:R,heightInt:S,blurWidth:H,blurHeight:I,blurDataURL:v||"",objectFit:V.objectFit})}")`:`url("${u}")`,X=f.includes(V.objectFit)?"fill"===V.objectFit?"100% 100%":"cover":V.objectFit,Y=W?{backgroundSize:X,backgroundPosition:V.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:W}:{},Z=function({config:a,src:b,unoptimized:c,width:d,quality:e,sizes:f,loader:g}){if(c)return{src:b,srcSet:void 0,sizes:void 0};let{widths:h,kind:i}=function({deviceSizes:a,allSizes:b},c,d){if(d){let c=/(^|\s)(1?\d?\d)vw/g,e=[];for(let a;a=c.exec(d);)e.push(parseInt(a[2]));if(e.length){let c=.01*Math.min(...e);return{widths:b.filter(b=>b>=a[0]*c),kind:"w"}}return{widths:b,kind:"w"}}return"number"!=typeof c?{widths:a,kind:"w"}:{widths:[...new Set([c,2*c].map(a=>b.find(b=>b>=a)||b[b.length-1]))],kind:"x"}}(a,d,f),j=h.length-1;return{sizes:f||"w"!==i?f:"100vw",srcSet:h.map((c,d)=>`${g({config:a,src:b,quality:e,width:c})} ${"w"===i?c:d+1}${i}`).join(", "),src:g({config:a,src:b,quality:e,width:h[j]})}}({config:G,src:a,unoptimized:c,width:R,quality:U,sizes:b,loader:O}),$=T?"lazy":k;return{props:{...D,loading:$,fetchPriority:w,width:R,height:S,decoding:x,className:l,style:{...V,...Y},sizes:Z.sizes,srcSet:Z.srcSet,src:r||Z.src},meta:{unoptimized:c,preload:j||i,placeholder:u,fill:p}}}},94613,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return f}});let d=a.r(72131),e=()=>{};function f(a){let{headManager:b,reduceComponentsToState:c}=a;function f(){if(b&&b.mountedInstances){let a=d.Children.toArray(Array.from(b.mountedInstances).filter(Boolean));b.updateHead(c(a))}}return b?.mountedInstances?.add(a.children),f(),e(()=>(b?.mountedInstances?.add(a.children),()=>{b?.mountedInstances?.delete(a.children)})),e(()=>(b&&(b._pendingUpdate=f),()=>{b&&(b._pendingUpdate=f)})),null}},92966,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HeadManagerContext},58018,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return p},defaultHead:function(){return l}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(46058),h=a.r(87924),i=g._(a.r(72131)),j=f._(a.r(94613)),k=a.r(92966);function l(){return[(0,h.jsx)("meta",{charSet:"utf-8"},"charset"),(0,h.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function m(a,b){return"string"==typeof b||"number"==typeof b?a:b.type===i.default.Fragment?a.concat(i.default.Children.toArray(b.props.children).reduce((a,b)=>"string"==typeof b||"number"==typeof b?a:a.concat(b),[])):a.concat(b)}a.r(92434);let n=["name","httpEquiv","charSet","itemProp"];function o(a){let b,c,d,e;return a.reduce(m,[]).reverse().concat(l().reverse()).filter((b=new Set,c=new Set,d=new Set,e={},a=>{let f=!0,g=!1;if(a.key&&"number"!=typeof a.key&&a.key.indexOf("$")>0){g=!0;let c=a.key.slice(a.key.indexOf("$")+1);b.has(c)?f=!1:b.add(c)}switch(a.type){case"title":case"base":c.has(a.type)?f=!1:c.add(a.type);break;case"meta":for(let b=0,c=n.length;b<c;b++){let c=n[b];if(a.props.hasOwnProperty(c))if("charSet"===c)d.has(c)?f=!1:d.add(c);else{let b=a.props[c],d=e[c]||new Set;("name"!==c||!g)&&d.has(b)?f=!1:(d.add(b),e[c]=d)}}}return f})).reverse().map((a,b)=>{let c=a.key||b;return i.default.cloneElement(a,{key:c})})}let p=function({children:a}){let b=(0,i.useContext)(k.HeadManagerContext);return(0,h.jsx)(j.default,{reduceComponentsToState:o,headManager:b,children:a})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},4486,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ImageConfigContext},53773,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.RouterContext},35444,(a,b,c)=>{"use strict";function d(a,b){let c=a||75;return b?.qualities?.length?b.qualities.reduce((a,b)=>Math.abs(b-c)<Math.abs(a-c)?b:a,0):c}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findClosestQuality",{enumerable:!0,get:function(){return d}})},2305,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return f}});let d=a.r(35444);function e({config:a,src:b,width:c,quality:e}){if(b.startsWith("/")&&b.includes("?")&&a.localPatterns?.length===1&&"**"===a.localPatterns[0].pathname&&""===a.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${b}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let f=(0,d.findClosestQuality)(e,a);return`${a.path}?url=${encodeURIComponent(b)}&w=${c}&q=${f}${b.startsWith("/_next/static/media/"),""}`}e.__next_img_default=!0;let f=e},67161,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"Image",{enumerable:!0,get:function(){return u}});let d=a.r(33354),e=a.r(46058),f=a.r(87924),g=e._(a.r(72131)),h=d._(a.r(35112)),i=d._(a.r(58018)),j=a.r(94915),k=a.r(345),l=a.r(4486);a.r(92434);let m=a.r(53773),n=d._(a.r(2305)),o=a.r(8591),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function q(a,b,c,d,e,f,g){let h=a?.src;a&&a["data-loaded-src"]!==h&&(a["data-loaded-src"]=h,("decode"in a?a.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(a.parentElement&&a.isConnected){if("empty"!==b&&e(!0),c?.current){let b=new Event("load");Object.defineProperty(b,"target",{writable:!1,value:a});let d=!1,e=!1;c.current({...b,nativeEvent:b,currentTarget:a,target:a,isDefaultPrevented:()=>d,isPropagationStopped:()=>e,persist:()=>{},preventDefault:()=>{d=!0,b.preventDefault()},stopPropagation:()=>{e=!0,b.stopPropagation()}})}d?.current&&d.current(a)}}))}function r(a){return g.use?{fetchPriority:a}:{fetchpriority:a}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let s=(0,g.forwardRef)(({src:a,srcSet:b,sizes:c,height:d,width:e,decoding:h,className:i,style:j,fetchPriority:k,placeholder:l,loading:m,unoptimized:n,fill:p,onLoadRef:s,onLoadingCompleteRef:t,setBlurComplete:u,setShowAltText:v,sizesInput:w,onLoad:x,onError:y,...z},A)=>{let B=(0,g.useCallback)(a=>{a&&(y&&(a.src=a.src),a.complete&&q(a,l,s,t,u,n,w))},[a,l,s,t,u,y,n,w]),C=(0,o.useMergedRef)(A,B);return(0,f.jsx)("img",{...z,...r(k),loading:m,width:e,height:d,decoding:h,"data-nimg":p?"fill":"1",className:i,style:j,sizes:c,srcSet:b,src:a,ref:C,onLoad:a=>{q(a.currentTarget,l,s,t,u,n,w)},onError:a=>{v(!0),"empty"!==l&&u(!0),y&&y(a)}})});function t({isAppRouter:a,imgAttributes:b}){let c={as:"image",imageSrcSet:b.srcSet,imageSizes:b.sizes,crossOrigin:b.crossOrigin,referrerPolicy:b.referrerPolicy,...r(b.fetchPriority)};return a&&h.default.preload?(h.default.preload(b.src,c),null):(0,f.jsx)(i.default,{children:(0,f.jsx)("link",{rel:"preload",href:b.srcSet?void 0:b.src,...c},"__nimg-"+b.src+b.srcSet+b.sizes)})}let u=(0,g.forwardRef)((a,b)=>{let c=(0,g.useContext)(m.RouterContext),d=(0,g.useContext)(l.ImageConfigContext),e=(0,g.useMemo)(()=>{let a=p||d||k.imageConfigDefault,b=[...a.deviceSizes,...a.imageSizes].sort((a,b)=>a-b),c=a.deviceSizes.sort((a,b)=>a-b),e=a.qualities?.sort((a,b)=>a-b);return{...a,allSizes:b,deviceSizes:c,qualities:e,localPatterns:d?.localPatterns}},[d]),{onLoad:h,onLoadingComplete:i}=a,o=(0,g.useRef)(h);(0,g.useEffect)(()=>{o.current=h},[h]);let q=(0,g.useRef)(i);(0,g.useEffect)(()=>{q.current=i},[i]);let[r,u]=(0,g.useState)(!1),[v,w]=(0,g.useState)(!1),{props:x,meta:y}=(0,j.getImgProps)(a,{defaultLoader:n.default,imgConf:e,blurComplete:r,showAltText:v});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s,{...x,unoptimized:y.unoptimized,placeholder:y.placeholder,fill:y.fill,onLoadRef:o,onLoadingCompleteRef:q,setBlurComplete:u,setShowAltText:w,sizesInput:a.sizes,ref:b}),y.preload?(0,f.jsx)(t,{isAppRouter:!c,imgAttributes:x}):null]})});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},33095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(94915),h=a.r(67161),i=f._(a.r(2305));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},71987,(a,b,c)=>{b.exports=a.r(33095)},92759,a=>{"use strict";let b=(0,a.i(70106).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],92759)},12456,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(71987),e=a.i(17282),f=a.i(66728),g=a.i(50944),h=a.i(72131),i=a.i(70106);let j=(0,i.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),k=(0,i.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var l=a.i(21161),m=a.i(46842);let n=(0,i.default)("Sandwich",[["path",{d:"m2.37 11.223 8.372-6.777a2 2 0 0 1 2.516 0l8.371 6.777",key:"f1wd0e"}],["path",{d:"M21 15a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-5.25",key:"1pfu07"}],["path",{d:"M3 15a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h9",key:"1oq9qw"}],["path",{d:"m6.67 15 6.13 4.6a2 2 0 0 0 2.8-.4l3.15-4.2",key:"1fnwu5"}],["rect",{width:"20",height:"4",x:"2",y:"11",rx:"1",key:"itshg"}]]),o=(0,i.default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var p=a.i(33508),q=a.i(5434),r=a.i(60246),s=a.i(45222);function t(){let[a,c]=(0,h.useState)(!1),{friends:d,openChat:e}=(0,f.useFriendsStore)();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium relative",children:[(0,b.jsx)(r.Users,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Amigos"}),d.length>0&&(0,b.jsx)("span",{className:"absolute -top-1 -right-1 bg-green-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:d.length})]}),a&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 max-h-[80vh] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(r.Users,{className:"w-5 h-5 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Seus Amigos"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[d.length," amigo(s)"]})]})]}),(0,b.jsx)("button",{onClick:()=>c(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,b.jsx)(p.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:d.length>0?(0,b.jsx)("div",{className:"space-y-3",children:d.map(a=>(0,b.jsx)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 hover:border-green-300 hover:shadow-md transition-all duration-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-green-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,b.jsx)("span",{className:"text-lg font-bold text-white select-none",children:a.nome?.charAt(0).toUpperCase()||"?"})}),(0,b.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,b.jsx)("h3",{className:"text-base font-bold text-gray-900 truncate",children:a.nome||"Usuário"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 truncate",children:a.email})]}),(0,b.jsx)("button",{onClick:()=>{e(a),c(!1)},className:"p-2 bg-green-600 hover:bg-green-700 rounded-full transition-colors flex-shrink-0",title:"Enviar mensagem",children:(0,b.jsx)(s.MessageCircle,{className:"w-5 h-5 text-white"})})]})},a.id))}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(m.User,{className:"w-10 h-10 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum amigo ainda"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Adicione amigos para começar a conversar!"}),(0,b.jsx)("a",{href:"/amigos",onClick:()=>c(!1),className:"inline-block px-6 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors",children:"Adicionar Amigos"})]})}),d.length>0&&(0,b.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,b.jsx)("a",{href:"/amigos",onClick:()=>c(!1),className:"block w-full text-center px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors",children:"Ver Todos os Amigos"})})]})})]})}let u=(0,i.default)("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),v=(0,i.default)("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);var w=a.i(23292);function x(){let[a,c]=(0,h.useState)(!1),{cliente:d}=(0,e.useClienteStore)(),[f,g]=(0,h.useState)([]),[i,j]=(0,h.useState)(!1);(0,h.useEffect)(()=>{a&&d?.id&&k()},[a,d?.id]);let k=async()=>{try{j(!0);let a=q.default.get("token"),b=await fetch(`http://localhost:3001/dispensaInvites/${d?.id}`,{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();g(a)}}catch(a){console.error("Erro ao carregar convites:",a)}finally{j(!1)}},l=async a=>{try{let b=q.default.get("token");(await fetch(`http://localhost:3001/dispensaInvites/${a.id}/accept`,{method:"POST",headers:{Authorization:`Bearer ${b}`}})).ok?(w.toast.success(`Voc\xea agora \xe9 membro da dispensa "${a.dispensa.nome}"!`),g(f.filter(b=>b.id!==a.id))):w.toast.error("Erro ao aceitar convite")}catch(a){console.error("Erro ao aceitar convite:",a),w.toast.error("Erro ao aceitar convite")}},m=async a=>{try{let b=q.default.get("token");(await fetch(`http://localhost:3001/dispensaInvites/${a.id}/reject`,{method:"POST",headers:{Authorization:`Bearer ${b}`}})).ok?(w.toast.success("Convite rejeitado"),g(f.filter(b=>b.id!==a.id))):w.toast.error("Erro ao rejeitar convite")}catch(a){console.error("Erro ao rejeitar convite:",a),w.toast.error("Erro ao rejeitar convite")}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors font-medium relative",children:[(0,b.jsx)(u,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Convites"}),f.length>0&&(0,b.jsx)("span",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:f.length})]}),a&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 max-h-[80vh] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(u,{className:"w-5 h-5 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Convites de Dispensa"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[f.length," convite(s) pendente(s)"]})]})]}),(0,b.jsx)("button",{onClick:()=>c(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,b.jsx)(p.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:i?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Carregando convites..."})]}):f.length>0?(0,b.jsx)("div",{className:"space-y-3",children:f.map(a=>(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-md transition-all duration-200",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,b.jsx)("span",{className:"text-lg font-bold text-white select-none",children:a.dispensa.nome.charAt(0).toUpperCase()})}),(0,b.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,b.jsx)("h3",{className:"text-base font-bold text-gray-900 truncate",children:a.dispensa.nome}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 truncate",children:["Convidado por ",(0,b.jsx)("span",{className:"font-medium",children:a.convidadoPor.nome})]}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(a.createdAt).toLocaleDateString("pt-BR")})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>l(a),className:"flex-1 px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors font-medium text-sm flex items-center justify-center gap-2",children:[(0,b.jsx)(v,{className:"w-4 h-4"}),"Aceitar"]}),(0,b.jsx)("button",{onClick:()=>m(a),className:"flex-1 px-3 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors font-medium text-sm",children:"Rejeitar"})]})]},a.id))}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(u,{className:"w-10 h-10 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum convite pendente"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Você não tem convites de dispensa no momento."})]})})]})})]})}var y=a.i(92759),z=a.i(96221),A=a.i(40695),B=a.i(5522),C=a.i(3130);function D({dispensaId:a,isOpen:c,onClose:d}){let[e,f]=(0,h.useState)([]),[i,j]=(0,h.useState)(""),[k,l]=(0,h.useState)(!1),m=(0,h.useRef)(null),o=(0,g.useRouter)();(0,h.useEffect)(()=>{m.current?.scrollIntoView({behavior:"smooth"})},[e]);let r=async b=>{if(b.preventDefault(),!i.trim()||!a)return;let c={id:Date.now().toString(),role:"user",content:i,timestamp:new Date};f(a=>[...a,c]),j(""),l(!0);try{let b,c=e.map(a=>({role:a.role,content:a.content})),d=await fetch("http://localhost:3001/geminiPantry",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+q.default.get("token")},body:JSON.stringify({userMessage:i,dispensaId:a,conversationHistory:c})});if(!d.ok)throw Error("Erro ao processar a solicitação");let g=await d.json();try{b=JSON.parse(g.response)}catch{throw Error("Resposta inválida do servidor")}if("add"===b.action){for(let c of b.items){let b={nome:c.nome,peso:Number(c.peso),perecivel:c.perecivel,unidadeTipo:c.unidadeTipo,dispensaId:a,...c.validade&&{validade:new Date(c.validade).toISOString()}};await fetch(`http://localhost:3001/alimentos/dispensa/${a}/alimentos`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+q.default.get("token")},body:JSON.stringify(b)})}w.toast.success(`${b.items.length} ${1===b.items.length?"item adicionado":"itens adicionados"}!`,{style:{background:"#00c950",color:"#ffffff"}})}else if("register_usage"===b.action){let c=await fetch(`http://localhost:3001/alimentos/dispensa/${a}/alimentos`,{headers:{Authorization:"Bearer "+q.default.get("token")}});if(!c.ok)throw Error("Erro ao buscar alimentos");let d=await c.json(),e=b.items.map(a=>{let b=d.find(b=>b.nome.toLowerCase()===a.nome.toLowerCase());return b?{id:b.id,quantidade:a.quantidade}:(console.warn(`Alimento "${a.nome}" n\xe3o encontrado na dispensa`),null)}).filter(a=>null!==a);if(0===e.length)throw Error("Nenhum alimento encontrado na dispensa");if(!(await fetch("http://localhost:3001/alimentos/relatorio",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+q.default.get("token")},body:JSON.stringify({alimentos:e,dispensaId:a})})).ok)throw Error("Erro ao registrar uso");w.toast.success(`Uso de ${b.items.length} ${1===b.items.length?"item registrado":"itens registrados"}!`,{style:{background:"#00c950",color:"#ffffff"}})}else b.action;let h={id:(Date.now()+1).toString(),role:"assistant",content:b.message,timestamp:new Date};f(a=>[...a,h]),("add"===b.action||"register_usage"===b.action)&&setTimeout(()=>{o.refresh()},1e3)}catch(b){w.toast.error("Erro ao processar sua solicitação"),console.error(b);let a={id:(Date.now()+1).toString(),role:"assistant",content:"Desculpe, ocorreu um erro ao processar sua solicitação. Tente novamente.",timestamp:new Date};f(b=>[...b,a])}finally{l(!1)}};return c?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-end z-50 p-4",children:(0,b.jsxs)(C.Card,{className:"w-full max-w-md h-[600px] flex flex-col bg-white border border-slate-200 shadow-xl rounded-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 bg-gradient-to-r from-green-50 to-emerald-50 rounded-t-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,b.jsx)(n,{className:"w-5 h-5 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-slate-900",children:"Assistente Inteligente"}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Adicione itens com IA"})]})]}),(0,b.jsx)("button",{onClick:d,className:"text-slate-500 hover:text-slate-700 transition-colors",children:(0,b.jsx)(p.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===e.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center px-4",children:[(0,b.jsx)("div",{className:"p-4 bg-green-50 rounded-full mb-4",children:(0,b.jsx)(n,{className:"w-12 h-12 text-green-600"})}),(0,b.jsx)("h4",{className:"font-semibold text-slate-900 mb-2",children:"Bem-vindo ao Assistente Inteligente!"}),(0,b.jsx)("p",{className:"text-slate-500 text-sm mb-4",children:"Descreva os itens que deseja adicionar à sua dispensa e eu vou adicioná-los automaticamente usando inteligência artificial."}),(0,b.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200",children:[(0,b.jsx)("p",{className:"text-slate-600 text-xs font-medium mb-2",children:"Exemplo:"}),(0,b.jsx)("p",{className:"text-slate-500 text-xs italic",children:'"Adicione 2kg de arroz, 1 litro de leite e 5 maçãs"'})]})]}):e.map(a=>(0,b.jsx)("div",{className:`flex ${"user"===a.role?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-[75%] px-4 py-2 rounded-2xl ${"user"===a.role?"bg-green-600 text-white rounded-br-none shadow-md":"bg-slate-100 text-slate-900 rounded-bl-none border border-slate-200"}`,children:[(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:a.content}),(0,b.jsx)("span",{className:"text-xs opacity-70 mt-1 block",children:new Date(a.timestamp).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},a.id)),k&&(0,b.jsx)("div",{className:"flex justify-start",children:(0,b.jsx)("div",{className:"bg-slate-100 text-slate-900 px-4 py-3 rounded-2xl rounded-bl-none border border-slate-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(z.Loader2,{className:"w-4 h-4 animate-spin text-green-600"}),(0,b.jsx)("span",{className:"text-sm text-slate-600",children:"Processando sua solicitação..."})]})})}),(0,b.jsx)("div",{ref:m})]}),(0,b.jsxs)("form",{onSubmit:r,className:"p-4 border-t border-slate-200 bg-slate-50 rounded-b-2xl",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(B.Input,{value:i,onChange:a=>j(a.target.value),placeholder:"Ex: 2kg de arroz, 1 litro de leite...",className:"flex-1 bg-white border-slate-200 text-slate-900 focus:ring-2 focus:ring-green-500",disabled:k||!a}),(0,b.jsx)(A.Button,{type:"submit",disabled:k||!i.trim()||!a,className:"bg-green-600 hover:bg-green-700 text-white px-4 shadow-sm hover:shadow-md transition-all",children:(0,b.jsx)(y.Send,{className:"w-4 h-4"})})]}),!a&&(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Navegue até uma dispensa para usar o assistente"})]})]})}):null}let E=(0,a.i(20226).create)()(a=>({isOpen:!1,dispensaId:null,setIsOpen:b=>a({isOpen:b}),setDispensaId:b=>a({dispensaId:b})}));function F(){let{cliente:a,deslogaCliente:i}=(0,e.useClienteStore)(),{reset:r}=(0,f.useFriendsStore)(),{setIsOpen:s,setDispensaId:u}=E(),v=(0,g.useRouter)(),w=(0,g.usePathname)(),[y,z]=(0,h.useState)(!1),[A,B]=(0,h.useState)(!1),[C,F]=(0,h.useState)(null);function G(){confirm("Confirma saída da conta ?")&&(i(),r(),localStorage.getItem("clienteKey")&&localStorage.removeItem("clienteKey"),v.push("/login"),q.default.remove("token"))}(0,h.useEffect)(()=>{let a=w?.match(/\/dispensa\/(\d+)/);a?F(Number(a[1])):F(null)},[w]);let H=()=>{C?(u(C),s(!0),B(!1)):alert("Navegue até uma dispensa para usar o assistente inteligente")},I=a&&a.id;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:(0,b.jsxs)("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between h-14 sm:h-16",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsxs)(c.default,{href:"/",className:"flex items-center gap-2 sm:gap-3",children:[(0,b.jsx)(d.default,{src:"/horde.png",alt:"FoodFlow Logo",width:40,height:40,className:"h-8 w-8 sm:h-12 sm:w-12",priority:!0}),(0,b.jsx)("span",{className:"text-lg sm:text-2xl font-semibold whitespace-nowrap text-black",children:"foodflow"})]})}),(0,b.jsx)("div",{className:"hidden md:flex items-center gap-2 lg:gap-3",children:I?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t,{}),(0,b.jsx)(x,{}),(0,b.jsxs)("button",{onClick:H,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors shadow-sm hover:shadow-md text-sm",title:"Assistente Inteligente de Dispensa",children:[(0,b.jsx)(n,{className:"w-4 h-4 lg:w-5 lg:h-5"}),(0,b.jsx)("span",{className:"font-semibold hidden lg:inline",children:"Assistente IA"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>z(!y),className:"flex items-center gap-2 p-1.5 rounded-full hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,b.jsx)("div",{className:"w-8 h-8 lg:w-9 lg:h-9 rounded-full bg-green-100 flex items-center justify-center text-green-600",children:(0,b.jsx)(m.User,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),(0,b.jsx)("span",{className:"hidden lg:inline font-semibold text-gray-700 max-w-[120px] truncate",children:a.nome}),(0,b.jsx)(j,{className:"w-4 h-4 lg:w-5 lg:h-5 text-gray-400"})]}),y&&(0,b.jsx)("div",{className:"absolute right-0 mt-2 w-56 origin-top-right bg-white rounded-xl shadow-lg ring-1 ring-black ring-opacity-5",onMouseLeave:()=>z(!1),children:(0,b.jsxs)("div",{className:"p-2",children:[(0,b.jsx)("div",{className:"px-3 py-2",children:(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.nome})}),(0,b.jsx)("div",{className:"h-px bg-gray-200 my-1"}),(0,b.jsxs)(c.default,{href:"/perfil",className:"flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-md hover:bg-gray-100",children:[(0,b.jsx)(l.Settings,{className:"w-4 h-4 text-gray-500"})," Meu Perfil"]}),(0,b.jsx)(c.default,{href:"/",className:"flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-md hover:bg-gray-100",children:"Minhas Dispensas"}),(0,b.jsxs)("button",{onClick:G,className:"w-full text-left flex items-center gap-3 px-3 py-2 text-sm text-red-600 rounded-md hover:bg-red-50 hover:text-red-700",children:[(0,b.jsx)(k,{className:"w-4 h-4"})," Sair"]})]})})]})]}):(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.default,{href:"/login",className:"px-3 py-1.5 lg:px-4 lg:py-2 rounded-lg text-sm font-semibold text-gray-600 hover:bg-gray-100 transition-colors",children:"Entrar"}),(0,b.jsx)(c.default,{href:"/register",className:"px-3 py-1.5 lg:px-4 lg:py-2 rounded-lg bg-green-600 text-white text-sm font-semibold hover:bg-green-700 transition-colors shadow-sm hover:shadow-md",children:"Criar Conta"})]})}),(0,b.jsx)("div",{className:"md:hidden",children:(0,b.jsx)("button",{onClick:()=>B(!A),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors",children:A?(0,b.jsx)(p.X,{className:"w-6 h-6"}):(0,b.jsx)(o,{className:"w-6 h-6"})})})]}),A&&I&&(0,b.jsxs)("div",{className:"md:hidden border-t border-gray-200 py-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 px-2 py-2",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600",children:(0,b.jsx)(m.User,{className:"w-5 h-5"})}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:a.nome})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(t,{}),(0,b.jsx)(x,{}),(0,b.jsxs)("button",{onClick:H,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-100",children:[(0,b.jsx)(n,{className:"w-5 h-5 text-green-600"}),"Assistente IA"]}),(0,b.jsxs)(c.default,{href:"/perfil",className:"flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-100",onClick:()=>B(!1),children:[(0,b.jsx)(l.Settings,{className:"w-5 h-5 text-gray-500"}),"Meu Perfil"]}),(0,b.jsx)(c.default,{href:"/",className:"flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-100",onClick:()=>B(!1),children:"Minhas Dispensas"}),(0,b.jsxs)("button",{onClick:()=>{B(!1),G()},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-red-600 rounded-lg hover:bg-red-50",children:[(0,b.jsx)(k,{className:"w-5 h-5"}),"Sair"]})]})]}),A&&!I&&(0,b.jsxs)("div",{className:"md:hidden border-t border-gray-200 py-4 space-y-2",children:[(0,b.jsx)(c.default,{href:"/login",className:"block px-3 py-2 text-sm font-semibold text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>B(!1),children:"Entrar"}),(0,b.jsx)(c.default,{href:"/register",className:"block px-3 py-2 rounded-lg bg-green-600 text-white text-sm font-semibold hover:bg-green-700 transition-colors text-center",onClick:()=>B(!1),children:"Criar Conta"})]})]})}),(0,b.jsx)(D,{dispensaId:C,isOpen:E(a=>a.isOpen),onClose:()=>s(!1)})]})}a.s(["Header",()=>F],12456)},19659,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(92759),e=a.i(33508),f=a.i(66728),g=a.i(17282);function h({friend:a,onClose:h}){let[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(!1),{cliente:m}=(0,g.useClienteStore)(),{sendMessage:n,getConversation:o,loadConversation:p}=(0,f.useFriendsStore)(),q=(0,c.useRef)(null),r=o(m.id,a.id);if((0,c.useEffect)(()=>{(async()=>{l(!0),await p(m.id,a.id),l(!1)})()},[m.id,a.id,p]),(0,c.useEffect)(()=>{q.current?.scrollIntoView({behavior:"smooth"})},[r]),!a||!a.id)return console.error("[v0] ChatBox received invalid friend object:",a),null;let s=async b=>{b.preventDefault(),i.trim()&&(await n({senderId:m.id,receiverId:a.id,content:i.trim()}),j(""))},t=a.nome||a.email||"Usuário",u=t.charAt(0).toUpperCase();return(0,b.jsxs)("div",{className:"fixed bottom-4 right-4 w-96 h-[500px] bg-white rounded-lg shadow-2xl border border-gray-200 flex flex-col z-50",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-green-600 text-white rounded-t-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-white text-green-600 flex items-center justify-center font-semibold",children:u}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:t}),(0,b.jsx)("p",{className:"text-xs text-green-100",children:"Online"})]})]}),(0,b.jsx)("button",{onClick:h,className:"p-1 hover:bg-green-700 rounded-lg transition-colors",children:(0,b.jsx)(e.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[k?(0,b.jsx)("div",{className:"text-center text-gray-500 mt-8",children:(0,b.jsx)("p",{children:"Carregando mensagens..."})}):0===r.length?(0,b.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[(0,b.jsx)("p",{children:"Nenhuma mensagem ainda."}),(0,b.jsx)("p",{className:"text-sm",children:"Envie uma mensagem para começar!"})]}):r.map(a=>{let c=a.senderId===m.id;return(0,b.jsx)("div",{className:`flex ${c?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-[70%] rounded-lg px-4 py-2 ${c?"bg-green-600 text-white":"bg-gray-100 text-gray-900"}`,children:[(0,b.jsx)("p",{className:"text-sm",children:a.content}),(0,b.jsx)("p",{className:`text-xs mt-1 ${c?"text-green-100":"text-gray-500"}`,children:new Date(a.timestamp).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},a.id)}),(0,b.jsx)("div",{ref:q})]}),(0,b.jsx)("form",{onSubmit:s,className:"p-4 border-t border-gray-200",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:i,onChange:a=>j(a.target.value),placeholder:"Digite sua mensagem...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,b.jsx)("button",{type:"submit",disabled:!i.trim(),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)(d.Send,{className:"w-5 h-5"})})]})})]})}function i(){let{activeChat:a,closeChat:c}=(0,f.useFriendsStore)();return a?(0,b.jsx)(h,{friend:a,onClose:c}):null}a.s(["GlobalChatManager",()=>i],19659)},79997,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=(a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}},e=c.createContext(void 0),f={setTheme:a=>{},themes:[]};c.memo(({forcedTheme:a,storageKey:b,attribute:e,enableSystem:f,enableColorScheme:g,defaultTheme:h,value:i,themes:j,nonce:k,scriptProps:l})=>{let m=JSON.stringify([e,b,h,a,j,i,f,g]).slice(1,-1);return c.createElement("script",{...l,suppressHydrationWarning:!0,nonce:k,dangerouslySetInnerHTML:{__html:`(${d.toString()})(${m})`}})});var g=a.i(23292);let h=({...a})=>{var d;let{theme:h="system"}=null!=(d=c.useContext(e))?d:f;return(0,b.jsx)(g.Toaster,{theme:h,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...a})};a.s(["Toaster",()=>h],79997)},30631,a=>{"use strict";var b=a.i(87924),c=a.i(45222),d=a.i(81554),e=a.i(72131);function f(){let{isOpen:a,setIsOpen:f,messages:g}=(0,d.useChatbotStore)(),[h,i]=(0,e.useState)(!1);if((0,e.useEffect)(()=>{i(!!(localStorage.getItem("token")||sessionStorage.getItem("token")))},[]),!h)return null;let j=+(g.length>0);return(0,b.jsxs)("button",{onClick:()=>f(!a),className:"fixed left-6 bottom-6 bg-green-600 hover:bg-green-700 text-white rounded-full p-4 shadow-lg hover:shadow-xl transition-all z-40","aria-label":"Abrir chatbot",children:[(0,b.jsx)(c.MessageCircle,{className:"w-6 h-6"}),j>0&&(0,b.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:j})]})}a.s(["ChatbotIcon",()=>f])},86073,a=>{"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=a.i(87924),A=a.i(72131),B=a.i(81554),C=a.i(33508),D=a.i(92759),E=a.i(81560),F=a.i(40695),G=a.i(5522),H=a.i(3130);(b=n||(n={})).STRING="string",b.NUMBER="number",b.INTEGER="integer",b.BOOLEAN="boolean",b.ARRAY="array",b.OBJECT="object",(c=o||(o={})).LANGUAGE_UNSPECIFIED="language_unspecified",c.PYTHON="python",(d=p||(p={})).OUTCOME_UNSPECIFIED="outcome_unspecified",d.OUTCOME_OK="outcome_ok",d.OUTCOME_FAILED="outcome_failed",d.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";let I=["user","model","function","system"];(e=q||(q={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",(f=r||(r={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",f.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",f.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",f.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",f.BLOCK_NONE="BLOCK_NONE",(g=s||(s={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",g.NEGLIGIBLE="NEGLIGIBLE",g.LOW="LOW",g.MEDIUM="MEDIUM",g.HIGH="HIGH",(h=t||(t={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",h.SAFETY="SAFETY",h.OTHER="OTHER",(i=u||(u={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER",(j=v||(v={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",j.RETRIEVAL_QUERY="RETRIEVAL_QUERY",j.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",j.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",j.CLASSIFICATION="CLASSIFICATION",j.CLUSTERING="CLUSTERING",(k=w||(w={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",k.AUTO="AUTO",k.ANY="ANY",k.NONE="NONE",(l=x||(x={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.MODE_DYNAMIC="MODE_DYNAMIC";class J extends Error{constructor(a){super(`[GoogleGenerativeAI Error]: ${a}`)}}class K extends J{constructor(a,b){super(a),this.response=b}}class L extends J{constructor(a,b,c,d){super(a),this.status=b,this.statusText=c,this.errorDetails=d}}class M extends J{}class N extends J{}(m=y||(y={})).GENERATE_CONTENT="generateContent",m.STREAM_GENERATE_CONTENT="streamGenerateContent",m.COUNT_TOKENS="countTokens",m.EMBED_CONTENT="embedContent",m.BATCH_EMBED_CONTENTS="batchEmbedContents";class O{constructor(a,b,c,d,e){this.model=a,this.task=b,this.apiKey=c,this.stream=d,this.requestOptions=e}toString(){var a,b;let c=(null==(a=this.requestOptions)?void 0:a.apiVersion)||"v1beta",d=(null==(b=this.requestOptions)?void 0:b.baseUrl)||"https://generativelanguage.googleapis.com",e=`${d}/${c}/${this.model}:${this.task}`;return this.stream&&(e+="?alt=sse"),e}}async function P(a){var b,c;let d,e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",(c=a.requestOptions,d=[],(null==c?void 0:c.apiClient)&&d.push(c.apiClient),d.push("genai-js/0.24.1"),d.join(" "))),e.append("x-goog-api-key",a.apiKey);let f=null==(b=a.requestOptions)?void 0:b.customHeaders;if(f){if(!(f instanceof Headers))try{f=new Headers(f)}catch(a){throw new M(`unable to convert customHeaders value ${JSON.stringify(f)} to Headers: ${a.message}`)}for(let[a,b]of f.entries()){if("x-goog-api-key"===a)throw new M(`Cannot set reserved header name ${a}`);if("x-goog-api-client"===a)throw new M(`Header name ${a} can only be set using the apiClient field`);e.append(a,b)}}return e}async function Q(a,b,c,d,e,f){let g=new O(a,b,c,d,f);return{url:g.toString(),fetchOptions:Object.assign(Object.assign({},function(a){let b={};if((null==a?void 0:a.signal)!==void 0||(null==a?void 0:a.timeout)>=0){let c=new AbortController;(null==a?void 0:a.timeout)>=0&&setTimeout(()=>c.abort(),a.timeout),(null==a?void 0:a.signal)&&a.signal.addEventListener("abort",()=>{c.abort()}),b.signal=c.signal}return b}(f)),{method:"POST",headers:await P(g),body:e})}}async function R(a,b,c,d,e,f={},g=fetch){let{url:h,fetchOptions:i}=await Q(a,b,c,d,e,f);return S(h,i,g)}async function S(a,b,c=fetch){let d;try{d=await c(a,b)}catch(c){var e=c,f=a;let b=e;throw"AbortError"===b.name?(b=new N(`Request aborted when fetching ${f.toString()}: ${e.message}`)).stack=e.stack:e instanceof L||e instanceof M||((b=new J(`Error fetching from ${f.toString()}: ${e.message}`)).stack=e.stack),b}return d.ok||await T(d,a),d}async function T(a,b){let c,d="";try{let b=await a.json();d=b.error.message,b.error.details&&(d+=` ${JSON.stringify(b.error.details)}`,c=b.error.details)}catch(a){}throw new L(`Error fetching from ${b.toString()}: [${a.status} ${a.statusText}] ${d}`,a.status,a.statusText,c)}function U(a){return a.text=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),X(a.candidates[0]))throw new K(`${Y(a)}`,a);return function(a){var b,c,d,e;let f=[];if(null==(c=null==(b=a.candidates)?void 0:b[0].content)?void 0:c.parts)for(let b of null==(e=null==(d=a.candidates)?void 0:d[0].content)?void 0:e.parts)b.text&&f.push(b.text),b.executableCode&&f.push("\n```"+b.executableCode.language+"\n"+b.executableCode.code+"\n```\n"),b.codeExecutionResult&&f.push("\n```\n"+b.codeExecutionResult.output+"\n```\n");return f.length>0?f.join(""):""}(a)}if(a.promptFeedback)throw new K(`Text not available. ${Y(a)}`,a);return""},a.functionCall=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),X(a.candidates[0]))throw new K(`${Y(a)}`,a);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),V(a)[0]}if(a.promptFeedback)throw new K(`Function call not available. ${Y(a)}`,a)},a.functionCalls=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),X(a.candidates[0]))throw new K(`${Y(a)}`,a);return V(a)}if(a.promptFeedback)throw new K(`Function call not available. ${Y(a)}`,a)},a}function V(a){var b,c,d,e;let f=[];if(null==(c=null==(b=a.candidates)?void 0:b[0].content)?void 0:c.parts)for(let b of null==(e=null==(d=a.candidates)?void 0:d[0].content)?void 0:e.parts)b.functionCall&&f.push(b.functionCall);return f.length>0?f:void 0}let W=[u.RECITATION,u.SAFETY,u.LANGUAGE];function X(a){return!!a.finishReason&&W.includes(a.finishReason)}function Y(a){var b,c,d;let e="";if((!a.candidates||0===a.candidates.length)&&a.promptFeedback)e+="Response was blocked",(null==(b=a.promptFeedback)?void 0:b.blockReason)&&(e+=` due to ${a.promptFeedback.blockReason}`),(null==(c=a.promptFeedback)?void 0:c.blockReasonMessage)&&(e+=`: ${a.promptFeedback.blockReasonMessage}`);else if(null==(d=a.candidates)?void 0:d[0]){let b=a.candidates[0];X(b)&&(e+=`Candidate was blocked due to ${b.finishReason}`,b.finishMessage&&(e+=`: ${b.finishMessage}`))}return e}function Z(a){return this instanceof Z?(this.v=a,this):new Z(a)}"function"==typeof SuppressedError&&SuppressedError;let $=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function _(a){let b=[],c=a.getReader();for(;;){let{done:a,value:d}=await c.read();if(a)return U(function(a){let b=a[a.length-1],c={promptFeedback:null==b?void 0:b.promptFeedback};for(let b of a){if(b.candidates){let a=0;for(let d of b.candidates)if(c.candidates||(c.candidates=[]),c.candidates[a]||(c.candidates[a]={index:a}),c.candidates[a].citationMetadata=d.citationMetadata,c.candidates[a].groundingMetadata=d.groundingMetadata,c.candidates[a].finishReason=d.finishReason,c.candidates[a].finishMessage=d.finishMessage,c.candidates[a].safetyRatings=d.safetyRatings,d.content&&d.content.parts){c.candidates[a].content||(c.candidates[a].content={role:d.content.role||"user",parts:[]});let b={};for(let e of d.content.parts)e.text&&(b.text=e.text),e.functionCall&&(b.functionCall=e.functionCall),e.executableCode&&(b.executableCode=e.executableCode),e.codeExecutionResult&&(b.codeExecutionResult=e.codeExecutionResult),0===Object.keys(b).length&&(b.text=""),c.candidates[a].content.parts.push(b)}a++}b.usageMetadata&&(c.usageMetadata=b.usageMetadata)}return c}(b));b.push(d)}}async function aa(a,b,c,d){return function(a){let b,[c,d]=(b=a.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})).getReader(),new ReadableStream({start(a){let c="";return function d(){return b.read().then(({value:b,done:e})=>{let f;if(e)return c.trim()?void a.error(new J("Failed to parse stream")):void a.close();let g=(c+=b).match($);for(;g;){try{f=JSON.parse(g[1])}catch(b){a.error(new J(`Error parsing JSON response: "${g[1]}"`));return}a.enqueue(f),g=(c=c.substring(g[0].length)).match($)}return d()}).catch(a=>{let b=a;throw b.stack=a.stack,b="AbortError"===b.name?new N("Request aborted when reading from the stream"):new J("Error reading from the stream")})}()}})).tee();return{stream:function(a){return function(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d={},g("next"),g("throw"),g("return"),d[Symbol.asyncIterator]=function(){return this},d;function g(a){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})})}function h(a,b){try{var c;(c=e[a](b)).value instanceof Z?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}(this,arguments,function*(){let b=a.getReader();for(;;){let{value:a,done:c}=yield Z(b.read());if(c)break;yield yield Z(U(a))}})}(c),response:_(d)}}(await R(b,y.STREAM_GENERATE_CONTENT,a,!0,JSON.stringify(c),d))}async function ab(a,b,c,d){let e=await R(b,y.GENERATE_CONTENT,a,!1,JSON.stringify(c),d);return{response:U(await e.json())}}function ac(a){if(null!=a){if("string"==typeof a)return{role:"system",parts:[{text:a}]};if(a.text)return{role:"system",parts:[a]};if(a.parts)if(!a.role)return{role:"system",parts:a.parts};else return a}}function ad(a){let b=[];if("string"==typeof a)b=[{text:a}];else for(let c of a)"string"==typeof c?b.push({text:c}):b.push(c);var c=b;let d={role:"user",parts:[]},e={role:"function",parts:[]},f=!1,g=!1;for(let a of c)"functionResponse"in a?(e.parts.push(a),g=!0):(d.parts.push(a),f=!0);if(f&&g)throw new J("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!f&&!g)throw new J("No content is provided for sending chat message.");return f?d:e}function ae(a){let b;return b=a.contents?a:{contents:[ad(a)]},a.systemInstruction&&(b.systemInstruction=ac(a.systemInstruction)),b}let af=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],ag={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function ah(a){var b;if(void 0===a.candidates||0===a.candidates.length)return!1;let c=null==(b=a.candidates[0])?void 0:b.content;if(void 0===c||void 0===c.parts||0===c.parts.length)return!1;for(let a of c.parts)if(void 0===a||0===Object.keys(a).length||void 0!==a.text&&""===a.text)return!1;return!0}let ai="SILENT_ERROR";class aj{constructor(a,b,c,d={}){this.model=b,this.params=c,this._requestOptions=d,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=a,(null==c?void 0:c.history)&&(!function(a){let b=!1;for(let c of a){let{role:a,parts:d}=c;if(!b&&"user"!==a)throw new J(`First content should be with role 'user', got ${a}`);if(!I.includes(a))throw new J(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(I)}`);if(!Array.isArray(d))throw new J("Content should have 'parts' property with an array of Parts");if(0===d.length)throw new J("Each Content should have at least one part");let e={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let a of d)for(let b of af)b in a&&(e[b]+=1);let f=ag[a];for(let b of af)if(!f.includes(b)&&e[b]>0)throw new J(`Content with role '${a}' can't contain '${b}' part`);b=!0}}(c.history),this._history=c.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(a,b={}){var c,d,e,f,g,h;let i;await this._sendPromise;let j=ad(a),k={safetySettings:null==(c=this.params)?void 0:c.safetySettings,generationConfig:null==(d=this.params)?void 0:d.generationConfig,tools:null==(e=this.params)?void 0:e.tools,toolConfig:null==(f=this.params)?void 0:f.toolConfig,systemInstruction:null==(g=this.params)?void 0:g.systemInstruction,cachedContent:null==(h=this.params)?void 0:h.cachedContent,contents:[...this._history,j]},l=Object.assign(Object.assign({},this._requestOptions),b);return this._sendPromise=this._sendPromise.then(()=>ab(this._apiKey,this.model,k,l)).then(a=>{var b;if(ah(a.response)){this._history.push(j);let c=Object.assign({parts:[],role:"model"},null==(b=a.response.candidates)?void 0:b[0].content);this._history.push(c)}else{let b=Y(a.response);b&&console.warn(`sendMessage() was unsuccessful. ${b}. Inspect response object for details.`)}i=a}).catch(a=>{throw this._sendPromise=Promise.resolve(),a}),await this._sendPromise,i}async sendMessageStream(a,b={}){var c,d,e,f,g,h;await this._sendPromise;let i=ad(a),j={safetySettings:null==(c=this.params)?void 0:c.safetySettings,generationConfig:null==(d=this.params)?void 0:d.generationConfig,tools:null==(e=this.params)?void 0:e.tools,toolConfig:null==(f=this.params)?void 0:f.toolConfig,systemInstruction:null==(g=this.params)?void 0:g.systemInstruction,cachedContent:null==(h=this.params)?void 0:h.cachedContent,contents:[...this._history,i]},k=Object.assign(Object.assign({},this._requestOptions),b),l=aa(this._apiKey,this.model,j,k);return this._sendPromise=this._sendPromise.then(()=>l).catch(a=>{throw Error(ai)}).then(a=>a.response).then(a=>{if(ah(a)){this._history.push(i);let b=Object.assign({},a.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{let b=Y(a);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(a=>{a.message!==ai&&console.error(a)}),l}}async function ak(a,b,c,d){return(await R(b,y.COUNT_TOKENS,a,!1,JSON.stringify(c),d)).json()}async function al(a,b,c,d){return(await R(b,y.EMBED_CONTENT,a,!1,JSON.stringify(c),d)).json()}async function am(a,b,c,d){let e=c.requests.map(a=>Object.assign(Object.assign({},a),{model:b}));return(await R(b,y.BATCH_EMBED_CONTENTS,a,!1,JSON.stringify({requests:e}),d)).json()}class an{constructor(a,b,c={}){this.apiKey=a,this._requestOptions=c,b.model.includes("/")?this.model=b.model:this.model=`models/${b.model}`,this.generationConfig=b.generationConfig||{},this.safetySettings=b.safetySettings||[],this.tools=b.tools,this.toolConfig=b.toolConfig,this.systemInstruction=ac(b.systemInstruction),this.cachedContent=b.cachedContent}async generateContent(a,b={}){var c;let d=ae(a),e=Object.assign(Object.assign({},this._requestOptions),b);return ab(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(c=this.cachedContent)?void 0:c.name},d),e)}async generateContentStream(a,b={}){var c;let d=ae(a),e=Object.assign(Object.assign({},this._requestOptions),b);return aa(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(c=this.cachedContent)?void 0:c.name},d),e)}startChat(a){var b;return new aj(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(b=this.cachedContent)?void 0:b.name},a),this._requestOptions)}async countTokens(a,b={}){let c=function(a,b){var c;let d={model:null==b?void 0:b.model,generationConfig:null==b?void 0:b.generationConfig,safetySettings:null==b?void 0:b.safetySettings,tools:null==b?void 0:b.tools,toolConfig:null==b?void 0:b.toolConfig,systemInstruction:null==b?void 0:b.systemInstruction,cachedContent:null==(c=null==b?void 0:b.cachedContent)?void 0:c.name,contents:[]},e=null!=a.generateContentRequest;if(a.contents){if(e)throw new M("CountTokensRequest must have one of contents or generateContentRequest, not both.");d.contents=a.contents}else if(e)d=Object.assign(Object.assign({},d),a.generateContentRequest);else{let b=ad(a);d.contents=[b]}return{generateContentRequest:d}}(a,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),d=Object.assign(Object.assign({},this._requestOptions),b);return ak(this.apiKey,this.model,c,d)}async embedContent(a,b={}){let c="string"==typeof a||Array.isArray(a)?{content:ad(a)}:a,d=Object.assign(Object.assign({},this._requestOptions),b);return al(this.apiKey,this.model,c,d)}async batchEmbedContents(a,b={}){let c=Object.assign(Object.assign({},this._requestOptions),b);return am(this.apiKey,this.model,a,c)}}async function ao(a,b){try{let b=await fetch("http://localhost:3001/gemini",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userMessage:a})});if(!b.ok){if(400===b.status){let a=await b.json();console.error("Erro 400 no backend:",a.erro)}throw Error("Erro ao chamar backend Gemini")}return(await b.json()).resposta}catch(a){throw console.error("Erro no chatWithGemini:",a),Error("Erro ao gerar resposta do chatbot")}}new class{constructor(a){this.apiKey=a}getGenerativeModel(a,b){if(!a.model)throw new J("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new an(this.apiKey,a,b)}getGenerativeModelFromCachedContent(a,b,c){if(!a.name)throw new M("Cached content must contain a `name` field.");if(!a.model)throw new M("Cached content must contain a `model` field.");for(let c of["model","systemInstruction"])if((null==b?void 0:b[c])&&a[c]&&(null==b?void 0:b[c])!==a[c]){if("model"===c&&(b.model.startsWith("models/")?b.model.replace("models/",""):b.model)===(a.model.startsWith("models/")?a.model.replace("models/",""):a.model))continue;throw new M(`Different value for "${c}" specified in modelParams (${b[c]}) and cachedContent (${a[c]})`)}let d=Object.assign(Object.assign({},b),{model:a.model,tools:a.tools,toolConfig:a.toolConfig,systemInstruction:a.systemInstruction,cachedContent:a});return new an(this.apiKey,d,c)}}("AIzaSyBu7xIKEVTpAOIctC0HlZYPp6ZMJw2LQLc");var ap=a.i(23292);function aq(){let{isOpen:a,setIsOpen:b,messages:c,addMessage:d,selectedItems:e,removeSelectedItem:f,clearSelectedItems:g,clearMessages:h,isLoading:i,setIsLoading:j}=(0,B.useChatbotStore)(),[k,l]=(0,A.useState)(""),[m,n]=(0,A.useState)([]),o=(0,A.useRef)(null);(0,A.useEffect)(()=>{o.current?.scrollIntoView({behavior:"smooth"})},[c]);let p=async a=>{if(a.preventDefault(),k.trim()){d({id:Date.now().toString(),role:"user",content:k,timestamp:new Date}),l(""),j(!0);try{let a=await ao(k,e),b={id:(Date.now()+1).toString(),role:"assistant",content:a,timestamp:new Date};d(b)}catch(a){ap.toast.error("Erro ao gerar resposta do chatbot"),console.error(a)}finally{j(!1)}}};return a?(0,z.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-end justify-end z-50 p-4",children:(0,z.jsxs)(H.Card,{className:"w-full max-w-md h-[600px] flex flex-col bg-white border border-slate-200 shadow-xl",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[(0,z.jsx)("h3",{className:"font-semibold text-slate-900",children:"Assistente Culinário"}),(0,z.jsx)("button",{onClick:()=>b(!1),className:"text-slate-500 hover:text-slate-700",children:(0,z.jsx)(C.X,{className:"w-5 h-5"})})]}),(0,z.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===c.length?(0,z.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:(0,z.jsx)("p",{className:"text-slate-500 text-sm",children:"Selecione itens de sua dispensa e faça perguntas sobre receitas, preparo ou combinações de alimentos."})}):c.map(a=>(0,z.jsx)("div",{className:`flex ${"user"===a.role?"justify-end":"justify-start"}`,children:(0,z.jsxs)("div",{className:`max-w-xs px-4 py-2 rounded-lg ${"user"===a.role?"bg-green-600 text-white rounded-br-none":"bg-slate-100 text-slate-900 rounded-bl-none"}`,children:[(0,z.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:a.content}),(0,z.jsx)("span",{className:"text-xs opacity-70 mt-1 block",children:new Date(a.timestamp).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},a.id)),i&&(0,z.jsx)("div",{className:"flex justify-start",children:(0,z.jsx)("div",{className:"bg-slate-100 text-slate-900 px-4 py-2 rounded-lg rounded-bl-none",children:(0,z.jsxs)("div",{className:"flex gap-2",children:[(0,z.jsx)("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),(0,z.jsx)("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,z.jsx)("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,z.jsx)("div",{ref:o})]}),e.length>0&&(0,z.jsxs)("div",{className:"px-4 py-3 border-t border-slate-200",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsxs)("p",{className:"text-xs font-semibold text-slate-600",children:["ITENS SELECIONADOS (",e.length,")"]}),(0,z.jsx)("button",{onClick:g,className:"text-xs text-slate-500 hover:text-slate-700",children:"Limpar"})]}),(0,z.jsx)("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:e.map(a=>(0,z.jsxs)("div",{className:"flex items-center justify-between bg-slate-50 p-2 rounded text-xs",children:[(0,z.jsxs)("span",{className:"text-slate-700",children:[a.nome," (",a.peso," ",a.unidadeTipo,")"]}),(0,z.jsx)("button",{onClick:()=>f(a.id),className:"text-slate-400 hover:text-red-600",children:(0,z.jsx)(E.Trash2,{className:"w-3 h-3"})})]},a.id))})]}),(0,z.jsxs)("form",{onSubmit:p,className:"p-4 border-t border-slate-200 flex gap-2",children:[(0,z.jsx)(G.Input,{value:k,onChange:a=>l(a.target.value),placeholder:"Faça uma pergunta...",className:"flex-1 bg-slate-50 border-slate-200 text-slate-900",disabled:i}),(0,z.jsx)(F.Button,{type:"submit",disabled:i||!k.trim(),className:"bg-green-600 hover:bg-green-700 text-white",children:(0,z.jsx)(D.Send,{className:"w-4 h-4"})})]})]})}):null}a.s(["ChatbotModal",()=>aq],86073)}];

//# sourceMappingURL=_7657daef._.js.map