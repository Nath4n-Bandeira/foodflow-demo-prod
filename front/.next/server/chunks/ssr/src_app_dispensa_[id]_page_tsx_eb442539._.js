module.exports=[1032,a=>{"use strict";var b=a.i(87924),c=a.i(87532),d=a.i(21161),e=a.i(70106);let f=(0,e.default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var g=a.i(91965),h=a.i(13749),i=a.i(50522),j=a.i(72131),k=a.i(92082),l=a.i(95245),m=a.i(50944),n=a.i(23292),o=a.i(5434);function p({id:a,dispensaId:c}){let[d,e]=(0,j.useState)(!1),{register:f,handleSubmit:g}=(0,l.useForm)();async function h(b){console.log("Dados recebidos:",b);try{let d=await fetch(`http://localhost:3001/alimentos/dispensa/${c}/alimentos/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o.default.get("token")},body:JSON.stringify({nome:b.nome,peso:Number(b.peso)})});if(d.ok)console.log("Item enviado com sucesso!"),e(!1),window.location.reload(),n.toast.success("Item enviado com sucesso!");else{let a=d.headers.get("content-type");if(a&&a.includes("application/json")){let a=await d.json();console.error("Erro ao enviar:",a)}else{let a=await d.text();console.error("Erro ao enviar (texto):",a)}}}catch(a){console.error("Erro de rede ou outra falha:",a)}}return(0,m.useRouter)(),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{className:"px-4 py-2 bg-[#2c2c2c] text-[#ffffff] rounded-md hover:bg-[#1e1e1e] font-medium",onClick:()=>e(!0),children:"Editar"}),(0,b.jsx)(k.default,{isOpen:d,onClose:()=>e(!1),children:(0,b.jsxs)("form",{onSubmit:g(h),children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground",children:"Nome do alimento"}),(0,b.jsx)("input",{className:"mt-1 block w-full rounded-md border border-input bg-background text-foreground shadow-sm",type:"text",required:!0,...f("nome")}),(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mt-4",children:"Qtd\\Kg"}),(0,b.jsx)("input",{className:"mt-1 block w-full rounded-md border border-input bg-background text-foreground shadow-sm",type:"number",required:!0,...f("peso",{valueAsNumber:!0})}),(0,b.jsx)("button",{type:"submit",className:"mt-4 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium",children:"Salvar"})]})})]})}var q=a.i(20226),r=a.i(62435);let s=(0,q.create)()((0,r.persist)(a=>({messages:[],isLoading:!1,isOpen:!1,dispensaId:null,addMessage:b=>a(a=>({messages:[...a.messages,b]})),clearMessages:()=>a({messages:[]}),setIsLoading:b=>a({isLoading:b}),setIsOpen:b=>a({isOpen:b}),setDispensaId:b=>a({dispensaId:b})}),{name:"pantry-assistant-store"}));var t=a.i(33508);let u=(0,e.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var v=a.i(81560);let w=(0,e.default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var x=a.i(40695),y=a.i(5522),z=a.i(3130);function A(){let{isOpen:a,setIsOpen:c,dispensaId:d}=s(),[e,f]=(0,j.useState)([{nome:"",peso:0,perecivel:"NÃO",unidadeTipo:"KG",validade:""}]),[g,h]=(0,j.useState)(!1),i=(0,m.useRouter)(),k=(a,b,c)=>{let d=[...e];d[a]={...d[a],[b]:c},f(d)},l=async a=>{if(a.preventDefault(),!d)return void n.toast.error("Selecione uma dispensa primeiro");if(e.filter(a=>!a.nome.trim()||a.peso<=0).length>0)return void n.toast.error("Preencha todos os campos obrigatórios");h(!0);try{for(let a of e){let b={nome:a.nome,peso:Number(a.peso),perecivel:a.perecivel,unidadeTipo:a.unidadeTipo,dispensaId:d,...a.validade&&{validade:new Date(a.validade).toISOString()}};if(!(await fetch(`http://localhost:3001/alimentos/dispensa/${d}/alimentos`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o.default.get("token")},body:JSON.stringify(b)})).ok)throw Error(`Erro ao adicionar ${a.nome}`)}n.toast.success(`${e.length} ${1===e.length?"item adicionado":"itens adicionados"} com sucesso!`,{style:{background:"#00c950",color:"#ffffff"}}),f([{nome:"",peso:0,perecivel:"NÃO",unidadeTipo:"KG",validade:""}]),c(!1),setTimeout(()=>{i.refresh()},500)}catch(a){n.toast.error("Erro ao adicionar itens"),console.error(a)}finally{h(!1)}};return a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)(z.Card,{className:"w-full max-w-4xl max-h-[90vh] flex flex-col bg-white border border-slate-200 shadow-xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(w,{className:"w-5 h-5 text-green-600"}),(0,b.jsx)("h3",{className:"font-semibold text-slate-900",children:"Adicionar Itens à Dispensa"})]}),(0,b.jsx)("button",{onClick:()=>c(!1),className:"text-slate-500 hover:text-slate-700",children:(0,b.jsx)(t.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("form",{onSubmit:l,className:"flex flex-col flex-1 overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.map((a,c)=>(0,b.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50 relative",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h4",{className:"font-medium text-slate-900",children:["Produto ",c+1]}),e.length>1&&(0,b.jsx)("button",{type:"button",onClick:()=>{e.length>1&&f(e.filter((a,b)=>b!==c))},className:"text-red-500 hover:text-red-700 transition-colors",children:(0,b.jsx)(v.Trash2,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Nome do Item ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(y.Input,{value:a.nome,onChange:a=>k(c,"nome",a.target.value),placeholder:"Ex: Arroz, Feijão, Maçã",className:"bg-white border-slate-200",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Quantidade/Peso ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(y.Input,{type:"number",step:"0.01",min:"0.01",value:a.peso||"",onChange:a=>k(c,"peso",Number(a.target.value)),placeholder:"Ex: 2.5",className:"bg-white border-slate-200",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Unidade ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{value:a.unidadeTipo,onChange:a=>k(c,"unidadeTipo",a.target.value),className:"w-full rounded-md border border-slate-200 bg-white text-slate-900 shadow-sm px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,children:[(0,b.jsx)("option",{value:"KG",children:"Quilograma (KG)"}),(0,b.jsx)("option",{value:"PCT",children:"Pacote (PCT)"}),(0,b.jsx)("option",{value:"REDE",children:"Rede (REDE)"}),(0,b.jsx)("option",{value:"DUZIA",children:"Dúzia (DUZIA)"}),(0,b.jsx)("option",{value:"LT",children:"Litro (LT)"}),(0,b.jsx)("option",{value:"Unid",children:"Unidade (Unid)"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Perecível ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{value:a.perecivel,onChange:a=>k(c,"perecivel",a.target.value),className:"w-full rounded-md border border-slate-200 bg-white text-slate-900 shadow-sm px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,children:[(0,b.jsx)("option",{value:"NÃO",children:"Não"}),(0,b.jsx)("option",{value:"SIM",children:"Sim"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Data de Validade ",(0,b.jsx)("span",{className:"text-slate-500 text-xs",children:"(opcional)"})]}),(0,b.jsx)(y.Input,{type:"date",value:a.validade,onChange:a=>k(c,"validade",a.target.value),className:"bg-white border-slate-200"})]})]})]},c)),(0,b.jsxs)(x.Button,{type:"button",onClick:()=>{f([...e,{nome:"",peso:0,perecivel:"NÃO",unidadeTipo:"KG",validade:""}])},variant:"outline",className:"w-full border-dashed border-2 border-slate-300 hover:border-green-600 hover:bg-green-50 text-slate-700 hover:text-green-700 bg-transparent",children:[(0,b.jsx)(u,{className:"w-4 h-4 mr-2"}),"Adicionar outro produto"]})]}),(0,b.jsxs)("div",{className:"p-4 border-t border-slate-200 bg-white flex justify-end gap-3",children:[(0,b.jsx)(x.Button,{type:"button",onClick:()=>c(!1),variant:"outline",className:"border-slate-200 text-slate-700",disabled:g,children:"Cancelar"}),(0,b.jsx)(x.Button,{type:"submit",disabled:g,className:"bg-green-600 hover:bg-green-700 text-white min-w-[120px]",children:g?"Adicionando...":`Adicionar ${e.length} ${1===e.length?"Item":"Itens"}`})]})]})]})}):null}let B=(0,e.default)("UserRoundPlus",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M22 19h-6",key:"vcuq98"}]]);function C({dispensaId:a,onUserAdded:d}){let[e,f]=(0,j.useState)(!1),[g,h]=(0,j.useState)([]),[i,l]=(0,j.useState)([]),[m,p]=(0,j.useState)([]),[q,r]=(0,j.useState)(null),[s,u]=(0,j.useState)("");(0,j.useEffect)(()=>{(async()=>{if(e)try{let b=await fetch("http://localhost:3001/clientes",{headers:{Authorization:"Bearer "+(o.default.get("token")||"")}});if(!b.ok)throw Error("Erro ao buscar usuário logado");let c=await b.json();r(c.id);let[d,e]=await Promise.all([fetch("http://localhost:3001/clientes"),fetch(`http://localhost:3001/dispensa/${a}`)]),f=await d.json(),g=await e.json(),i=g?.membros||[];h(f),l(i);let j=new Set([...i.map(a=>a.id),c.id]),k=f.filter(a=>!j.has(a.id));p(k)}catch(a){console.error("Erro ao buscar dados:",a),n.toast.error("Erro ao carregar usuários.")}})()},[e,a]);let v=async b=>{try{let c=await fetch("http://localhost:3001/dispensaInvites",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+(o.default.get("token")||"")},body:JSON.stringify({dispensaId:a,convidadoId:b.id})});if(!c.ok){let a=await c.json();n.toast.error(`Erro ao enviar convite: ${a?.erro||"Erro desconhecido"}`);return}n.toast.success(`Convite enviado para "${b.nome}"!`),f(!1)}catch(a){console.error("Erro na requisição de convite:",a),n.toast.error("Erro de rede ao enviar convite.")}},w=m.filter(a=>a.nome?.toLowerCase().includes(s.toLowerCase())||a.email?.toLowerCase().includes(s.toLowerCase()));return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{className:"px-4 py-2 bg-[#2c2c2c] text-[#ffffff] rounded-md hover:bg-[#1e1e1e] font-medium flex items-center gap-2 transition-colors",onClick:()=>f(!0),children:[(0,b.jsx)("span",{children:"Convidar usuário"}),(0,b.jsx)(B,{size:16})]}),(0,b.jsx)(k.default,{isOpen:e,onClose:()=>f(!1),children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 py-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Convidar Usuário"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Envie um convite para participar da dispensa"})]}),(0,b.jsx)("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(t.X,{size:20,className:"text-gray-500"})})]}),(0,b.jsxs)("div",{className:"relative mb-6",children:[(0,b.jsx)(c.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,b.jsx)("input",{type:"text",placeholder:"Buscar por nome ou email...",value:s,onChange:a=>u(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-shadow"})]}),(0,b.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:0===w.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(B,{size:32,className:"text-gray-400"})}),(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:"Nenhum usuário encontrado"}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Tente buscar por outro nome ou email"})]}):w.map(a=>{let c;return(0,b.jsxs)("button",{onClick:()=>v(a),className:"w-full bg-white rounded-lg border border-gray-200 hover:border-green-500 hover:shadow-md transition-all duration-200 flex items-center p-4 gap-4 text-left group",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center shadow-sm group-hover:shadow-md group-hover:scale-105 transition-transform",children:(0,b.jsx)("span",{className:"text-xl font-bold text-white select-none",children:(c=a?.nome,c?.charAt(0).toUpperCase()||"U")})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-base font-semibold text-gray-900 truncate",children:a?.nome||"Nome do Usuário"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 truncate",children:a.email})]}),(0,b.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(B,{size:20,className:"text-green-600"})})]},a.id)})})]})})]})}var D=a.i(554),E=a.i(77071),F=a.i(28792),G=a.i(80032),H=a.i(27622),I=a.i(77368),J=a.i(30159);function K(a){var b=(0,I.useAppDispatch)();return(0,j.useEffect)(()=>{b((0,J.updatePolarOptions)(a))},[b,a]),null}var L=a.i(46364),M=a.i(87293),N=["layout"];function O(){return(O=Object.assign.bind()).apply(null,arguments)}var P={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},Q=(0,j.forwardRef)(function(a,b){var c,d=(0,M.resolveDefaultProps)(a.categoricalChartProps,P),{layout:e}=d,f=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(d,N),{chartName:g,defaultTooltipEventType:h,validateTooltipEventTypes:i,tooltipPayloadSearcher:k}=a;return j.createElement(E.RechartsStoreProvider,{preloadedState:{options:{chartName:g,defaultTooltipEventType:h,validateTooltipEventTypes:i,tooltipPayloadSearcher:k,eventEmitter:void 0}},reduxStoreName:null!=(c=d.id)?c:g},j.createElement(F.ChartDataContextProvider,{chartData:d.data}),j.createElement(G.ReportMainChartProps,{layout:e,margin:d.margin}),j.createElement(H.ReportChartProps,{baseValue:void 0,accessibilityLayer:d.accessibilityLayer,barCategoryGap:d.barCategoryGap,maxBarSize:d.maxBarSize,stackOffset:d.stackOffset,barGap:d.barGap,barSize:d.barSize,syncId:d.syncId,syncMethod:d.syncMethod,className:d.className,reverseStackOrder:d.reverseStackOrder}),j.createElement(K,{cx:d.cx,cy:d.cy,startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:d.innerRadius,outerRadius:d.outerRadius}),j.createElement(L.CategoricalChart,O({},f,{ref:b})))}),R=["item"],S={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},T=(0,j.forwardRef)((a,b)=>{var c=(0,M.resolveDefaultProps)(a,S);return j.createElement(Q,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:R,tooltipPayloadSearcher:D.arrayTooltipSearcher,categoricalChartProps:c,ref:b})}),U=a.i(88804),V=a.i(98621),W=a.i(44381),X=a.i(98563),Y=a.i(1351),Z=a.i(56295),$=a.i(12168),_=a.i(98382),aa=a.i(53242),ab=a.i(41386),ac=a.i(51434),ad=a=>a.graphicalItems.polarItems,ae=(0,W.createSelector)([aa.pickAxisType,ab.pickAxisId],$.itemAxisPredicate),af=(0,W.createSelector)([ad,$.selectBaseAxis,ae],$.combineGraphicalItemsSettings),ag=(0,W.createSelector)([af],$.combineGraphicalItemsData),ah=(0,W.createSelector)([ag,X.selectChartDataAndAlwaysIgnoreIndexes],$.combineDisplayedData),ai=(0,W.createSelector)([ah,$.selectBaseAxis,af],$.combineAppliedValues);(0,W.createSelector)([ah,$.selectBaseAxis,af],(a,b,c)=>c.length>0?a.flatMap(a=>c.flatMap(c=>{var d;return{value:(0,Z.getValueByDataKey)(a,null!=(d=b.dataKey)?d:c.dataKey),errorDomain:[]}})).filter(Boolean):(null==b?void 0:b.dataKey)!=null?a.map(a=>({value:(0,Z.getValueByDataKey)(a,b.dataKey),errorDomain:[]})):a.map(a=>({value:a,errorDomain:[]})));var aj=()=>void 0,ak=(0,W.createSelector)([ah,$.selectBaseAxis,af,$.selectAllErrorBarSettings,aa.pickAxisType],$.combineDomainOfAllAppliedNumericalValuesIncludingErrorValues),al=(0,W.createSelector)([$.selectBaseAxis,$.selectDomainDefinition,$.selectDomainFromUserPreference,aj,ak,aj,_.selectChartLayout,aa.pickAxisType],$.combineNumericalDomain),am=(0,W.createSelector)([$.selectBaseAxis,_.selectChartLayout,ah,ai,ac.selectStackOffsetType,aa.pickAxisType,al],$.combineAxisDomain),an=(0,W.createSelector)([am,$.selectBaseAxis,$.selectRealScaleType],$.combineNiceTicks);function ao(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function ap(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?ao(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ao(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}(0,W.createSelector)([$.selectBaseAxis,am,an,aa.pickAxisType],$.combineAxisDomainWithNiceTicks);var aq=(0,W.createSelector)([ad,(a,b)=>b],(a,b)=>a.filter(a=>"pie"===a.type).find(a=>a.id===b)),ar=[],as=(a,b,c)=>(null==c?void 0:c.length)===0?ar:c,at=(0,W.createSelector)([X.selectChartDataAndAlwaysIgnoreIndexes,aq,as],(a,b,c)=>{var d,{chartData:e}=a;if(null!=b&&((d=(null==b?void 0:b.data)!=null&&b.data.length>0?b.data:e)&&d.length||null==c||(d=c.map(a=>ap(ap({},b.presentationProps),a.props))),null!=d))return d}),au=(0,W.createSelector)([at,aq,as],(a,b,c)=>{if(null!=a&&null!=b)return a.map((a,d)=>{var e,f,g=(0,Z.getValueByDataKey)(a,b.nameKey,b.name);return f=null!=c&&null!=(e=c[d])&&null!=(e=e.props)&&e.fill?c[d].props.fill:"object"==typeof a&&null!=a&&"fill"in a?a.fill:b.fill,{value:(0,Z.getTooltipNameProp)(g,b.dataKey),color:f,payload:a,type:b.legendType}})}),av=(0,W.createSelector)([at,aq,as,Y.selectChartOffsetInternal],(a,b,c,d)=>{if(null!=b&&null!=a)return function(a){var b,c,d,{pieSettings:e,displayedData:f,cells:g,offset:h}=a,{cornerRadius:i,startAngle:j,endAngle:k,dataKey:l,nameKey:m,tooltipType:n}=e,o=Math.abs(e.minAngle),p=(0,aD.mathSign)(k-j)*Math.min(Math.abs(k-j),360),q=Math.abs(p),r=f.length<=1?0:null!=(b=e.paddingAngle)?b:0,s=f.filter(a=>0!==(0,Z.getValueByDataKey)(a,l,0)).length,t=q-s*o-(q>=360?s:s-1)*r,u=f.reduce((a,b)=>{var c=(0,Z.getValueByDataKey)(b,l,0);return a+((0,aD.isNumber)(c)?c:0)},0);return u>0&&(c=f.map((a,b)=>{var c,f=(0,Z.getValueByDataKey)(a,l,0),k=(0,Z.getValueByDataKey)(a,m,b),q=((a,b,c)=>{var d,{top:e,left:f,width:g,height:h}=b,i=(0,aC.getMaxRadius)(g,h),j=f+(0,aD.getPercentValue)(a.cx,g,g/2),k=e+(0,aD.getPercentValue)(a.cy,h,h/2),l=(0,aD.getPercentValue)(a.innerRadius,i,0);return{cx:j,cy:k,innerRadius:l,outerRadius:(d=a.outerRadius,"function"==typeof d?(0,aD.getPercentValue)(d(c),i,.8*i):(0,aD.getPercentValue)(d,i,.8*i)),maxRadius:a.maxRadius||Math.sqrt(g*g+h*h)/2}})(e,h,a),s=((0,aD.isNumber)(f)?f:0)/u,v=aY(aY({},a),g&&g[b]&&g[b].props),w=(c=b?d.endAngle+(0,aD.mathSign)(p)*r*(0!==f):j)+(0,aD.mathSign)(p)*((0!==f?o:0)+s*t),x=(c+w)/2,y=(q.innerRadius+q.outerRadius)/2,z=[{name:k,value:f,payload:v,dataKey:l,type:n}],A=(0,aC.polarToCartesian)(q.cx,q.cy,y,x);return d=aY(aY(aY(aY({},e.presentationProps),{},{percent:s,cornerRadius:"string"==typeof i?parseFloat(i):i,name:k,tooltipPayload:z,midAngle:x,middleRadius:y,tooltipPosition:A},v),q),{},{value:f,startAngle:c,endAngle:w,payload:v,paddingAngle:(0,aD.mathSign)(p)*r})})),c}({offset:d,pieSettings:b,displayedData:a,cells:c})}),aw=a.i(88949),ax=a.i(13667),ay=a.i(20299),az=a.i(67149),aA=a.i(37082),aB=a.i(2321),aC=a.i(30261),aD=a.i(68932),aE=a.i(52517),aF=a.i(56998),aG=a.i(89205),aH=a.i(12791),aI=a.i(86505),aJ=a.i(92430),aK=a.i(5911),aL=a.i(62320),aM=a.i(46780),aN=a.i(77025),aO=a.i(72853),aP=a.i(76342),aQ=a.i(36319),aR=a.i(96268),aS=a.i(31080),aT=["key"],aU=["onMouseEnter","onClick","onMouseLeave"],aV=["id"],aW=["id"];function aX(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function aY(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?aX(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):aX(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function aZ(){return(aZ=Object.assign.bind()).apply(null,arguments)}function a$(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function a_(a){var b=(0,j.useMemo)(()=>(0,aA.findAllByType)(a.children,az.Cell),[a.children]),c=(0,I.useAppSelector)(c=>au(c,a.id,b));return null==c?null:j.createElement(aJ.SetPolarLegendPayload,{legendPayload:c})}var a0=j.memo(a=>{var{dataKey:b,nameKey:c,sectors:d,stroke:e,strokeWidth:f,fill:g,name:h,hide:i,tooltipType:k}=a,l={dataDefinedOnItem:d.map(a=>a.tooltipPayload),positions:d.map(a=>a.tooltipPosition),settings:{stroke:e,strokeWidth:f,fill:g,dataKey:b,nameKey:c,name:(0,Z.getTooltipNameProp)(h,b),hide:i,type:k,color:g,unit:""}};return j.createElement(aH.SetTooltipEntrySettings,{tooltipEntrySettings:l})});function a1(a){var{sectors:b,props:c,showLabels:d}=a,{label:e,labelLine:f,dataKey:g}=c;if(!d||!e||!b)return null;var h=(0,aO.svgPropertiesNoEvents)(c),i=(0,aO.svgPropertiesNoEventsFromUnknown)(e),k=(0,aO.svgPropertiesNoEventsFromUnknown)(f),l="object"==typeof e&&"offsetRadius"in e&&"number"==typeof e.offsetRadius&&e.offsetRadius||20,m=b.map((a,b)=>{var c,d,m=(a.startAngle+a.endAngle)/2,n=(0,aC.polarToCartesian)(a.cx,a.cy,a.outerRadius+l,m),o=aY(aY(aY(aY({},h),a),{},{stroke:"none"},i),{},{index:b,textAnchor:(c=n.x)>(d=a.cx)?"start":c<d?"end":"middle"},n),p=aY(aY(aY(aY({},h),a),{},{fill:"none",stroke:a.fill},k),{},{index:b,points:[(0,aC.polarToCartesian)(a.cx,a.cy,a.outerRadius,m),n],key:"line"});return j.createElement(aR.ZIndexLayer,{zIndex:aS.DefaultZIndexes.label,key:"label-".concat(a.startAngle,"-").concat(a.endAngle,"-").concat(a.midAngle,"-").concat(b)},j.createElement(aw.Layer,null,f&&((a,b)=>{if(j.isValidElement(a))return j.cloneElement(a,b);if("function"==typeof a)return a(b);var c=(0,V.clsx)("recharts-pie-label-line","boolean"!=typeof a?a.className:""),{key:d}=b,e=a$(b,aT);return j.createElement(ax.Curve,aZ({},e,{type:"linear",className:c}))})(f,p),((a,b,c)=>{if(j.isValidElement(a))return j.cloneElement(a,b);var d=c;if("function"==typeof a&&(d=a(b),j.isValidElement(d)))return d;var e=(0,V.clsx)("recharts-pie-label-text",a&&"object"==typeof a&&"className"in a&&"string"==typeof a.className?a.className:"");return j.createElement(ay.Text,aZ({},b,{alignmentBaseline:"middle",className:e}),d)})(e,o,(0,Z.getValueByDataKey)(a,g))))});return j.createElement(aw.Layer,{className:"recharts-pie-labels"},m)}function a2(a){var{sectors:b,props:c,showLabels:d}=a,{label:e}=c;return"object"==typeof e&&null!=e&&"position"in e?j.createElement(aQ.LabelListFromLabelProp,{label:e}):j.createElement(a1,{sectors:b,props:c,showLabels:d})}function a3(a){var{sectors:b,activeShape:c,inactiveShape:d,allOtherPieProps:e,shape:f}=a,g=(0,I.useAppSelector)(aI.selectActiveTooltipIndex),{onMouseEnter:h,onClick:i,onMouseLeave:k}=e,l=a$(e,aU),m=(0,aG.useMouseEnterItemDispatch)(h,e.dataKey),n=(0,aG.useMouseLeaveItemDispatch)(k),o=(0,aG.useMouseClickItemDispatch)(i,e.dataKey);return null==b||0===b.length?null:j.createElement(j.Fragment,null,b.map((a,h)=>{if((null==a?void 0:a.startAngle)===0&&(null==a?void 0:a.endAngle)===0&&1!==b.length)return null;var i=String(h)===g,k=c&&i?c:g?d:null,p=aY(aY({},a),{},{stroke:a.stroke,tabIndex:-1,[aK.DATA_ITEM_INDEX_ATTRIBUTE_NAME]:h,[aK.DATA_ITEM_DATAKEY_ATTRIBUTE_NAME]:e.dataKey});return j.createElement(aw.Layer,aZ({key:"sector-".concat(null==a?void 0:a.startAngle,"-").concat(null==a?void 0:a.endAngle,"-").concat(a.midAngle,"-").concat(h),tabIndex:-1,className:"recharts-pie-sector"},(0,aE.adaptEventsOfChild)(l,a,h),{onMouseEnter:m(a,h),onMouseLeave:n(a,h),onClick:o(a,h)}),j.createElement(aF.Shape,aZ({option:null!=f?f:k,shapeType:"sector",isActive:i},p)))}))}function a4(a){var{showLabels:b,sectors:c,children:d}=a,e=(0,j.useMemo)(()=>b&&c?c.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})):[],[c,b]);return j.createElement(aQ.PolarLabelListContextProvider,{value:b?e:void 0},d)}function a5(a){var{props:b,previousSectorsRef:c}=a,{sectors:d,isAnimationActive:e,animationBegin:f,animationDuration:g,animationEasing:h,activeShape:i,inactiveShape:k,onAnimationStart:l,onAnimationEnd:m}=b,n=(0,aL.useAnimationId)(b,"recharts-pie-"),o=c.current,[p,q]=(0,j.useState)(!1),r=(0,j.useCallback)(()=>{"function"==typeof m&&m(),q(!1)},[m]),s=(0,j.useCallback)(()=>{"function"==typeof l&&l(),q(!0)},[l]);return j.createElement(a4,{showLabels:!p,sectors:d},j.createElement(aP.JavascriptAnimate,{animationId:n,begin:f,duration:g,isActive:e,easing:h,onAnimationStart:s,onAnimationEnd:r,key:n},a=>{var e=[],f=d&&d[0],g=null==f?void 0:f.startAngle;return null==d||d.forEach((b,c)=>{var d=o&&o[c],f=c>0?(0,U.default)(b,"paddingAngle",0):0;if(d){var h=(0,aD.interpolate)(d.endAngle-d.startAngle,b.endAngle-b.startAngle,a),i=aY(aY({},b),{},{startAngle:g+f,endAngle:g+h+f});e.push(i),g=i.endAngle}else{var{endAngle:j,startAngle:k}=b,l=(0,aD.interpolate)(0,j-k,a),m=aY(aY({},b),{},{startAngle:g+f,endAngle:g+l+f});e.push(m),g=m.endAngle}}),c.current=e,j.createElement(aw.Layer,null,j.createElement(a3,{sectors:e,activeShape:i,inactiveShape:k,allOtherPieProps:b,shape:b.shape}))}),j.createElement(a2,{showLabels:!p,sectors:d,props:b}),b.children)}var a6={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!aB.Global.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:aS.DefaultZIndexes.area};function a7(a){var{id:b}=a,c=a$(a,aV),{hide:d,className:e,rootTabIndex:f}=a,g=(0,j.useMemo)(()=>(0,aA.findAllByType)(a.children,az.Cell),[a.children]),h=(0,I.useAppSelector)(a=>av(a,b,g)),i=(0,j.useRef)(null),k=(0,V.clsx)("recharts-pie",e);return d||null==h?(i.current=null,j.createElement(aw.Layer,{tabIndex:f,className:k})):j.createElement(aR.ZIndexLayer,{zIndex:a.zIndex},j.createElement(a0,{dataKey:a.dataKey,nameKey:a.nameKey,sectors:h,stroke:a.stroke,strokeWidth:a.strokeWidth,fill:a.fill,name:a.name,hide:a.hide,tooltipType:a.tooltipType}),j.createElement(aw.Layer,{tabIndex:f,className:k},j.createElement(a5,{props:aY(aY({},c),{},{sectors:h}),previousSectorsRef:i})))}function a8(a){var b=(0,M.resolveDefaultProps)(a,a6),{id:c}=b,d=a$(b,aW),e=(0,aO.svgPropertiesNoEvents)(d);return j.createElement(aM.RegisterGraphicalItemId,{id:c,type:"pie"},a=>j.createElement(j.Fragment,null,j.createElement(aN.SetPolarGraphicalItem,{type:"pie",id:a,data:d.data,dataKey:d.dataKey,hide:d.hide,angleAxisId:0,radiusAxisId:0,name:d.name,nameKey:d.nameKey,tooltipType:d.tooltipType,legendType:d.legendType,fill:d.fill,cx:d.cx,cy:d.cy,startAngle:d.startAngle,endAngle:d.endAngle,paddingAngle:d.paddingAngle,minAngle:d.minAngle,innerRadius:d.innerRadius,outerRadius:d.outerRadius,cornerRadius:d.cornerRadius,presentationProps:e,maxRadius:b.maxRadius}),j.createElement(a_,aZ({},d,{id:a})),j.createElement(a7,aZ({},d,{id:a}))))}a8.displayName="Pie";var a9=a.i(59854),ba=a.i(35112),bb=a.i(20353),bc=a.i(3190),bd=a.i(76805);function be(){return(be=Object.assign.bind()).apply(null,arguments)}function bf(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}var bg={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function bh(a){var b,{data:c,iconType:d,inactiveColor:e}=a,f=32/6,g=32/3,h=c.inactive?e:c.color,i=null!=d?d:c.type;if("none"===i)return null;if("plainline"===i)return j.createElement("line",{strokeWidth:4,fill:"none",stroke:h,strokeDasharray:null==(b=c.payload)?void 0:b.strokeDasharray,x1:0,y1:16,x2:32,y2:16,className:"recharts-legend-icon"});if("line"===i)return j.createElement("path",{strokeWidth:4,fill:"none",stroke:h,d:"M0,".concat(16,"h").concat(g,"\n            A").concat(f,",").concat(f,",0,1,1,").concat(2*g,",").concat(16,"\n            H").concat(32,"M").concat(2*g,",").concat(16,"\n            A").concat(f,",").concat(f,",0,1,1,").concat(g,",").concat(16),className:"recharts-legend-icon"});if("rect"===i)return j.createElement("path",{stroke:"none",fill:h,d:"M0,".concat(4,"h").concat(32,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(j.isValidElement(c.legendIcon)){var k=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?bf(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):bf(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({},c);return delete k.legendIcon,j.cloneElement(c.legendIcon,k)}return j.createElement(bd.Symbols,{fill:h,cx:16,cy:16,size:32,sizeType:"diameter",type:i})}function bi(a){var{payload:b,iconSize:c,layout:d,formatter:e,inactiveColor:f,iconType:g}=a,h={x:0,y:0,width:32,height:32},i={display:"horizontal"===d?"inline-block":"block",marginRight:10},k={display:"inline-block",verticalAlign:"middle",marginRight:4};return b.map((b,d)=>{var l=b.formatter||e,m=(0,V.clsx)({"recharts-legend-item":!0,["legend-item-".concat(d)]:!0,inactive:b.inactive});if("none"===b.type)return null;var n=b.inactive?f:b.color,o=l?l(b.value,b,d):b.value;return j.createElement("li",be({className:m,style:i,key:"legend-item-".concat(d)},(0,aE.adaptEventsOfChild)(a,b,d)),j.createElement(bc.Surface,{width:c,height:c,viewBox:h,style:k,"aria-label":"".concat(o," legend icon")},j.createElement(bh,{data:b,iconType:g,inactiveColor:f})),j.createElement("span",{className:"recharts-legend-item-text",style:{color:n}},o))})}var bj=a=>{var b=(0,M.resolveDefaultProps)(a,bg),{payload:c,layout:d,align:e}=b;return c&&c.length?j.createElement("ul",{className:"recharts-default-legend",style:{padding:0,margin:0,textAlign:"horizontal"===d?e:"left"}},j.createElement(bi,be({},b,{payload:c}))):null},bk=a.i(63643),bl=a.i(24993),bm=a.i(38620),bn=a.i(21402),bo=["contextPayload"];function bp(){return(bp=Object.assign.bind()).apply(null,arguments)}function bq(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function br(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?bq(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):bq(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function bs(a){return a.value}function bt(a){var{contextPayload:b}=a,c=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,bo),d=(0,bk.getUniqPayload)(b,a.payloadUniqBy,bs),e=br(br({},c),{},{payload:d});return j.isValidElement(a.content)?j.cloneElement(a.content,e):"function"==typeof a.content?j.createElement(a.content,e):j.createElement(bj,e)}function bu(a){var b=(0,I.useAppDispatch)();return(0,j.useEffect)(()=>{b((0,bn.setLegendSettings)(a))},[b,a]),null}function bv(a){var b=(0,I.useAppDispatch)();return(0,j.useEffect)(()=>(b((0,bn.setLegendSize)(a)),()=>{b((0,bn.setLegendSize)({width:0,height:0}))}),[b,a]),null}var bw={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function bx(a){var b,c=(0,M.resolveDefaultProps)(a,bw),d=(0,I.useAppSelector)(bl.selectLegendPayload),e=(0,bb.useLegendPortal)(),f=(0,_.useMargin)(),{width:g,height:h,wrapperStyle:i,portal:k}=c,[l,m]=(0,bm.useElementOffset)([d]),n=(0,_.useChartWidth)(),o=(0,_.useChartHeight)();if(null==n||null==o)return null;var p=n-((null==f?void 0:f.left)||0)-((null==f?void 0:f.right)||0),q=(b=c.layout,"vertical"===b&&(0,aD.isNumber)(h)?{height:h}:"horizontal"===b?{width:g||p}:null),r=k?i:br(br({position:"absolute",width:(null==q?void 0:q.width)||g||"auto",height:(null==q?void 0:q.height)||h||"auto"},function(a,b,c,d,e,f){var g,h,{layout:i,align:j,verticalAlign:k}=b;return a&&(void 0!==a.left&&null!==a.left||void 0!==a.right&&null!==a.right)||(g="center"===j&&"vertical"===i?{left:((d||0)-f.width)/2}:"right"===j?{right:c&&c.right||0}:{left:c&&c.left||0}),a&&(void 0!==a.top&&null!==a.top||void 0!==a.bottom&&null!==a.bottom)||(h="middle"===k?{top:((e||0)-f.height)/2}:"bottom"===k?{bottom:c&&c.bottom||0}:{top:c&&c.top||0}),br(br({},g),h)}(i,c,f,n,o,l)),i),s=null!=k?k:e;if(null==s||null==d)return null;var t=j.createElement("div",{className:"recharts-legend-wrapper",style:r,ref:m},j.createElement(bu,{layout:c.layout,align:c.align,verticalAlign:c.verticalAlign,itemSorter:c.itemSorter}),!k&&j.createElement(bv,{width:l.width,height:l.height}),j.createElement(bt,bp({},c,q,{margin:f,chartWidth:n,chartHeight:o,contextPayload:d})));return(0,ba.createPortal)(t,s)}bx.displayName="Legend";var by=a.i(48662),bz=a.i(7706),bA=a.i(38246),bB=a.i(81554);function bC(){let[a,e]=(0,j.useState)([]),[k,l]=(0,j.useState)(null),[q,r]=(0,j.useState)(null),[t,u]=(0,j.useState)(!1),[v,w]=(0,j.useState)(!1),[B,D]=(0,j.useState)([]),E=(0,m.useParams)(),F=E?.id,G=(0,m.useRouter)(),[H,I]=(0,j.useState)(!1),[J,K]=(0,j.useState)(!1),[L,M]=(0,j.useState)([]),[N,O]=(0,j.useState)(""),[P,Q]=(0,j.useState)(!1),{addSelectedItem:R,removeSelectedItem:S,selectedItems:U}=(0,bB.useChatbotStore)(),{setIsOpen:V,setDispensaId:W}=s(),[X,Y]=(0,j.useState)(1),[Z,$]=(0,j.useState)(1),_=(0,j.useCallback)(async()=>{if(F)try{let a=await fetch(`http://localhost:3001/alimentos/dispensa/${F}/alimentos`),b=await a.json();e(b)}catch(a){console.error("Falha ao buscar alimentos:",a)}},[F]);function aa(){l(null)}async function ab(a){try{await fetch(`http://localhost:3001/alimentos/${a}`,{method:"DELETE"}),e(b=>b.filter(b=>b.id!==a)),aa(),n.toast.success("Item deletado com sucesso!",{style:{background:"#00c950",color:"#ffffff"}})}catch(a){console.error("Erro ao deletar alimento:",a),n.toast.error("Erro ao deletar item. Tente novamente.")}}async function ac(a){try{await fetch(`http://localhost:3001/dispensa/${a}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o.default.get("token")}}),r(null),u(!1),n.toast.success("Dispensa deletada com sucesso!",{style:{background:"#00c950",color:"#ffffff"}}),G.push("/perfil")}catch(a){console.error("Erro ao deletar dispensa:",a),n.toast.error("Erro ao deletar dispensa. Tente novamente.")}}(0,j.useEffect)(()=>{o.default.get("token")?I(!0):G.replace("/")},[]),(0,j.useEffect)(()=>{async function a(){try{let a=await fetch(`http://localhost:3001/dispensa/${F}`),b=await a.json();r(b),D(b.membros||[])}catch(a){console.error("Falha ao buscar dados da dispensa:",a)}}F&&(_(),a(),W(Number(F)))},[F,_,W]),(0,j.useEffect)(()=>{let a=()=>{_()};return window.addEventListener("pantryUpdated",a),()=>window.removeEventListener("pantryUpdated",a)},[_]);let ad=["#8884d8","#82ca9d","#ffc658","#ff7f50","#a28fd0","#ffb6b9","#c6e2ff"],ae=a.filter(a=>a.nome.toLowerCase().includes(N.toLowerCase())),af=Math.ceil(ae.length/10),ag=(X-1)*10,ah=ae.slice(ag,ag+10),ai=Math.ceil(a.length/10),aj=(Z-1)*10,ak=a.slice(aj,aj+10);return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#f8fafc] to-[#e2e8f0] py-4 sm:py-8 px-2 sm:px-4",children:[(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-2 sm:px-6 py-4 sm:py-8",children:[(0,b.jsxs)("div",{className:"mb-4 sm:mb-8",children:[(0,b.jsxs)("h1",{className:"text-[#1d293d] text-xl sm:text-2xl font-semibold mb-4 sm:mb-6",children:["Controle da dispensa ",q?.nome]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,b.jsx)(c.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#90a1b9] w-4 h-4"}),(0,b.jsx)(y.Input,{placeholder:"Buscar item...",className:"pl-10 bg-white border-[#e2e8f0] text-[#444444] h-11 sm:h-10 text-base",value:N,onChange:a=>O(a.target.value)})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(x.Button,{onClick:()=>Q(!0),className:"bg-[#2c2c2c] hover:bg-[#1e1e1e] text-white flex-1 sm:flex-none h-11 sm:h-10 text-sm sm:text-base",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"Adicione um item"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Adicionar"})]}),(0,b.jsxs)(x.Button,{variant:"outline",className:"border-[#e2e8f0] text-[#444444] bg-transparent h-11 sm:h-10",onClick:()=>u(!0),children:[(0,b.jsx)(d.Settings,{className:"w-4 h-4 sm:mr-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Config"})]}),(0,b.jsxs)(x.Button,{className:"bg-[#00c950] hover:bg-[#00a63e] text-white h-11 sm:h-10",onClick:()=>w(!0),children:[(0,b.jsx)(f,{className:"w-4 h-4 sm:mr-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Gráfico"})]}),(0,b.jsx)(bA.default,{href:`/relatorios/${F}`,className:"flex-1 sm:flex-none",children:(0,b.jsxs)(x.Button,{className:"bg-[#00c950] hover:bg-[#00a63e] text-white w-full h-11 sm:h-10",children:[(0,b.jsx)(g.History,{className:"w-4 h-4 sm:mr-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Histórico"})]})})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 mb-4 sm:mb-8",children:[(0,b.jsxs)(z.Card,{className:"bg-white border-[#e2e8f0]",children:[(0,b.jsx)(z.CardHeader,{className:"pb-3",children:(0,b.jsx)(z.CardTitle,{className:"text-[#1d293d] text-base sm:text-lg",children:"Funcionários"})}),(0,b.jsxs)(z.CardContent,{className:"space-y-3",children:[B.length>0?B.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(bz.Avatar,{className:"w-8 h-8",children:(0,b.jsx)(bz.AvatarFallback,{className:"bg-[#c6d2ff] text-[#432dd7] text-xs",children:a.nome.split(" ").map(a=>a[0]).join("").slice(0,2).toUpperCase()})}),(0,b.jsx)("span",{className:"text-[#444444] text-sm",children:a.nome})]},c)):(0,b.jsx)("p",{className:"text-sm text-[#90a1b9] text-center py-4",children:"Nenhum funcionário cadastrado."}),(0,b.jsx)(C,{dispensaId:Number(F),onUserAdded:a=>{D(b=>b.some(b=>b.id===a.id)?b:[...b,a])}})]})]}),(0,b.jsxs)(z.Card,{className:"lg:col-span-2 bg-white border-[#e2e8f0]",children:[(0,b.jsxs)(z.CardHeader,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 pb-3",children:[(0,b.jsx)(z.CardTitle,{className:"text-[#1d293d] text-base sm:text-lg",children:"Seu estoque"}),(0,b.jsx)(x.Button,{className:"bg-[#00c950] hover:bg-[#00a63e] text-white w-full sm:w-auto text-sm h-10",onClick:()=>K(a=>!a),children:J?"Fechar":"Registrar uso"})]}),(0,b.jsxs)(z.CardContent,{children:[(0,b.jsx)("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:(0,b.jsx)("div",{className:"min-w-full inline-block align-middle",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-[#e2e8f0]",children:[(0,b.jsx)("th",{className:"text-left py-3 px-2 sm:px-0 text-[#62748e] text-xs sm:text-sm font-medium",children:"ID"}),(0,b.jsx)("th",{className:"text-left py-3 px-2 sm:px-0 text-[#62748e] text-xs sm:text-sm font-medium",children:"Nome"}),(0,b.jsx)("th",{className:"text-right py-3 px-2 sm:px-0 text-[#62748e] text-xs sm:text-sm font-medium",children:"Qtd"}),(0,b.jsx)("th",{className:"text-center py-3 px-2 sm:px-0 text-[#62748e] text-xs sm:text-sm font-medium",children:"Chat"})]})}),(0,b.jsx)("tbody",{children:ah.length>0?ah.map(a=>(0,b.jsxs)("tr",{className:"border-b border-[#f1f5f9] hover:bg-[#f8fafc] cursor-pointer",onClick:()=>l(a),children:[(0,b.jsx)("td",{className:"py-3 px-2 sm:px-0 text-[#444444] text-xs sm:text-sm",children:a.id}),(0,b.jsx)("td",{className:"py-3 px-2 sm:px-0 text-[#444444] text-xs sm:text-sm truncate max-w-[120px] sm:max-w-none",children:a.nome}),(0,b.jsxs)("td",{className:"py-3 px-2 sm:px-0 text-right text-[#444444] text-xs sm:text-sm font-medium whitespace-nowrap",children:[a.peso," ",a.unidadeTipo]}),(0,b.jsx)("td",{className:"py-3 px-2 sm:px-0 text-center",children:(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),U.some(b=>b.id===a.id)?(S(a.id),n.toast.success("Item removido do chat",{style:{background:"#00c950",color:"#ffffff"}})):(R({id:a.id,nome:a.nome,peso:a.peso,unidadeTipo:a.unidadeTipo}),n.toast.success("Item adicionado ao chat",{style:{background:"#00c950",color:"#ffffff"}}))},className:`px-2 sm:px-3 py-1 rounded text-xs font-semibold transition-colors ${U.some(b=>b.id===a.id)?"bg-green-600 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:U.some(b=>b.id===a.id)?"✓":"+"})})]},a.id)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"text-center py-8 text-[#90a1b9] text-sm",children:N?"Nenhum item encontrado.":"Nenhum item no estoque."})})})]})})}),af>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-[#e2e8f0]",children:[(0,b.jsx)(x.Button,{variant:"outline",size:"sm",onClick:()=>Y(a=>Math.max(1,a-1)),disabled:1===X,className:"h-9",children:(0,b.jsx)(h.ChevronLeft,{className:"w-4 h-4"})}),(0,b.jsxs)("span",{className:"text-sm text-[#444444]",children:["Página ",X," de ",af]}),(0,b.jsx)(x.Button,{variant:"outline",size:"sm",onClick:()=>Y(a=>Math.min(af,a+1)),disabled:X===af,className:"h-9",children:(0,b.jsx)(i.ChevronRight,{className:"w-4 h-4"})})]})]})]})]}),J&&(0,b.jsxs)(z.Card,{className:"bg-white border-[#e2e8f0]",children:[(0,b.jsx)(z.CardHeader,{children:(0,b.jsx)(z.CardTitle,{className:"text-[#1d293d] text-base sm:text-lg",children:"Registrar uso de alimentos"})}),(0,b.jsx)(z.CardContent,{className:"space-y-4",children:(0,b.jsxs)("form",{onSubmit:async b=>{b.preventDefault();let c=new FormData(b.currentTarget),d=a.map(a=>{let b=c.get(`alimento-${a.id}`),d=Number(b);return b&&!isNaN(d)&&d>0?{id:a.id,quantidade:d}:null}).filter(Boolean);if(0===d.length)return alert("Nenhuma quantidade válida informada.");try{let a=await fetch("http://localhost:3001/alimentos/relatorio",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o.default.get("token")},body:JSON.stringify({alimentos:d,dispensaId:Number(F)})});if(a.ok)n.toast.success("Uso registrado com sucesso!",{style:{background:"#00c950",color:"#ffffff"}}),location.reload();else{let b=await a.json();console.error(b),n.toast.error("Erro ao registrar uso: "+(b?.error||"Erro desconhecido"))}}catch(a){console.error(a),n.toast.error("Erro inesperado.")}},children:[ak.map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4 p-3 bg-[#f8fafc] rounded-lg",children:[(0,b.jsx)("div",{className:"w-full sm:w-32 text-[#444444] text-sm font-medium",children:a.nome}),(0,b.jsx)("div",{className:"flex-1 w-full",children:(0,b.jsx)(y.Input,{type:"number",step:"0.01",name:`alimento-${a.id}`,placeholder:`Qtd em ${a.unidadeTipo.toLowerCase()}`,className:"bg-white border-[#e2e8f0] text-[#444444] h-11 text-base",inputMode:"decimal"})}),(0,b.jsxs)("div",{className:"text-[#90a1b9] text-xs sm:text-sm w-full sm:w-32 text-left sm:text-right",children:["Disponível: ",a.peso]})]},c)),ai>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-[#e2e8f0]",children:[(0,b.jsx)(x.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>$(a=>Math.max(1,a-1)),disabled:1===Z,className:"h-9",children:(0,b.jsx)(h.ChevronLeft,{className:"w-4 h-4"})}),(0,b.jsxs)("span",{className:"text-sm text-[#444444]",children:["Página ",Z," de ",ai]}),(0,b.jsx)(x.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>$(a=>Math.min(ai,a+1)),disabled:Z===ai,className:"h-9",children:(0,b.jsx)(i.ChevronRight,{className:"w-4 h-4"})})]}),(0,b.jsx)("div",{className:"pt-4",children:(0,b.jsx)(x.Button,{type:"submit",className:"bg-[#00c950] hover:bg-[#00a63e] text-white w-full sm:w-auto h-11",children:"Enviar Registro"})})]})})]}),k&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-xl border border-[#e2e8f0]",children:[(0,b.jsx)("button",{onClick:aa,className:"float-right font-bold text-[#90a1b9] hover:text-[#1d293d]",children:"✕"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-[#1d293d] mb-4",children:k.nome}),(0,b.jsxs)("p",{className:"mb-2 text-[#444444]",children:[(0,b.jsx)("strong",{children:"ID:"})," ",k.id]}),(0,b.jsxs)("p",{className:"mb-2 text-[#444444]",children:[(0,b.jsx)("strong",{children:"Peso:"})," ",k.peso," ",k.unidadeTipo]}),(0,b.jsxs)("p",{className:"mb-2 text-[#444444]",children:[(0,b.jsx)("strong",{children:"Tipo de Unidade:"})," ",k.unidadeTipo]}),k.perecivel&&(0,b.jsxs)("p",{className:"mb-4 text-[#444444]",children:[(0,b.jsx)("strong",{children:"Perecível:"})," ",k.perecivel]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,b.jsx)(p,{id:Number(k?.id),dispensaId:Number(F)}),(0,b.jsx)("button",{onClick:()=>{k&&ab(k.id)},className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors",children:"Deletar"})]})]})}),t&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl max-w-md w-full shadow-xl border border-[#e2e8f0]",children:[(0,b.jsx)("button",{onClick:()=>u(!1),className:"float-right font-bold text-[#90a1b9] hover:text-[#1d293d]",children:"✕"}),(0,b.jsx)("h2",{className:"text-xl font-bold text-[#1d293d] mb-4",children:"Configurações da Dispensa"}),q?(0,b.jsxs)("p",{className:"text-[#444444] mb-4",children:[(0,b.jsx)("strong",{children:"Nome:"})," ",q.nome]}):(0,b.jsx)("p",{className:"text-sm text-[#90a1b9] mb-4",children:"Carregando nome da dispensa..."}),(0,b.jsx)("button",{onClick:()=>{F&&ac(Number(F))},className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors",children:"Deletar Dispensa"})]})}),v&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl max-w-lg w-full shadow-xl border border-[#e2e8f0]",children:[(0,b.jsx)("button",{onClick:()=>w(!1),className:"float-right font-bold text-[#90a1b9] hover:text-[#1d293d]",children:"✕"}),(0,b.jsx)("h2",{className:"text-xl font-bold text-[#1d293d] mb-4",children:"Distribuição do Estoque"}),(0,b.jsx)(by.ResponsiveContainer,{width:"100%",height:400,children:(0,b.jsxs)(T,{children:[(0,b.jsx)(a8,{data:a.map(a=>({name:a.nome,value:Number(a.peso)})),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",label:!0,children:a.map((a,c)=>(0,b.jsx)(az.Cell,{fill:ad[c%ad.length]},`cell-${c}`))}),(0,b.jsx)(a9.Tooltip,{}),(0,b.jsx)(bx,{})]})})]})})]}),(0,b.jsx)(A,{})]})}a.s(["default",()=>bC],1032)}];

//# sourceMappingURL=src_app_dispensa_%5Bid%5D_page_tsx_eb442539._.js.map