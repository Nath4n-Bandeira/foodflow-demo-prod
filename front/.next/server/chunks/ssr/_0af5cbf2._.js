module.exports=[87532,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],87532)},74609,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(87532),e=a.i(70106);let f=(0,e.default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var g=a.i(33508),h=a.i(96221),i=a.i(66728),j=a.i(17282),k=a.i(23292);function l(){let[a,e]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(new Set),{friends:v,sendFriendRequest:w,friendRequests:x}=(0,i.useFriendsStore)(),{cliente:y}=(0,j.useClienteStore)();(0,c.useEffect)(()=>{(async()=>{q(!0),s(null);try{let a=await fetch("http://localhost:3001/clientes");if(!a.ok)throw Error("Erro ao carregar usuários");let b=await a.json(),c=[];if(Array.isArray(b))c=b;else if(b.clientes&&Array.isArray(b.clientes))c=b.clientes;else if(b.data&&Array.isArray(b.data))c=b.data;else throw Error("Formato de resposta inválido");o(c)}catch(a){s(a instanceof Error?a.message:"Erro ao carregar usuários")}finally{q(!1)}})()},[]);let z=Array.isArray(n)?n.filter(b=>b.id!==y.id&&!v.some(a=>a.id===b.id)&&(b.nome.toLowerCase().includes(a.toLowerCase())||b.email.toLowerCase().includes(a.toLowerCase()))):[],A=a=>x.some(b=>b.receiverId===a&&"pending"===b.status)||t.has(a),B=async a=>{u(b=>new Set([...b,a.id]));try{await w(a.id,a.nome,a.email),e(""),k.toast.success(`Pedido de amizade enviado para ${a.nome}!`,{style:{background:"#00c950",color:"#ffffff"}})}catch(b){u(b=>{let c=new Set(b);return c.delete(a.id),c}),k.toast.error("Erro ao enviar pedido de amizade.")}};return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Procurar usuários...",value:a,onChange:a=>{e(a.target.value),m(!0)},onFocus:()=>m(!0),className:"w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:p}),p&&(0,b.jsx)(h.Loader2,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 animate-spin"}),a&&!p&&(0,b.jsx)("button",{onClick:()=>{e(""),m(!1)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,b.jsx)(g.X,{className:"w-5 h-5"})})]}),r&&(0,b.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-red-50 rounded-lg shadow-lg border border-red-200 p-4 text-center text-red-600",children:r}),l&&a&&!p&&!r&&z.length>0&&(0,b.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-white rounded-lg shadow-lg border border-gray-200 max-h-80 overflow-y-auto",children:z.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600 font-semibold",children:a.nome.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.nome}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.email})]})]}),(0,b.jsx)("button",{onClick:()=>B(a),disabled:A(a.id)||t.has(a.id),className:`p-2 rounded-lg text-white transition-colors ${A(a.id)||t.has(a.id)?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,title:A(a.id)?"Pedido de amizade enviado":"Enviar pedido de amizade",children:(0,b.jsx)(f,{className:"w-5 h-5"})})]},a.id))}),l&&a&&!p&&!r&&0===z.length&&(0,b.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-white rounded-lg shadow-lg border border-gray-200 p-4 text-center text-gray-500",children:"Nenhum usuário encontrado"})]})}var m=a.i(45222);let n=(0,e.default)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var o=a.i(60246),p=a.i(50944);let q=(0,e.default)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var r=a.i(5434);function s(){let{friendRequests:a,acceptFriendRequest:d,rejectFriendRequest:e}=(0,i.useFriendsStore)(),{cliente:g}=(0,j.useClienteStore)(),[h,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0);(0,c.useEffect)(()=>{g?.id&&n()},[g?.id]);let n=async()=>{try{m(!1);let a=r.default.get("token"),b=await fetch(`http://localhost:3001/friendRequests/${g?.id}`,{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();k(a)}}catch(a){m(!1)}},o=async a=>{try{await d(a.id,{id:a.solicitante.id,nome:a.solicitante.nome,email:a.solicitante.email}),k(h.filter(b=>b.id!==a.id))}catch(a){}},p=async a=>{try{await e(a.id),k(h.filter(b=>b.id!==a.id))}catch(a){}};return l||0===h.length?null:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8",children:[(0,b.jsx)("div",{className:"p-4 border-b border-gray-200 bg-green-50",children:(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(f,{className:"w-5 h-5 text-green-600"}),"Solicitações de Amizade (",h.length,")"]})}),(0,b.jsx)("div",{className:"divide-y divide-gray-100",children:h.map(a=>(0,b.jsxs)("div",{className:"p-4 hover:bg-gray-50 transition-colors flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-green-600 font-semibold text-lg",children:a.solicitante.nome.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:a.solicitante.nome}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.solicitante.email}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(a.createdAt).toLocaleDateString("pt-BR")})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>o(a),className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors font-medium text-sm",children:"Aceitar"}),(0,b.jsxs)("button",{onClick:()=>p(a),className:"px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors font-medium text-sm flex items-center gap-2",children:[(0,b.jsx)(q,{className:"w-4 h-4"}),"Rejeitar"]})]})]},a.id))})]})}function t(){let{friends:a,removeFriend:d,messages:e,openChat:f,loadFriends:g}=(0,i.useFriendsStore)(),{cliente:h,isHydrated:k}=(0,j.useClienteStore)(),q=(0,p.useRouter)();return((0,c.useEffect)(()=>{!k||h&&h.id||q.push("/login")},[h,q,k]),(0,c.useEffect)(()=>{k&&h?.id&&g()},[k,h?.id,g]),k&&h&&h.id)?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-4 sm:py-8",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl",children:[(0,b.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,b.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2 flex items-center gap-2 sm:gap-3",children:[(0,b.jsx)(o.Users,{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-600"}),"Meus Amigos"]}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Conecte-se e converse com seus amigos"})]}),(0,b.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,b.jsx)(l,{})}),(0,b.jsx)(s,{}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,b.jsx)("div",{className:"p-3 sm:p-4 border-b border-gray-200",children:(0,b.jsxs)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:["Lista de Amigos (",a.length,")"]})}),0===a.length?(0,b.jsxs)("div",{className:"p-8 sm:p-12 text-center",children:[(0,b.jsx)(o.Users,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-300 mx-auto mb-3 sm:mb-4"}),(0,b.jsx)("p",{className:"text-gray-500 text-base sm:text-lg mb-2",children:"Você ainda não tem amigos"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-gray-400",children:"Use a busca acima para encontrar e adicionar amigos"})]}):(0,b.jsx)("div",{className:"divide-y divide-gray-100",children:a.map(a=>{let c,g=(c=a.id,e.filter(a=>a.senderId===c&&a.receiverId===h.id&&!a.read).length);return(0,b.jsxs)("div",{className:"p-3 sm:p-4 hover:bg-gray-50 transition-colors flex items-center justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0 flex-1",children:[(0,b.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-green-100 flex items-center justify-center text-green-600 font-semibold text-base sm:text-lg flex-shrink-0",children:a.nome.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 text-sm sm:text-base truncate",children:a.nome}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:a.email})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,b.jsxs)("button",{onClick:()=>f(a),className:"relative p-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors",title:"Enviar mensagem",children:[(0,b.jsx)(m.MessageCircle,{className:"w-4 h-4 sm:w-5 sm:h-5"}),g>0&&(0,b.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 sm:w-5 sm:h-5 bg-red-500 text-white text-[10px] sm:text-xs rounded-full flex items-center justify-center",children:g})]}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void(confirm("Tem certeza que deseja remover este amigo?")&&d(b))},className:"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition-colors",title:"Remover amigo",children:(0,b.jsx)(n,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]},a.id)})})]})]})}):null}a.s(["default",()=>t],74609)}];

//# sourceMappingURL=_0af5cbf2._.js.map